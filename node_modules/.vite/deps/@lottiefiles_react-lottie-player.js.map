{
  "version": 3,
  "sources": ["../../@lottiefiles/react-lottie-player/node_modules/tslib/tslib.es6.js", "../../@lottiefiles/react-lottie-player/node_modules/lottie-web/build/player/lottie.js", "../../@lottiefiles/react-lottie-player/src/versions.ts", "../../@lottiefiles/react-lottie-player/src/Player.tsx", "../../@lottiefiles/react-lottie-player/node_modules/style-inject/dist/style-inject.es.js", "../../@lottiefiles/react-lottie-player/src/ColorPicker.tsx", "../../@lottiefiles/react-lottie-player/src/Popover.tsx", "../../@lottiefiles/react-lottie-player/src/Seeker.tsx", "../../@lottiefiles/react-lottie-player/src/Controls.tsx"],
  "sourcesContent": ["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n", "(typeof navigator !== \"undefined\") && (function (global, factory) {\r\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\r\n  typeof define === 'function' && define.amd ? define(factory) :\r\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.lottie = factory());\r\n})(this, (function () { 'use strict';\r\n\r\n  var svgNS = 'http://www.w3.org/2000/svg';\r\n  var locationHref = '';\r\n  var _useWebWorker = false;\r\n  var initialDefaultFrame = -999999;\r\n\r\n  var setWebWorker = function setWebWorker(flag) {\r\n    _useWebWorker = !!flag;\r\n  };\r\n\r\n  var getWebWorker = function getWebWorker() {\r\n    return _useWebWorker;\r\n  };\r\n\r\n  var setLocationHref = function setLocationHref(value) {\r\n    locationHref = value;\r\n  };\r\n\r\n  var getLocationHref = function getLocationHref() {\r\n    return locationHref;\r\n  };\r\n\r\n  function createTag(type) {\r\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n    return document.createElement(type);\r\n  }\r\n\r\n  function extendPrototype(sources, destination) {\r\n    var i;\r\n    var len = sources.length;\r\n    var sourcePrototype;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      sourcePrototype = sources[i].prototype;\r\n\r\n      for (var attr in sourcePrototype) {\r\n        if (Object.prototype.hasOwnProperty.call(sourcePrototype, attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n      }\r\n    }\r\n  }\r\n\r\n  function getDescriptor(object, prop) {\r\n    return Object.getOwnPropertyDescriptor(object, prop);\r\n  }\r\n\r\n  function createProxyFunction(prototype) {\r\n    function ProxyFunction() {}\r\n\r\n    ProxyFunction.prototype = prototype;\r\n    return ProxyFunction;\r\n  }\r\n\r\n  // import Howl from '../../3rd_party/howler';\r\n  var audioControllerFactory = function () {\r\n    function AudioController(audioFactory) {\r\n      this.audios = [];\r\n      this.audioFactory = audioFactory;\r\n      this._volume = 1;\r\n      this._isMuted = false;\r\n    }\r\n\r\n    AudioController.prototype = {\r\n      addAudio: function addAudio(audio) {\r\n        this.audios.push(audio);\r\n      },\r\n      pause: function pause() {\r\n        var i;\r\n        var len = this.audios.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this.audios[i].pause();\r\n        }\r\n      },\r\n      resume: function resume() {\r\n        var i;\r\n        var len = this.audios.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this.audios[i].resume();\r\n        }\r\n      },\r\n      setRate: function setRate(rateValue) {\r\n        var i;\r\n        var len = this.audios.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this.audios[i].setRate(rateValue);\r\n        }\r\n      },\r\n      createAudio: function createAudio(assetPath) {\r\n        if (this.audioFactory) {\r\n          return this.audioFactory(assetPath);\r\n        }\r\n\r\n        if (window.Howl) {\r\n          return new window.Howl({\r\n            src: [assetPath]\r\n          });\r\n        }\r\n\r\n        return {\r\n          isPlaying: false,\r\n          play: function play() {\r\n            this.isPlaying = true;\r\n          },\r\n          seek: function seek() {\r\n            this.isPlaying = false;\r\n          },\r\n          playing: function playing() {},\r\n          rate: function rate() {},\r\n          setVolume: function setVolume() {}\r\n        };\r\n      },\r\n      setAudioFactory: function setAudioFactory(audioFactory) {\r\n        this.audioFactory = audioFactory;\r\n      },\r\n      setVolume: function setVolume(value) {\r\n        this._volume = value;\r\n\r\n        this._updateVolume();\r\n      },\r\n      mute: function mute() {\r\n        this._isMuted = true;\r\n\r\n        this._updateVolume();\r\n      },\r\n      unmute: function unmute() {\r\n        this._isMuted = false;\r\n\r\n        this._updateVolume();\r\n      },\r\n      getVolume: function getVolume() {\r\n        return this._volume;\r\n      },\r\n      _updateVolume: function _updateVolume() {\r\n        var i;\r\n        var len = this.audios.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this.audios[i].volume(this._volume * (this._isMuted ? 0 : 1));\r\n        }\r\n      }\r\n    };\r\n    return function () {\r\n      return new AudioController();\r\n    };\r\n  }();\r\n\r\n  var createTypedArray = function () {\r\n    function createRegularArray(type, len) {\r\n      var i = 0;\r\n      var arr = [];\r\n      var value;\r\n\r\n      switch (type) {\r\n        case 'int16':\r\n        case 'uint8c':\r\n          value = 1;\r\n          break;\r\n\r\n        default:\r\n          value = 1.1;\r\n          break;\r\n      }\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        arr.push(value);\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function createTypedArrayFactory(type, len) {\r\n      if (type === 'float32') {\r\n        return new Float32Array(len);\r\n      }\r\n\r\n      if (type === 'int16') {\r\n        return new Int16Array(len);\r\n      }\r\n\r\n      if (type === 'uint8c') {\r\n        return new Uint8ClampedArray(len);\r\n      }\r\n\r\n      return createRegularArray(type, len);\r\n    }\r\n\r\n    if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n      return createTypedArrayFactory;\r\n    }\r\n\r\n    return createRegularArray;\r\n  }();\r\n\r\n  function createSizedArray(len) {\r\n    return Array.apply(null, {\r\n      length: len\r\n    });\r\n  }\r\n\r\n  function _typeof$6(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$6 = function _typeof(obj) { return typeof obj; }; } else { _typeof$6 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$6(obj); }\r\n  var subframeEnabled = true;\r\n  var expressionsPlugin = null;\r\n  var expressionsInterfaces = null;\r\n  var idPrefix$1 = '';\r\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n  var _shouldRoundValues = false;\r\n  var bmPow = Math.pow;\r\n  var bmSqrt = Math.sqrt;\r\n  var bmFloor = Math.floor;\r\n  var bmMax = Math.max;\r\n  var bmMin = Math.min;\r\n  var BMMath = {};\r\n\r\n  (function () {\r\n    var propertyNames = ['abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'atan2', 'ceil', 'cbrt', 'expm1', 'clz32', 'cos', 'cosh', 'exp', 'floor', 'fround', 'hypot', 'imul', 'log', 'log1p', 'log2', 'log10', 'max', 'min', 'pow', 'random', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc', 'E', 'LN10', 'LN2', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\r\n    var i;\r\n    var len = propertyNames.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n    }\r\n  })();\r\n\r\n  function ProjectInterface$1() {\r\n    return {};\r\n  }\r\n\r\n  BMMath.random = Math.random;\r\n\r\n  BMMath.abs = function (val) {\r\n    var tOfVal = _typeof$6(val);\r\n\r\n    if (tOfVal === 'object' && val.length) {\r\n      var absArr = createSizedArray(val.length);\r\n      var i;\r\n      var len = val.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        absArr[i] = Math.abs(val[i]);\r\n      }\r\n\r\n      return absArr;\r\n    }\r\n\r\n    return Math.abs(val);\r\n  };\r\n\r\n  var defaultCurveSegments = 150;\r\n  var degToRads = Math.PI / 180;\r\n  var roundCorner = 0.5519;\r\n\r\n  function roundValues(flag) {\r\n    _shouldRoundValues = !!flag;\r\n  }\r\n\r\n  function bmRnd(value) {\r\n    if (_shouldRoundValues) {\r\n      return Math.round(value);\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  function styleDiv(element) {\r\n    element.style.position = 'absolute';\r\n    element.style.top = 0;\r\n    element.style.left = 0;\r\n    element.style.display = 'block';\r\n    element.style.transformOrigin = '0 0';\r\n    element.style.webkitTransformOrigin = '0 0';\r\n    element.style.backfaceVisibility = 'visible';\r\n    element.style.webkitBackfaceVisibility = 'visible';\r\n    element.style.transformStyle = 'preserve-3d';\r\n    element.style.webkitTransformStyle = 'preserve-3d';\r\n    element.style.mozTransformStyle = 'preserve-3d';\r\n  }\r\n\r\n  function BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier) {\r\n    this.type = type;\r\n    this.currentTime = currentTime;\r\n    this.totalTime = totalTime;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n  }\r\n\r\n  function BMCompleteEvent(type, frameMultiplier) {\r\n    this.type = type;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n  }\r\n\r\n  function BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier) {\r\n    this.type = type;\r\n    this.currentLoop = currentLoop;\r\n    this.totalLoops = totalLoops;\r\n    this.direction = frameMultiplier < 0 ? -1 : 1;\r\n  }\r\n\r\n  function BMSegmentStartEvent(type, firstFrame, totalFrames) {\r\n    this.type = type;\r\n    this.firstFrame = firstFrame;\r\n    this.totalFrames = totalFrames;\r\n  }\r\n\r\n  function BMDestroyEvent(type, target) {\r\n    this.type = type;\r\n    this.target = target;\r\n  }\r\n\r\n  function BMRenderFrameErrorEvent(nativeError, currentTime) {\r\n    this.type = 'renderFrameError';\r\n    this.nativeError = nativeError;\r\n    this.currentTime = currentTime;\r\n  }\r\n\r\n  function BMConfigErrorEvent(nativeError) {\r\n    this.type = 'configError';\r\n    this.nativeError = nativeError;\r\n  }\r\n\r\n  function BMAnimationConfigErrorEvent(type, nativeError) {\r\n    this.type = type;\r\n    this.nativeError = nativeError;\r\n  }\r\n\r\n  var createElementID = function () {\r\n    var _count = 0;\r\n    return function createID() {\r\n      _count += 1;\r\n      return idPrefix$1 + '__lottie_element_' + _count;\r\n    };\r\n  }();\r\n\r\n  function HSVtoRGB(h, s, v) {\r\n    var r;\r\n    var g;\r\n    var b;\r\n    var i;\r\n    var f;\r\n    var p;\r\n    var q;\r\n    var t;\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n\r\n    switch (i % 6) {\r\n      case 0:\r\n        r = v;\r\n        g = t;\r\n        b = p;\r\n        break;\r\n\r\n      case 1:\r\n        r = q;\r\n        g = v;\r\n        b = p;\r\n        break;\r\n\r\n      case 2:\r\n        r = p;\r\n        g = v;\r\n        b = t;\r\n        break;\r\n\r\n      case 3:\r\n        r = p;\r\n        g = q;\r\n        b = v;\r\n        break;\r\n\r\n      case 4:\r\n        r = t;\r\n        g = p;\r\n        b = v;\r\n        break;\r\n\r\n      case 5:\r\n        r = v;\r\n        g = p;\r\n        b = q;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return [r, g, b];\r\n  }\r\n\r\n  function RGBtoHSV(r, g, b) {\r\n    var max = Math.max(r, g, b);\r\n    var min = Math.min(r, g, b);\r\n    var d = max - min;\r\n    var h;\r\n    var s = max === 0 ? 0 : d / max;\r\n    var v = max / 255;\r\n\r\n    switch (max) {\r\n      case min:\r\n        h = 0;\r\n        break;\r\n\r\n      case r:\r\n        h = g - b + d * (g < b ? 6 : 0);\r\n        h /= 6 * d;\r\n        break;\r\n\r\n      case g:\r\n        h = b - r + d * 2;\r\n        h /= 6 * d;\r\n        break;\r\n\r\n      case b:\r\n        h = r - g + d * 4;\r\n        h /= 6 * d;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return [h, s, v];\r\n  }\r\n\r\n  function addSaturationToRGB(color, offset) {\r\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n    hsv[1] += offset;\r\n\r\n    if (hsv[1] > 1) {\r\n      hsv[1] = 1;\r\n    } else if (hsv[1] <= 0) {\r\n      hsv[1] = 0;\r\n    }\r\n\r\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n  }\r\n\r\n  function addBrightnessToRGB(color, offset) {\r\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n    hsv[2] += offset;\r\n\r\n    if (hsv[2] > 1) {\r\n      hsv[2] = 1;\r\n    } else if (hsv[2] < 0) {\r\n      hsv[2] = 0;\r\n    }\r\n\r\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n  }\r\n\r\n  function addHueToRGB(color, offset) {\r\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n    hsv[0] += offset / 360;\r\n\r\n    if (hsv[0] > 1) {\r\n      hsv[0] -= 1;\r\n    } else if (hsv[0] < 0) {\r\n      hsv[0] += 1;\r\n    }\r\n\r\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n  }\r\n\r\n  var rgbToHex = function () {\r\n    var colorMap = [];\r\n    var i;\r\n    var hex;\r\n\r\n    for (i = 0; i < 256; i += 1) {\r\n      hex = i.toString(16);\r\n      colorMap[i] = hex.length === 1 ? '0' + hex : hex;\r\n    }\r\n\r\n    return function (r, g, b) {\r\n      if (r < 0) {\r\n        r = 0;\r\n      }\r\n\r\n      if (g < 0) {\r\n        g = 0;\r\n      }\r\n\r\n      if (b < 0) {\r\n        b = 0;\r\n      }\r\n\r\n      return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n    };\r\n  }();\r\n\r\n  var setSubframeEnabled = function setSubframeEnabled(flag) {\r\n    subframeEnabled = !!flag;\r\n  };\r\n\r\n  var getSubframeEnabled = function getSubframeEnabled() {\r\n    return subframeEnabled;\r\n  };\r\n\r\n  var setExpressionsPlugin = function setExpressionsPlugin(value) {\r\n    expressionsPlugin = value;\r\n  };\r\n\r\n  var getExpressionsPlugin = function getExpressionsPlugin() {\r\n    return expressionsPlugin;\r\n  };\r\n\r\n  var setExpressionInterfaces = function setExpressionInterfaces(value) {\r\n    expressionsInterfaces = value;\r\n  };\r\n\r\n  var getExpressionInterfaces = function getExpressionInterfaces() {\r\n    return expressionsInterfaces;\r\n  };\r\n\r\n  var setDefaultCurveSegments = function setDefaultCurveSegments(value) {\r\n    defaultCurveSegments = value;\r\n  };\r\n\r\n  var getDefaultCurveSegments = function getDefaultCurveSegments() {\r\n    return defaultCurveSegments;\r\n  };\r\n\r\n  var setIdPrefix = function setIdPrefix(value) {\r\n    idPrefix$1 = value;\r\n  };\r\n\r\n  var getIdPrefix = function getIdPrefix() {\r\n    return idPrefix$1;\r\n  };\r\n\r\n  function createNS(type) {\r\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n    return document.createElementNS(svgNS, type);\r\n  }\r\n\r\n  function _typeof$5(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$5 = function _typeof(obj) { return typeof obj; }; } else { _typeof$5 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$5(obj); }\r\n\r\n  var dataManager = function () {\r\n    var _counterId = 1;\r\n    var processes = [];\r\n    var workerFn;\r\n    var workerInstance;\r\n    var workerProxy = {\r\n      onmessage: function onmessage() {},\r\n      postMessage: function postMessage(path) {\r\n        workerFn({\r\n          data: path\r\n        });\r\n      }\r\n    };\r\n    var _workerSelf = {\r\n      postMessage: function postMessage(data) {\r\n        workerProxy.onmessage({\r\n          data: data\r\n        });\r\n      }\r\n    };\r\n\r\n    function createWorker(fn) {\r\n      if (window.Worker && window.Blob && getWebWorker()) {\r\n        var blob = new Blob(['var _workerSelf = self; self.onmessage = ', fn.toString()], {\r\n          type: 'text/javascript'\r\n        }); // var blob = new Blob(['self.onmessage = ', fn.toString()], { type: 'text/javascript' });\r\n\r\n        var url = URL.createObjectURL(blob);\r\n        return new Worker(url);\r\n      }\r\n\r\n      workerFn = fn;\r\n      return workerProxy;\r\n    }\r\n\r\n    function setupWorker() {\r\n      if (!workerInstance) {\r\n        workerInstance = createWorker(function workerStart(e) {\r\n          function dataFunctionManager() {\r\n            function completeLayers(layers, comps) {\r\n              var layerData;\r\n              var i;\r\n              var len = layers.length;\r\n              var j;\r\n              var jLen;\r\n              var k;\r\n              var kLen;\r\n\r\n              for (i = 0; i < len; i += 1) {\r\n                layerData = layers[i];\r\n\r\n                if ('ks' in layerData && !layerData.completed) {\r\n                  layerData.completed = true;\r\n\r\n                  if (layerData.hasMask) {\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (maskProps[j].pt.k.i) {\r\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                      } else {\r\n                        kLen = maskProps[j].pt.k.length;\r\n\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                          if (maskProps[j].pt.k[k].s) {\r\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                          }\r\n\r\n                          if (maskProps[j].pt.k[k].e) {\r\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                  if (layerData.ty === 0) {\r\n                    layerData.layers = findCompLayers(layerData.refId, comps);\r\n                    completeLayers(layerData.layers, comps);\r\n                  } else if (layerData.ty === 4) {\r\n                    completeShapes(layerData.shapes);\r\n                  } else if (layerData.ty === 5) {\r\n                    completeText(layerData);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            function completeChars(chars, assets) {\r\n              if (chars) {\r\n                var i = 0;\r\n                var len = chars.length;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (chars[i].t === 1) {\r\n                    // var compData = findComp(chars[i].data.refId, assets);\r\n                    chars[i].data.layers = findCompLayers(chars[i].data.refId, assets); // chars[i].data.ip = 0;\r\n                    // chars[i].data.op = 99999;\r\n                    // chars[i].data.st = 0;\r\n                    // chars[i].data.sr = 1;\r\n                    // chars[i].w = compData.w;\r\n                    // chars[i].data.ks = {\r\n                    //   a: { k: [0, 0, 0], a: 0 },\r\n                    //   p: { k: [0, -compData.h, 0], a: 0 },\r\n                    //   r: { k: 0, a: 0 },\r\n                    //   s: { k: [100, 100], a: 0 },\r\n                    //   o: { k: 100, a: 0 },\r\n                    // };\r\n\r\n                    completeLayers(chars[i].data.layers, assets);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            function findComp(id, comps) {\r\n              var i = 0;\r\n              var len = comps.length;\r\n\r\n              while (i < len) {\r\n                if (comps[i].id === id) {\r\n                  return comps[i];\r\n                }\r\n\r\n                i += 1;\r\n              }\r\n\r\n              return null;\r\n            }\r\n\r\n            function findCompLayers(id, comps) {\r\n              var comp = findComp(id, comps);\r\n\r\n              if (comp) {\r\n                if (!comp.layers.__used) {\r\n                  comp.layers.__used = true;\r\n                  return comp.layers;\r\n                }\r\n\r\n                return JSON.parse(JSON.stringify(comp.layers));\r\n              }\r\n\r\n              return null;\r\n            }\r\n\r\n            function completeShapes(arr) {\r\n              var i;\r\n              var len = arr.length;\r\n              var j;\r\n              var jLen;\r\n\r\n              for (i = len - 1; i >= 0; i -= 1) {\r\n                if (arr[i].ty === 'sh') {\r\n                  if (arr[i].ks.k.i) {\r\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                  } else {\r\n                    jLen = arr[i].ks.k.length;\r\n\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (arr[i].ks.k[j].s) {\r\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                      }\r\n\r\n                      if (arr[i].ks.k[j].e) {\r\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                      }\r\n                    }\r\n                  }\r\n                } else if (arr[i].ty === 'gr') {\r\n                  completeShapes(arr[i].it);\r\n                }\r\n              }\r\n            }\r\n\r\n            function convertPathsToAbsoluteValues(path) {\r\n              var i;\r\n              var len = path.i.length;\r\n\r\n              for (i = 0; i < len; i += 1) {\r\n                path.i[i][0] += path.v[i][0];\r\n                path.i[i][1] += path.v[i][1];\r\n                path.o[i][0] += path.v[i][0];\r\n                path.o[i][1] += path.v[i][1];\r\n              }\r\n            }\r\n\r\n            function checkVersion(minimum, animVersionString) {\r\n              var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\r\n\r\n              if (minimum[0] > animVersion[0]) {\r\n                return true;\r\n              }\r\n\r\n              if (animVersion[0] > minimum[0]) {\r\n                return false;\r\n              }\r\n\r\n              if (minimum[1] > animVersion[1]) {\r\n                return true;\r\n              }\r\n\r\n              if (animVersion[1] > minimum[1]) {\r\n                return false;\r\n              }\r\n\r\n              if (minimum[2] > animVersion[2]) {\r\n                return true;\r\n              }\r\n\r\n              if (animVersion[2] > minimum[2]) {\r\n                return false;\r\n              }\r\n\r\n              return null;\r\n            }\r\n\r\n            var checkText = function () {\r\n              var minimumVersion = [4, 4, 14];\r\n\r\n              function updateTextLayer(textLayer) {\r\n                var documentData = textLayer.t.d;\r\n                textLayer.t.d = {\r\n                  k: [{\r\n                    s: documentData,\r\n                    t: 0\r\n                  }]\r\n                };\r\n              }\r\n\r\n              function iterateLayers(layers) {\r\n                var i;\r\n                var len = layers.length;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (layers[i].ty === 5) {\r\n                    updateTextLayer(layers[i]);\r\n                  }\r\n                }\r\n              }\r\n\r\n              return function (animationData) {\r\n                if (checkVersion(minimumVersion, animationData.v)) {\r\n                  iterateLayers(animationData.layers);\r\n\r\n                  if (animationData.assets) {\r\n                    var i;\r\n                    var len = animationData.assets.length;\r\n\r\n                    for (i = 0; i < len; i += 1) {\r\n                      if (animationData.assets[i].layers) {\r\n                        iterateLayers(animationData.assets[i].layers);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            var checkChars = function () {\r\n              var minimumVersion = [4, 7, 99];\r\n              return function (animationData) {\r\n                if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\r\n                  var i;\r\n                  var len = animationData.chars.length;\r\n\r\n                  for (i = 0; i < len; i += 1) {\r\n                    var charData = animationData.chars[i];\r\n\r\n                    if (charData.data && charData.data.shapes) {\r\n                      completeShapes(charData.data.shapes);\r\n                      charData.data.ip = 0;\r\n                      charData.data.op = 99999;\r\n                      charData.data.st = 0;\r\n                      charData.data.sr = 1;\r\n                      charData.data.ks = {\r\n                        p: {\r\n                          k: [0, 0],\r\n                          a: 0\r\n                        },\r\n                        s: {\r\n                          k: [100, 100],\r\n                          a: 0\r\n                        },\r\n                        a: {\r\n                          k: [0, 0],\r\n                          a: 0\r\n                        },\r\n                        r: {\r\n                          k: 0,\r\n                          a: 0\r\n                        },\r\n                        o: {\r\n                          k: 100,\r\n                          a: 0\r\n                        }\r\n                      };\r\n\r\n                      if (!animationData.chars[i].t) {\r\n                        charData.data.shapes.push({\r\n                          ty: 'no'\r\n                        });\r\n                        charData.data.shapes[0].it.push({\r\n                          p: {\r\n                            k: [0, 0],\r\n                            a: 0\r\n                          },\r\n                          s: {\r\n                            k: [100, 100],\r\n                            a: 0\r\n                          },\r\n                          a: {\r\n                            k: [0, 0],\r\n                            a: 0\r\n                          },\r\n                          r: {\r\n                            k: 0,\r\n                            a: 0\r\n                          },\r\n                          o: {\r\n                            k: 100,\r\n                            a: 0\r\n                          },\r\n                          sk: {\r\n                            k: 0,\r\n                            a: 0\r\n                          },\r\n                          sa: {\r\n                            k: 0,\r\n                            a: 0\r\n                          },\r\n                          ty: 'tr'\r\n                        });\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            var checkPathProperties = function () {\r\n              var minimumVersion = [5, 7, 15];\r\n\r\n              function updateTextLayer(textLayer) {\r\n                var pathData = textLayer.t.p;\r\n\r\n                if (typeof pathData.a === 'number') {\r\n                  pathData.a = {\r\n                    a: 0,\r\n                    k: pathData.a\r\n                  };\r\n                }\r\n\r\n                if (typeof pathData.p === 'number') {\r\n                  pathData.p = {\r\n                    a: 0,\r\n                    k: pathData.p\r\n                  };\r\n                }\r\n\r\n                if (typeof pathData.r === 'number') {\r\n                  pathData.r = {\r\n                    a: 0,\r\n                    k: pathData.r\r\n                  };\r\n                }\r\n              }\r\n\r\n              function iterateLayers(layers) {\r\n                var i;\r\n                var len = layers.length;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (layers[i].ty === 5) {\r\n                    updateTextLayer(layers[i]);\r\n                  }\r\n                }\r\n              }\r\n\r\n              return function (animationData) {\r\n                if (checkVersion(minimumVersion, animationData.v)) {\r\n                  iterateLayers(animationData.layers);\r\n\r\n                  if (animationData.assets) {\r\n                    var i;\r\n                    var len = animationData.assets.length;\r\n\r\n                    for (i = 0; i < len; i += 1) {\r\n                      if (animationData.assets[i].layers) {\r\n                        iterateLayers(animationData.assets[i].layers);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            var checkColors = function () {\r\n              var minimumVersion = [4, 1, 9];\r\n\r\n              function iterateShapes(shapes) {\r\n                var i;\r\n                var len = shapes.length;\r\n                var j;\r\n                var jLen;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (shapes[i].ty === 'gr') {\r\n                    iterateShapes(shapes[i].it);\r\n                  } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\r\n                    if (shapes[i].c.k && shapes[i].c.k[0].i) {\r\n                      jLen = shapes[i].c.k.length;\r\n\r\n                      for (j = 0; j < jLen; j += 1) {\r\n                        if (shapes[i].c.k[j].s) {\r\n                          shapes[i].c.k[j].s[0] /= 255;\r\n                          shapes[i].c.k[j].s[1] /= 255;\r\n                          shapes[i].c.k[j].s[2] /= 255;\r\n                          shapes[i].c.k[j].s[3] /= 255;\r\n                        }\r\n\r\n                        if (shapes[i].c.k[j].e) {\r\n                          shapes[i].c.k[j].e[0] /= 255;\r\n                          shapes[i].c.k[j].e[1] /= 255;\r\n                          shapes[i].c.k[j].e[2] /= 255;\r\n                          shapes[i].c.k[j].e[3] /= 255;\r\n                        }\r\n                      }\r\n                    } else {\r\n                      shapes[i].c.k[0] /= 255;\r\n                      shapes[i].c.k[1] /= 255;\r\n                      shapes[i].c.k[2] /= 255;\r\n                      shapes[i].c.k[3] /= 255;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n\r\n              function iterateLayers(layers) {\r\n                var i;\r\n                var len = layers.length;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  if (layers[i].ty === 4) {\r\n                    iterateShapes(layers[i].shapes);\r\n                  }\r\n                }\r\n              }\r\n\r\n              return function (animationData) {\r\n                if (checkVersion(minimumVersion, animationData.v)) {\r\n                  iterateLayers(animationData.layers);\r\n\r\n                  if (animationData.assets) {\r\n                    var i;\r\n                    var len = animationData.assets.length;\r\n\r\n                    for (i = 0; i < len; i += 1) {\r\n                      if (animationData.assets[i].layers) {\r\n                        iterateLayers(animationData.assets[i].layers);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            var checkShapes = function () {\r\n              var minimumVersion = [4, 4, 18];\r\n\r\n              function completeClosingShapes(arr) {\r\n                var i;\r\n                var len = arr.length;\r\n                var j;\r\n                var jLen;\r\n\r\n                for (i = len - 1; i >= 0; i -= 1) {\r\n                  if (arr[i].ty === 'sh') {\r\n                    if (arr[i].ks.k.i) {\r\n                      arr[i].ks.k.c = arr[i].closed;\r\n                    } else {\r\n                      jLen = arr[i].ks.k.length;\r\n\r\n                      for (j = 0; j < jLen; j += 1) {\r\n                        if (arr[i].ks.k[j].s) {\r\n                          arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                        }\r\n\r\n                        if (arr[i].ks.k[j].e) {\r\n                          arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                        }\r\n                      }\r\n                    }\r\n                  } else if (arr[i].ty === 'gr') {\r\n                    completeClosingShapes(arr[i].it);\r\n                  }\r\n                }\r\n              }\r\n\r\n              function iterateLayers(layers) {\r\n                var layerData;\r\n                var i;\r\n                var len = layers.length;\r\n                var j;\r\n                var jLen;\r\n                var k;\r\n                var kLen;\r\n\r\n                for (i = 0; i < len; i += 1) {\r\n                  layerData = layers[i];\r\n\r\n                  if (layerData.hasMask) {\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                      if (maskProps[j].pt.k.i) {\r\n                        maskProps[j].pt.k.c = maskProps[j].cl;\r\n                      } else {\r\n                        kLen = maskProps[j].pt.k.length;\r\n\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                          if (maskProps[j].pt.k[k].s) {\r\n                            maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                          }\r\n\r\n                          if (maskProps[j].pt.k[k].e) {\r\n                            maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n\r\n                  if (layerData.ty === 4) {\r\n                    completeClosingShapes(layerData.shapes);\r\n                  }\r\n                }\r\n              }\r\n\r\n              return function (animationData) {\r\n                if (checkVersion(minimumVersion, animationData.v)) {\r\n                  iterateLayers(animationData.layers);\r\n\r\n                  if (animationData.assets) {\r\n                    var i;\r\n                    var len = animationData.assets.length;\r\n\r\n                    for (i = 0; i < len; i += 1) {\r\n                      if (animationData.assets[i].layers) {\r\n                        iterateLayers(animationData.assets[i].layers);\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              };\r\n            }();\r\n\r\n            function completeData(animationData) {\r\n              if (animationData.__complete) {\r\n                return;\r\n              }\r\n\r\n              checkColors(animationData);\r\n              checkText(animationData);\r\n              checkChars(animationData);\r\n              checkPathProperties(animationData);\r\n              checkShapes(animationData);\r\n              completeLayers(animationData.layers, animationData.assets);\r\n              completeChars(animationData.chars, animationData.assets);\r\n              animationData.__complete = true;\r\n            }\r\n\r\n            function completeText(data) {\r\n              if (data.t.a.length === 0 && !('m' in data.t.p)) {// data.singleShape = true;\r\n              }\r\n            }\r\n\r\n            var moduleOb = {};\r\n            moduleOb.completeData = completeData;\r\n            moduleOb.checkColors = checkColors;\r\n            moduleOb.checkChars = checkChars;\r\n            moduleOb.checkPathProperties = checkPathProperties;\r\n            moduleOb.checkShapes = checkShapes;\r\n            moduleOb.completeLayers = completeLayers;\r\n            return moduleOb;\r\n          }\r\n\r\n          if (!_workerSelf.dataManager) {\r\n            _workerSelf.dataManager = dataFunctionManager();\r\n          }\r\n\r\n          if (!_workerSelf.assetLoader) {\r\n            _workerSelf.assetLoader = function () {\r\n              function formatResponse(xhr) {\r\n                // using typeof doubles the time of execution of this method,\r\n                // so if available, it's better to use the header to validate the type\r\n                var contentTypeHeader = xhr.getResponseHeader('content-type');\r\n\r\n                if (contentTypeHeader && xhr.responseType === 'json' && contentTypeHeader.indexOf('json') !== -1) {\r\n                  return xhr.response;\r\n                }\r\n\r\n                if (xhr.response && _typeof$5(xhr.response) === 'object') {\r\n                  return xhr.response;\r\n                }\r\n\r\n                if (xhr.response && typeof xhr.response === 'string') {\r\n                  return JSON.parse(xhr.response);\r\n                }\r\n\r\n                if (xhr.responseText) {\r\n                  return JSON.parse(xhr.responseText);\r\n                }\r\n\r\n                return null;\r\n              }\r\n\r\n              function loadAsset(path, fullPath, callback, errorCallback) {\r\n                var response;\r\n                var xhr = new XMLHttpRequest(); // set responseType after calling open or IE will break.\r\n\r\n                try {\r\n                  // This crashes on Android WebView prior to KitKat\r\n                  xhr.responseType = 'json';\r\n                } catch (err) {} // eslint-disable-line no-empty\r\n\r\n\r\n                xhr.onreadystatechange = function () {\r\n                  if (xhr.readyState === 4) {\r\n                    if (xhr.status === 200) {\r\n                      response = formatResponse(xhr);\r\n                      callback(response);\r\n                    } else {\r\n                      try {\r\n                        response = formatResponse(xhr);\r\n                        callback(response);\r\n                      } catch (err) {\r\n                        if (errorCallback) {\r\n                          errorCallback(err);\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                };\r\n\r\n                try {\r\n                  // Hack to workaround banner validation\r\n                  xhr.open(['G', 'E', 'T'].join(''), path, true);\r\n                } catch (error) {\r\n                  // Hack to workaround banner validation\r\n                  xhr.open(['G', 'E', 'T'].join(''), fullPath + '/' + path, true);\r\n                }\r\n\r\n                xhr.send();\r\n              }\r\n\r\n              return {\r\n                load: loadAsset\r\n              };\r\n            }();\r\n          }\r\n\r\n          if (e.data.type === 'loadAnimation') {\r\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\r\n              _workerSelf.dataManager.completeData(data);\r\n\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                payload: data,\r\n                status: 'success'\r\n              });\r\n            }, function () {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                status: 'error'\r\n              });\r\n            });\r\n          } else if (e.data.type === 'complete') {\r\n            var animation = e.data.animation;\r\n\r\n            _workerSelf.dataManager.completeData(animation);\r\n\r\n            _workerSelf.postMessage({\r\n              id: e.data.id,\r\n              payload: animation,\r\n              status: 'success'\r\n            });\r\n          } else if (e.data.type === 'loadData') {\r\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                payload: data,\r\n                status: 'success'\r\n              });\r\n            }, function () {\r\n              _workerSelf.postMessage({\r\n                id: e.data.id,\r\n                status: 'error'\r\n              });\r\n            });\r\n          }\r\n        });\r\n\r\n        workerInstance.onmessage = function (event) {\r\n          var data = event.data;\r\n          var id = data.id;\r\n          var process = processes[id];\r\n          processes[id] = null;\r\n\r\n          if (data.status === 'success') {\r\n            process.onComplete(data.payload);\r\n          } else if (process.onError) {\r\n            process.onError();\r\n          }\r\n        };\r\n      }\r\n    }\r\n\r\n    function createProcess(onComplete, onError) {\r\n      _counterId += 1;\r\n      var id = 'processId_' + _counterId;\r\n      processes[id] = {\r\n        onComplete: onComplete,\r\n        onError: onError\r\n      };\r\n      return id;\r\n    }\r\n\r\n    function loadAnimation(path, onComplete, onError) {\r\n      setupWorker();\r\n      var processId = createProcess(onComplete, onError);\r\n      workerInstance.postMessage({\r\n        type: 'loadAnimation',\r\n        path: path,\r\n        fullPath: window.location.origin + window.location.pathname,\r\n        id: processId\r\n      });\r\n    }\r\n\r\n    function loadData(path, onComplete, onError) {\r\n      setupWorker();\r\n      var processId = createProcess(onComplete, onError);\r\n      workerInstance.postMessage({\r\n        type: 'loadData',\r\n        path: path,\r\n        fullPath: window.location.origin + window.location.pathname,\r\n        id: processId\r\n      });\r\n    }\r\n\r\n    function completeAnimation(anim, onComplete, onError) {\r\n      setupWorker();\r\n      var processId = createProcess(onComplete, onError);\r\n      workerInstance.postMessage({\r\n        type: 'complete',\r\n        animation: anim,\r\n        id: processId\r\n      });\r\n    }\r\n\r\n    return {\r\n      loadAnimation: loadAnimation,\r\n      loadData: loadData,\r\n      completeAnimation: completeAnimation\r\n    };\r\n  }();\r\n\r\n  var ImagePreloader = function () {\r\n    var proxyImage = function () {\r\n      var canvas = createTag('canvas');\r\n      canvas.width = 1;\r\n      canvas.height = 1;\r\n      var ctx = canvas.getContext('2d');\r\n      ctx.fillStyle = 'rgba(0,0,0,0)';\r\n      ctx.fillRect(0, 0, 1, 1);\r\n      return canvas;\r\n    }();\r\n\r\n    function imageLoaded() {\r\n      this.loadedAssets += 1;\r\n\r\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n        if (this.imagesLoadedCb) {\r\n          this.imagesLoadedCb(null);\r\n        }\r\n      }\r\n    }\r\n\r\n    function footageLoaded() {\r\n      this.loadedFootagesCount += 1;\r\n\r\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n        if (this.imagesLoadedCb) {\r\n          this.imagesLoadedCb(null);\r\n        }\r\n      }\r\n    }\r\n\r\n    function getAssetsPath(assetData, assetsPath, originalPath) {\r\n      var path = '';\r\n\r\n      if (assetData.e) {\r\n        path = assetData.p;\r\n      } else if (assetsPath) {\r\n        var imagePath = assetData.p;\r\n\r\n        if (imagePath.indexOf('images/') !== -1) {\r\n          imagePath = imagePath.split('/')[1];\r\n        }\r\n\r\n        path = assetsPath + imagePath;\r\n      } else {\r\n        path = originalPath;\r\n        path += assetData.u ? assetData.u : '';\r\n        path += assetData.p;\r\n      }\r\n\r\n      return path;\r\n    }\r\n\r\n    function testImageLoaded(img) {\r\n      var _count = 0;\r\n      var intervalId = setInterval(function () {\r\n        var box = img.getBBox();\r\n\r\n        if (box.width || _count > 500) {\r\n          this._imageLoaded();\r\n\r\n          clearInterval(intervalId);\r\n        }\r\n\r\n        _count += 1;\r\n      }.bind(this), 50);\r\n    }\r\n\r\n    function createImageData(assetData) {\r\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n      var img = createNS('image');\r\n\r\n      if (isSafari) {\r\n        this.testImageLoaded(img);\r\n      } else {\r\n        img.addEventListener('load', this._imageLoaded, false);\r\n      }\r\n\r\n      img.addEventListener('error', function () {\r\n        ob.img = proxyImage;\r\n\r\n        this._imageLoaded();\r\n      }.bind(this), false);\r\n      img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\r\n\r\n      if (this._elementHelper.append) {\r\n        this._elementHelper.append(img);\r\n      } else {\r\n        this._elementHelper.appendChild(img);\r\n      }\r\n\r\n      var ob = {\r\n        img: img,\r\n        assetData: assetData\r\n      };\r\n      return ob;\r\n    }\r\n\r\n    function createImgData(assetData) {\r\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n      var img = createTag('img');\r\n      img.crossOrigin = 'anonymous';\r\n      img.addEventListener('load', this._imageLoaded, false);\r\n      img.addEventListener('error', function () {\r\n        ob.img = proxyImage;\r\n\r\n        this._imageLoaded();\r\n      }.bind(this), false);\r\n      img.src = path;\r\n      var ob = {\r\n        img: img,\r\n        assetData: assetData\r\n      };\r\n      return ob;\r\n    }\r\n\r\n    function createFootageData(data) {\r\n      var ob = {\r\n        assetData: data\r\n      };\r\n      var path = getAssetsPath(data, this.assetsPath, this.path);\r\n      dataManager.loadData(path, function (footageData) {\r\n        ob.img = footageData;\r\n\r\n        this._footageLoaded();\r\n      }.bind(this), function () {\r\n        ob.img = {};\r\n\r\n        this._footageLoaded();\r\n      }.bind(this));\r\n      return ob;\r\n    }\r\n\r\n    function loadAssets(assets, cb) {\r\n      this.imagesLoadedCb = cb;\r\n      var i;\r\n      var len = assets.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (!assets[i].layers) {\r\n          if (!assets[i].t || assets[i].t === 'seq') {\r\n            this.totalImages += 1;\r\n            this.images.push(this._createImageData(assets[i]));\r\n          } else if (assets[i].t === 3) {\r\n            this.totalFootages += 1;\r\n            this.images.push(this.createFootageData(assets[i]));\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    function setPath(path) {\r\n      this.path = path || '';\r\n    }\r\n\r\n    function setAssetsPath(path) {\r\n      this.assetsPath = path || '';\r\n    }\r\n\r\n    function getAsset(assetData) {\r\n      var i = 0;\r\n      var len = this.images.length;\r\n\r\n      while (i < len) {\r\n        if (this.images[i].assetData === assetData) {\r\n          return this.images[i].img;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    function destroy() {\r\n      this.imagesLoadedCb = null;\r\n      this.images.length = 0;\r\n    }\r\n\r\n    function loadedImages() {\r\n      return this.totalImages === this.loadedAssets;\r\n    }\r\n\r\n    function loadedFootages() {\r\n      return this.totalFootages === this.loadedFootagesCount;\r\n    }\r\n\r\n    function setCacheType(type, elementHelper) {\r\n      if (type === 'svg') {\r\n        this._elementHelper = elementHelper;\r\n        this._createImageData = this.createImageData.bind(this);\r\n      } else {\r\n        this._createImageData = this.createImgData.bind(this);\r\n      }\r\n    }\r\n\r\n    function ImagePreloaderFactory() {\r\n      this._imageLoaded = imageLoaded.bind(this);\r\n      this._footageLoaded = footageLoaded.bind(this);\r\n      this.testImageLoaded = testImageLoaded.bind(this);\r\n      this.createFootageData = createFootageData.bind(this);\r\n      this.assetsPath = '';\r\n      this.path = '';\r\n      this.totalImages = 0;\r\n      this.totalFootages = 0;\r\n      this.loadedAssets = 0;\r\n      this.loadedFootagesCount = 0;\r\n      this.imagesLoadedCb = null;\r\n      this.images = [];\r\n    }\r\n\r\n    ImagePreloaderFactory.prototype = {\r\n      loadAssets: loadAssets,\r\n      setAssetsPath: setAssetsPath,\r\n      setPath: setPath,\r\n      loadedImages: loadedImages,\r\n      loadedFootages: loadedFootages,\r\n      destroy: destroy,\r\n      getAsset: getAsset,\r\n      createImgData: createImgData,\r\n      createImageData: createImageData,\r\n      imageLoaded: imageLoaded,\r\n      footageLoaded: footageLoaded,\r\n      setCacheType: setCacheType\r\n    };\r\n    return ImagePreloaderFactory;\r\n  }();\r\n\r\n  function BaseEvent() {}\r\n\r\n  BaseEvent.prototype = {\r\n    triggerEvent: function triggerEvent(eventName, args) {\r\n      if (this._cbs[eventName]) {\r\n        var callbacks = this._cbs[eventName];\r\n\r\n        for (var i = 0; i < callbacks.length; i += 1) {\r\n          callbacks[i](args);\r\n        }\r\n      }\r\n    },\r\n    addEventListener: function addEventListener(eventName, callback) {\r\n      if (!this._cbs[eventName]) {\r\n        this._cbs[eventName] = [];\r\n      }\r\n\r\n      this._cbs[eventName].push(callback);\r\n\r\n      return function () {\r\n        this.removeEventListener(eventName, callback);\r\n      }.bind(this);\r\n    },\r\n    removeEventListener: function removeEventListener(eventName, callback) {\r\n      if (!callback) {\r\n        this._cbs[eventName] = null;\r\n      } else if (this._cbs[eventName]) {\r\n        var i = 0;\r\n        var len = this._cbs[eventName].length;\r\n\r\n        while (i < len) {\r\n          if (this._cbs[eventName][i] === callback) {\r\n            this._cbs[eventName].splice(i, 1);\r\n\r\n            i -= 1;\r\n            len -= 1;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        if (!this._cbs[eventName].length) {\r\n          this._cbs[eventName] = null;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  var markerParser = function () {\r\n    function parsePayloadLines(payload) {\r\n      var lines = payload.split('\\r\\n');\r\n      var keys = {};\r\n      var line;\r\n      var keysCount = 0;\r\n\r\n      for (var i = 0; i < lines.length; i += 1) {\r\n        line = lines[i].split(':');\r\n\r\n        if (line.length === 2) {\r\n          keys[line[0]] = line[1].trim();\r\n          keysCount += 1;\r\n        }\r\n      }\r\n\r\n      if (keysCount === 0) {\r\n        throw new Error();\r\n      }\r\n\r\n      return keys;\r\n    }\r\n\r\n    return function (_markers) {\r\n      var markers = [];\r\n\r\n      for (var i = 0; i < _markers.length; i += 1) {\r\n        var _marker = _markers[i];\r\n        var markerData = {\r\n          time: _marker.tm,\r\n          duration: _marker.dr\r\n        };\r\n\r\n        try {\r\n          markerData.payload = JSON.parse(_markers[i].cm);\r\n        } catch (_) {\r\n          try {\r\n            markerData.payload = parsePayloadLines(_markers[i].cm);\r\n          } catch (__) {\r\n            markerData.payload = {\r\n              name: _markers[i].cm\r\n            };\r\n          }\r\n        }\r\n\r\n        markers.push(markerData);\r\n      }\r\n\r\n      return markers;\r\n    };\r\n  }();\r\n\r\n  var ProjectInterface = function () {\r\n    function registerComposition(comp) {\r\n      this.compositions.push(comp);\r\n    }\r\n\r\n    return function () {\r\n      function _thisProjectFunction(name) {\r\n        var i = 0;\r\n        var len = this.compositions.length;\r\n\r\n        while (i < len) {\r\n          if (this.compositions[i].data && this.compositions[i].data.nm === name) {\r\n            if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\r\n              this.compositions[i].prepareFrame(this.currentFrame);\r\n            }\r\n\r\n            return this.compositions[i].compInterface;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      _thisProjectFunction.compositions = [];\r\n      _thisProjectFunction.currentFrame = 0;\r\n      _thisProjectFunction.registerComposition = registerComposition;\r\n      return _thisProjectFunction;\r\n    };\r\n  }();\r\n\r\n  var renderers = {};\r\n\r\n  var registerRenderer = function registerRenderer(key, value) {\r\n    renderers[key] = value;\r\n  };\r\n\r\n  function getRenderer(key) {\r\n    return renderers[key];\r\n  }\r\n\r\n  function _typeof$4(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$4 = function _typeof(obj) { return typeof obj; }; } else { _typeof$4 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$4(obj); }\r\n\r\n  var AnimationItem = function AnimationItem() {\r\n    this._cbs = [];\r\n    this.name = '';\r\n    this.path = '';\r\n    this.isLoaded = false;\r\n    this.currentFrame = 0;\r\n    this.currentRawFrame = 0;\r\n    this.firstFrame = 0;\r\n    this.totalFrames = 0;\r\n    this.frameRate = 0;\r\n    this.frameMult = 0;\r\n    this.playSpeed = 1;\r\n    this.playDirection = 1;\r\n    this.playCount = 0;\r\n    this.animationData = {};\r\n    this.assets = [];\r\n    this.isPaused = true;\r\n    this.autoplay = false;\r\n    this.loop = true;\r\n    this.renderer = null;\r\n    this.animationID = createElementID();\r\n    this.assetsPath = '';\r\n    this.timeCompleted = 0;\r\n    this.segmentPos = 0;\r\n    this.isSubframeEnabled = getSubframeEnabled();\r\n    this.segments = [];\r\n    this._idle = true;\r\n    this._completedLoop = false;\r\n    this.projectInterface = ProjectInterface();\r\n    this.imagePreloader = new ImagePreloader();\r\n    this.audioController = audioControllerFactory();\r\n    this.markers = [];\r\n    this.configAnimation = this.configAnimation.bind(this);\r\n    this.onSetupError = this.onSetupError.bind(this);\r\n    this.onSegmentComplete = this.onSegmentComplete.bind(this);\r\n    this.drawnFrameEvent = new BMEnterFrameEvent('drawnFrame', 0, 0, 0);\r\n  };\r\n\r\n  extendPrototype([BaseEvent], AnimationItem);\r\n\r\n  AnimationItem.prototype.setParams = function (params) {\r\n    if (params.wrapper || params.container) {\r\n      this.wrapper = params.wrapper || params.container;\r\n    }\r\n\r\n    var animType = 'svg';\r\n\r\n    if (params.animType) {\r\n      animType = params.animType;\r\n    } else if (params.renderer) {\r\n      animType = params.renderer;\r\n    }\r\n\r\n    var RendererClass = getRenderer(animType);\r\n    this.renderer = new RendererClass(this, params.rendererSettings);\r\n    this.imagePreloader.setCacheType(animType, this.renderer.globalData.defs);\r\n    this.renderer.setProjectInterface(this.projectInterface);\r\n    this.animType = animType;\r\n\r\n    if (params.loop === '' || params.loop === null || params.loop === undefined || params.loop === true) {\r\n      this.loop = true;\r\n    } else if (params.loop === false) {\r\n      this.loop = false;\r\n    } else {\r\n      this.loop = parseInt(params.loop, 10);\r\n    }\r\n\r\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n    this.name = params.name ? params.name : '';\r\n    this.autoloadSegments = Object.prototype.hasOwnProperty.call(params, 'autoloadSegments') ? params.autoloadSegments : true;\r\n    this.assetsPath = params.assetsPath;\r\n    this.initialSegment = params.initialSegment;\r\n\r\n    if (params.audioFactory) {\r\n      this.audioController.setAudioFactory(params.audioFactory);\r\n    }\r\n\r\n    if (params.animationData) {\r\n      this.setupAnimation(params.animationData);\r\n    } else if (params.path) {\r\n      if (params.path.lastIndexOf('\\\\') !== -1) {\r\n        this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\r\n      } else {\r\n        this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\r\n      }\r\n\r\n      this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\r\n      this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\r\n      dataManager.loadAnimation(params.path, this.configAnimation, this.onSetupError);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.onSetupError = function () {\r\n    this.trigger('data_failed');\r\n  };\r\n\r\n  AnimationItem.prototype.setupAnimation = function (data) {\r\n    dataManager.completeAnimation(data, this.configAnimation);\r\n  };\r\n\r\n  AnimationItem.prototype.setData = function (wrapper, animationData) {\r\n    if (animationData) {\r\n      if (_typeof$4(animationData) !== 'object') {\r\n        animationData = JSON.parse(animationData);\r\n      }\r\n    }\r\n\r\n    var params = {\r\n      wrapper: wrapper,\r\n      animationData: animationData\r\n    };\r\n    var wrapperAttributes = wrapper.attributes;\r\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-path').value : wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\r\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('bm-type').value : wrapperAttributes.getNamedItem('data-bm-renderer') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\r\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-loop').value : wrapperAttributes.getNamedItem('data-bm-loop') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-loop').value : wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\r\n\r\n    if (loop === 'false') {\r\n      params.loop = false;\r\n    } else if (loop === 'true') {\r\n      params.loop = true;\r\n    } else if (loop !== '') {\r\n      params.loop = parseInt(loop, 10);\r\n    }\r\n\r\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-autoplay').value : wrapperAttributes.getNamedItem('data-bm-autoplay') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-autoplay').value : wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\r\n    params.autoplay = autoplay !== 'false';\r\n    params.name = wrapperAttributes.getNamedItem('data-name') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-name').value : wrapperAttributes.getNamedItem('data-bm-name') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value : '';\r\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-prerender').value : wrapperAttributes.getNamedItem('data-bm-prerender') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-bm-prerender').value : wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\r\n\r\n    if (prerender === 'false') {\r\n      params.prerender = false;\r\n    }\r\n\r\n    this.setParams(params);\r\n  };\r\n\r\n  AnimationItem.prototype.includeLayers = function (data) {\r\n    if (data.op > this.animationData.op) {\r\n      this.animationData.op = data.op;\r\n      this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n    }\r\n\r\n    var layers = this.animationData.layers;\r\n    var i;\r\n    var len = layers.length;\r\n    var newLayers = data.layers;\r\n    var j;\r\n    var jLen = newLayers.length;\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      i = 0;\r\n\r\n      while (i < len) {\r\n        if (layers[i].id === newLayers[j].id) {\r\n          layers[i] = newLayers[j];\r\n          break;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n    }\r\n\r\n    if (data.chars || data.fonts) {\r\n      this.renderer.globalData.fontManager.addChars(data.chars);\r\n      this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n    }\r\n\r\n    if (data.assets) {\r\n      len = data.assets.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.animationData.assets.push(data.assets[i]);\r\n      }\r\n    }\r\n\r\n    this.animationData.__complete = false;\r\n    dataManager.completeAnimation(this.animationData, this.onSegmentComplete);\r\n  };\r\n\r\n  AnimationItem.prototype.onSegmentComplete = function (data) {\r\n    this.animationData = data;\r\n    var expressionsPlugin = getExpressionsPlugin();\r\n\r\n    if (expressionsPlugin) {\r\n      expressionsPlugin.initExpressions(this);\r\n    }\r\n\r\n    this.loadNextSegment();\r\n  };\r\n\r\n  AnimationItem.prototype.loadNextSegment = function () {\r\n    var segments = this.animationData.segments;\r\n\r\n    if (!segments || segments.length === 0 || !this.autoloadSegments) {\r\n      this.trigger('data_ready');\r\n      this.timeCompleted = this.totalFrames;\r\n      return;\r\n    }\r\n\r\n    var segment = segments.shift();\r\n    this.timeCompleted = segment.time * this.frameRate;\r\n    var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\r\n    this.segmentPos += 1;\r\n    dataManager.loadData(segmentPath, this.includeLayers.bind(this), function () {\r\n      this.trigger('data_failed');\r\n    }.bind(this));\r\n  };\r\n\r\n  AnimationItem.prototype.loadSegments = function () {\r\n    var segments = this.animationData.segments;\r\n\r\n    if (!segments) {\r\n      this.timeCompleted = this.totalFrames;\r\n    }\r\n\r\n    this.loadNextSegment();\r\n  };\r\n\r\n  AnimationItem.prototype.imagesLoaded = function () {\r\n    this.trigger('loaded_images');\r\n    this.checkLoaded();\r\n  };\r\n\r\n  AnimationItem.prototype.preloadImages = function () {\r\n    this.imagePreloader.setAssetsPath(this.assetsPath);\r\n    this.imagePreloader.setPath(this.path);\r\n    this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\r\n  };\r\n\r\n  AnimationItem.prototype.configAnimation = function (animData) {\r\n    if (!this.renderer) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.animationData = animData;\r\n\r\n      if (this.initialSegment) {\r\n        this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]);\r\n        this.firstFrame = Math.round(this.initialSegment[0]);\r\n      } else {\r\n        this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n        this.firstFrame = Math.round(this.animationData.ip);\r\n      }\r\n\r\n      this.renderer.configAnimation(animData);\r\n\r\n      if (!animData.assets) {\r\n        animData.assets = [];\r\n      }\r\n\r\n      this.assets = this.animationData.assets;\r\n      this.frameRate = this.animationData.fr;\r\n      this.frameMult = this.animationData.fr / 1000;\r\n      this.renderer.searchExtraCompositions(animData.assets);\r\n      this.markers = markerParser(animData.markers || []);\r\n      this.trigger('config_ready');\r\n      this.preloadImages();\r\n      this.loadSegments();\r\n      this.updaFrameModifier();\r\n      this.waitForFontsLoaded();\r\n\r\n      if (this.isPaused) {\r\n        this.audioController.pause();\r\n      }\r\n    } catch (error) {\r\n      this.triggerConfigError(error);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.waitForFontsLoaded = function () {\r\n    if (!this.renderer) {\r\n      return;\r\n    }\r\n\r\n    if (this.renderer.globalData.fontManager.isLoaded) {\r\n      this.checkLoaded();\r\n    } else {\r\n      setTimeout(this.waitForFontsLoaded.bind(this), 20);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.checkLoaded = function () {\r\n    if (!this.isLoaded && this.renderer.globalData.fontManager.isLoaded && (this.imagePreloader.loadedImages() || this.renderer.rendererType !== 'canvas') && this.imagePreloader.loadedFootages()) {\r\n      this.isLoaded = true;\r\n      var expressionsPlugin = getExpressionsPlugin();\r\n\r\n      if (expressionsPlugin) {\r\n        expressionsPlugin.initExpressions(this);\r\n      }\r\n\r\n      this.renderer.initItems();\r\n      setTimeout(function () {\r\n        this.trigger('DOMLoaded');\r\n      }.bind(this), 0);\r\n      this.gotoFrame();\r\n\r\n      if (this.autoplay) {\r\n        this.play();\r\n      }\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.resize = function (width, height) {\r\n    // Adding this validation for backwards compatibility in case an event object was being passed down\r\n    var _width = typeof width === 'number' ? width : undefined;\r\n\r\n    var _height = typeof height === 'number' ? height : undefined;\r\n\r\n    this.renderer.updateContainerSize(_width, _height);\r\n  };\r\n\r\n  AnimationItem.prototype.setSubframe = function (flag) {\r\n    this.isSubframeEnabled = !!flag;\r\n  };\r\n\r\n  AnimationItem.prototype.gotoFrame = function () {\r\n    this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame; // eslint-disable-line no-bitwise\r\n\r\n    if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\r\n      this.currentFrame = this.timeCompleted;\r\n    }\r\n\r\n    this.trigger('enterFrame');\r\n    this.renderFrame();\r\n    this.trigger('drawnFrame');\r\n  };\r\n\r\n  AnimationItem.prototype.renderFrame = function () {\r\n    if (this.isLoaded === false || !this.renderer) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n    } catch (error) {\r\n      this.triggerRenderFrameError(error);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.play = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    if (this.isPaused === true) {\r\n      this.isPaused = false;\r\n      this.trigger('_pause');\r\n      this.audioController.resume();\r\n\r\n      if (this._idle) {\r\n        this._idle = false;\r\n        this.trigger('_active');\r\n      }\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.pause = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    if (this.isPaused === false) {\r\n      this.isPaused = true;\r\n      this.trigger('_play');\r\n      this._idle = true;\r\n      this.trigger('_idle');\r\n      this.audioController.pause();\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.togglePause = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    if (this.isPaused === true) {\r\n      this.play();\r\n    } else {\r\n      this.pause();\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.stop = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    this.pause();\r\n    this.playCount = 0;\r\n    this._completedLoop = false;\r\n    this.setCurrentRawFrameValue(0);\r\n  };\r\n\r\n  AnimationItem.prototype.getMarkerData = function (markerName) {\r\n    var marker;\r\n\r\n    for (var i = 0; i < this.markers.length; i += 1) {\r\n      marker = this.markers[i];\r\n\r\n      if (marker.payload && marker.payload.name === markerName) {\r\n        return marker;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  AnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    var numValue = Number(value);\r\n\r\n    if (isNaN(numValue)) {\r\n      var marker = this.getMarkerData(value);\r\n\r\n      if (marker) {\r\n        this.goToAndStop(marker.time, true);\r\n      }\r\n    } else if (isFrame) {\r\n      this.setCurrentRawFrameValue(value);\r\n    } else {\r\n      this.setCurrentRawFrameValue(value * this.frameModifier);\r\n    }\r\n\r\n    this.pause();\r\n  };\r\n\r\n  AnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    var numValue = Number(value);\r\n\r\n    if (isNaN(numValue)) {\r\n      var marker = this.getMarkerData(value);\r\n\r\n      if (marker) {\r\n        if (!marker.duration) {\r\n          this.goToAndStop(marker.time, true);\r\n        } else {\r\n          this.playSegments([marker.time, marker.time + marker.duration], true);\r\n        }\r\n      }\r\n    } else {\r\n      this.goToAndStop(numValue, isFrame, name);\r\n    }\r\n\r\n    this.play();\r\n  };\r\n\r\n  AnimationItem.prototype.advanceTime = function (value) {\r\n    if (this.isPaused === true || this.isLoaded === false) {\r\n      return;\r\n    }\r\n\r\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n    var _isComplete = false; // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n\r\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n      if (!this.loop || this.playCount === this.loop) {\r\n        if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\r\n          _isComplete = true;\r\n          nextValue = this.totalFrames - 1;\r\n        }\r\n      } else if (nextValue >= this.totalFrames) {\r\n        this.playCount += 1;\r\n\r\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n          this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n          this._completedLoop = true;\r\n          this.trigger('loopComplete');\r\n        }\r\n      } else {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n      }\r\n    } else if (nextValue < 0) {\r\n      if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n        if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\r\n          // eslint-disable-line no-plusplus\r\n          this.setCurrentRawFrameValue(this.totalFrames + nextValue % this.totalFrames);\r\n\r\n          if (!this._completedLoop) {\r\n            this._completedLoop = true;\r\n          } else {\r\n            this.trigger('loopComplete');\r\n          }\r\n        } else {\r\n          _isComplete = true;\r\n          nextValue = 0;\r\n        }\r\n      }\r\n    } else {\r\n      this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n\r\n    if (_isComplete) {\r\n      this.setCurrentRawFrameValue(nextValue);\r\n      this.pause();\r\n      this.trigger('complete');\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.adjustSegment = function (arr, offset) {\r\n    this.playCount = 0;\r\n\r\n    if (arr[1] < arr[0]) {\r\n      if (this.frameModifier > 0) {\r\n        if (this.playSpeed < 0) {\r\n          this.setSpeed(-this.playSpeed);\r\n        } else {\r\n          this.setDirection(-1);\r\n        }\r\n      }\r\n\r\n      this.totalFrames = arr[0] - arr[1];\r\n      this.timeCompleted = this.totalFrames;\r\n      this.firstFrame = arr[1];\r\n      this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n    } else if (arr[1] > arr[0]) {\r\n      if (this.frameModifier < 0) {\r\n        if (this.playSpeed < 0) {\r\n          this.setSpeed(-this.playSpeed);\r\n        } else {\r\n          this.setDirection(1);\r\n        }\r\n      }\r\n\r\n      this.totalFrames = arr[1] - arr[0];\r\n      this.timeCompleted = this.totalFrames;\r\n      this.firstFrame = arr[0];\r\n      this.setCurrentRawFrameValue(0.001 + offset);\r\n    }\r\n\r\n    this.trigger('segmentStart');\r\n  };\r\n\r\n  AnimationItem.prototype.setSegment = function (init, end) {\r\n    var pendingFrame = -1;\r\n\r\n    if (this.isPaused) {\r\n      if (this.currentRawFrame + this.firstFrame < init) {\r\n        pendingFrame = init;\r\n      } else if (this.currentRawFrame + this.firstFrame > end) {\r\n        pendingFrame = end - init;\r\n      }\r\n    }\r\n\r\n    this.firstFrame = init;\r\n    this.totalFrames = end - init;\r\n    this.timeCompleted = this.totalFrames;\r\n\r\n    if (pendingFrame !== -1) {\r\n      this.goToAndStop(pendingFrame, true);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.playSegments = function (arr, forceFlag) {\r\n    if (forceFlag) {\r\n      this.segments.length = 0;\r\n    }\r\n\r\n    if (_typeof$4(arr[0]) === 'object') {\r\n      var i;\r\n      var len = arr.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.segments.push(arr[i]);\r\n      }\r\n    } else {\r\n      this.segments.push(arr);\r\n    }\r\n\r\n    if (this.segments.length && forceFlag) {\r\n      this.adjustSegment(this.segments.shift(), 0);\r\n    }\r\n\r\n    if (this.isPaused) {\r\n      this.play();\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.resetSegments = function (forceFlag) {\r\n    this.segments.length = 0;\r\n    this.segments.push([this.animationData.ip, this.animationData.op]);\r\n\r\n    if (forceFlag) {\r\n      this.checkSegments(0);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.checkSegments = function (offset) {\r\n    if (this.segments.length) {\r\n      this.adjustSegment(this.segments.shift(), offset);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  AnimationItem.prototype.destroy = function (name) {\r\n    if (name && this.name !== name || !this.renderer) {\r\n      return;\r\n    }\r\n\r\n    this.renderer.destroy();\r\n    this.imagePreloader.destroy();\r\n    this.trigger('destroy');\r\n    this._cbs = null;\r\n    this.onEnterFrame = null;\r\n    this.onLoopComplete = null;\r\n    this.onComplete = null;\r\n    this.onSegmentStart = null;\r\n    this.onDestroy = null;\r\n    this.renderer = null;\r\n    this.renderer = null;\r\n    this.imagePreloader = null;\r\n    this.projectInterface = null;\r\n  };\r\n\r\n  AnimationItem.prototype.setCurrentRawFrameValue = function (value) {\r\n    this.currentRawFrame = value;\r\n    this.gotoFrame();\r\n  };\r\n\r\n  AnimationItem.prototype.setSpeed = function (val) {\r\n    this.playSpeed = val;\r\n    this.updaFrameModifier();\r\n  };\r\n\r\n  AnimationItem.prototype.setDirection = function (val) {\r\n    this.playDirection = val < 0 ? -1 : 1;\r\n    this.updaFrameModifier();\r\n  };\r\n\r\n  AnimationItem.prototype.setLoop = function (isLooping) {\r\n    this.loop = isLooping;\r\n  };\r\n\r\n  AnimationItem.prototype.setVolume = function (val, name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    this.audioController.setVolume(val);\r\n  };\r\n\r\n  AnimationItem.prototype.getVolume = function () {\r\n    return this.audioController.getVolume();\r\n  };\r\n\r\n  AnimationItem.prototype.mute = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    this.audioController.mute();\r\n  };\r\n\r\n  AnimationItem.prototype.unmute = function (name) {\r\n    if (name && this.name !== name) {\r\n      return;\r\n    }\r\n\r\n    this.audioController.unmute();\r\n  };\r\n\r\n  AnimationItem.prototype.updaFrameModifier = function () {\r\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n    this.audioController.setRate(this.playSpeed * this.playDirection);\r\n  };\r\n\r\n  AnimationItem.prototype.getPath = function () {\r\n    return this.path;\r\n  };\r\n\r\n  AnimationItem.prototype.getAssetsPath = function (assetData) {\r\n    var path = '';\r\n\r\n    if (assetData.e) {\r\n      path = assetData.p;\r\n    } else if (this.assetsPath) {\r\n      var imagePath = assetData.p;\r\n\r\n      if (imagePath.indexOf('images/') !== -1) {\r\n        imagePath = imagePath.split('/')[1];\r\n      }\r\n\r\n      path = this.assetsPath + imagePath;\r\n    } else {\r\n      path = this.path;\r\n      path += assetData.u ? assetData.u : '';\r\n      path += assetData.p;\r\n    }\r\n\r\n    return path;\r\n  };\r\n\r\n  AnimationItem.prototype.getAssetData = function (id) {\r\n    var i = 0;\r\n    var len = this.assets.length;\r\n\r\n    while (i < len) {\r\n      if (id === this.assets[i].id) {\r\n        return this.assets[i];\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  AnimationItem.prototype.hide = function () {\r\n    this.renderer.hide();\r\n  };\r\n\r\n  AnimationItem.prototype.show = function () {\r\n    this.renderer.show();\r\n  };\r\n\r\n  AnimationItem.prototype.getDuration = function (isFrame) {\r\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n  };\r\n\r\n  AnimationItem.prototype.updateDocumentData = function (path, documentData, index) {\r\n    try {\r\n      var element = this.renderer.getElementByPath(path);\r\n      element.updateDocumentData(documentData, index);\r\n    } catch (error) {// TODO: decide how to handle catch case\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.trigger = function (name) {\r\n    if (this._cbs && this._cbs[name]) {\r\n      switch (name) {\r\n        case 'enterFrame':\r\n          this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\r\n          break;\r\n\r\n        case 'drawnFrame':\r\n          this.drawnFrameEvent.currentTime = this.currentFrame;\r\n          this.drawnFrameEvent.totalTime = this.totalFrames;\r\n          this.drawnFrameEvent.direction = this.frameModifier;\r\n          this.triggerEvent(name, this.drawnFrameEvent);\r\n          break;\r\n\r\n        case 'loopComplete':\r\n          this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n          break;\r\n\r\n        case 'complete':\r\n          this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\r\n          break;\r\n\r\n        case 'segmentStart':\r\n          this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n          break;\r\n\r\n        case 'destroy':\r\n          this.triggerEvent(name, new BMDestroyEvent(name, this));\r\n          break;\r\n\r\n        default:\r\n          this.triggerEvent(name);\r\n      }\r\n    }\r\n\r\n    if (name === 'enterFrame' && this.onEnterFrame) {\r\n      this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\r\n    }\r\n\r\n    if (name === 'loopComplete' && this.onLoopComplete) {\r\n      this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n    }\r\n\r\n    if (name === 'complete' && this.onComplete) {\r\n      this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\r\n    }\r\n\r\n    if (name === 'segmentStart' && this.onSegmentStart) {\r\n      this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n    }\r\n\r\n    if (name === 'destroy' && this.onDestroy) {\r\n      this.onDestroy.call(this, new BMDestroyEvent(name, this));\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.triggerRenderFrameError = function (nativeError) {\r\n    var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\r\n    this.triggerEvent('error', error);\r\n\r\n    if (this.onError) {\r\n      this.onError.call(this, error);\r\n    }\r\n  };\r\n\r\n  AnimationItem.prototype.triggerConfigError = function (nativeError) {\r\n    var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\r\n    this.triggerEvent('error', error);\r\n\r\n    if (this.onError) {\r\n      this.onError.call(this, error);\r\n    }\r\n  };\r\n\r\n  var animationManager = function () {\r\n    var moduleOb = {};\r\n    var registeredAnimations = [];\r\n    var initTime = 0;\r\n    var len = 0;\r\n    var playingAnimationsNum = 0;\r\n    var _stopped = true;\r\n    var _isFrozen = false;\r\n\r\n    function removeElement(ev) {\r\n      var i = 0;\r\n      var animItem = ev.target;\r\n\r\n      while (i < len) {\r\n        if (registeredAnimations[i].animation === animItem) {\r\n          registeredAnimations.splice(i, 1);\r\n          i -= 1;\r\n          len -= 1;\r\n\r\n          if (!animItem.isPaused) {\r\n            subtractPlayingCount();\r\n          }\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n    }\r\n\r\n    function registerAnimation(element, animationData) {\r\n      if (!element) {\r\n        return null;\r\n      }\r\n\r\n      var i = 0;\r\n\r\n      while (i < len) {\r\n        if (registeredAnimations[i].elem === element && registeredAnimations[i].elem !== null) {\r\n          return registeredAnimations[i].animation;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      var animItem = new AnimationItem();\r\n      setupAnimation(animItem, element);\r\n      animItem.setData(element, animationData);\r\n      return animItem;\r\n    }\r\n\r\n    function getRegisteredAnimations() {\r\n      var i;\r\n      var lenAnims = registeredAnimations.length;\r\n      var animations = [];\r\n\r\n      for (i = 0; i < lenAnims; i += 1) {\r\n        animations.push(registeredAnimations[i].animation);\r\n      }\r\n\r\n      return animations;\r\n    }\r\n\r\n    function addPlayingCount() {\r\n      playingAnimationsNum += 1;\r\n      activate();\r\n    }\r\n\r\n    function subtractPlayingCount() {\r\n      playingAnimationsNum -= 1;\r\n    }\r\n\r\n    function setupAnimation(animItem, element) {\r\n      animItem.addEventListener('destroy', removeElement);\r\n      animItem.addEventListener('_active', addPlayingCount);\r\n      animItem.addEventListener('_idle', subtractPlayingCount);\r\n      registeredAnimations.push({\r\n        elem: element,\r\n        animation: animItem\r\n      });\r\n      len += 1;\r\n    }\r\n\r\n    function loadAnimation(params) {\r\n      var animItem = new AnimationItem();\r\n      setupAnimation(animItem, null);\r\n      animItem.setParams(params);\r\n      return animItem;\r\n    }\r\n\r\n    function setSpeed(val, animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.setSpeed(val, animation);\r\n      }\r\n    }\r\n\r\n    function setDirection(val, animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.setDirection(val, animation);\r\n      }\r\n    }\r\n\r\n    function play(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.play(animation);\r\n      }\r\n    }\r\n\r\n    function resume(nowTime) {\r\n      var elapsedTime = nowTime - initTime;\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n      }\r\n\r\n      initTime = nowTime;\r\n\r\n      if (playingAnimationsNum && !_isFrozen) {\r\n        window.requestAnimationFrame(resume);\r\n      } else {\r\n        _stopped = true;\r\n      }\r\n    }\r\n\r\n    function first(nowTime) {\r\n      initTime = nowTime;\r\n      window.requestAnimationFrame(resume);\r\n    }\r\n\r\n    function pause(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.pause(animation);\r\n      }\r\n    }\r\n\r\n    function goToAndStop(value, isFrame, animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\r\n      }\r\n    }\r\n\r\n    function stop(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.stop(animation);\r\n      }\r\n    }\r\n\r\n    function togglePause(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.togglePause(animation);\r\n      }\r\n    }\r\n\r\n    function destroy(animation) {\r\n      var i;\r\n\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        registeredAnimations[i].animation.destroy(animation);\r\n      }\r\n    }\r\n\r\n    function searchAnimations(animationData, standalone, renderer) {\r\n      var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')), [].slice.call(document.getElementsByClassName('bodymovin')));\r\n      var i;\r\n      var lenAnims = animElements.length;\r\n\r\n      for (i = 0; i < lenAnims; i += 1) {\r\n        if (renderer) {\r\n          animElements[i].setAttribute('data-bm-type', renderer);\r\n        }\r\n\r\n        registerAnimation(animElements[i], animationData);\r\n      }\r\n\r\n      if (standalone && lenAnims === 0) {\r\n        if (!renderer) {\r\n          renderer = 'svg';\r\n        }\r\n\r\n        var body = document.getElementsByTagName('body')[0];\r\n        body.innerText = '';\r\n        var div = createTag('div');\r\n        div.style.width = '100%';\r\n        div.style.height = '100%';\r\n        div.setAttribute('data-bm-type', renderer);\r\n        body.appendChild(div);\r\n        registerAnimation(div, animationData);\r\n      }\r\n    }\r\n\r\n    function resize() {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.resize();\r\n      }\r\n    }\r\n\r\n    function activate() {\r\n      if (!_isFrozen && playingAnimationsNum) {\r\n        if (_stopped) {\r\n          window.requestAnimationFrame(first);\r\n          _stopped = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    function freeze() {\r\n      _isFrozen = true;\r\n    }\r\n\r\n    function unfreeze() {\r\n      _isFrozen = false;\r\n      activate();\r\n    }\r\n\r\n    function setVolume(val, animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.setVolume(val, animation);\r\n      }\r\n    }\r\n\r\n    function mute(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.mute(animation);\r\n      }\r\n    }\r\n\r\n    function unmute(animation) {\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        registeredAnimations[i].animation.unmute(animation);\r\n      }\r\n    }\r\n\r\n    moduleOb.registerAnimation = registerAnimation;\r\n    moduleOb.loadAnimation = loadAnimation;\r\n    moduleOb.setSpeed = setSpeed;\r\n    moduleOb.setDirection = setDirection;\r\n    moduleOb.play = play;\r\n    moduleOb.pause = pause;\r\n    moduleOb.stop = stop;\r\n    moduleOb.togglePause = togglePause;\r\n    moduleOb.searchAnimations = searchAnimations;\r\n    moduleOb.resize = resize; // moduleOb.start = start;\r\n\r\n    moduleOb.goToAndStop = goToAndStop;\r\n    moduleOb.destroy = destroy;\r\n    moduleOb.freeze = freeze;\r\n    moduleOb.unfreeze = unfreeze;\r\n    moduleOb.setVolume = setVolume;\r\n    moduleOb.mute = mute;\r\n    moduleOb.unmute = unmute;\r\n    moduleOb.getRegisteredAnimations = getRegisteredAnimations;\r\n    return moduleOb;\r\n  }();\r\n\r\n  /* eslint-disable */\r\n  var BezierFactory = function () {\r\n    /**\r\n       * BezierEasing - use bezier curve for transition easing function\r\n       * by Ga\u00EBtan Renaudeau 2014 - 2015 \u2013 MIT License\r\n       *\r\n       * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n       * Usage:\r\n       * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n       * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n       *\r\n       */\r\n    var ob = {};\r\n    ob.getBezierEasing = getBezierEasing;\r\n    var beziers = {};\r\n\r\n    function getBezierEasing(a, b, c, d, nm) {\r\n      var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\r\n\r\n      if (beziers[str]) {\r\n        return beziers[str];\r\n      }\r\n\r\n      var bezEasing = new BezierEasing([a, b, c, d]);\r\n      beziers[str] = bezEasing;\r\n      return bezEasing;\r\n    } // These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n\r\n\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n    var float32ArraySupported = typeof Float32Array === 'function';\r\n\r\n    function A(aA1, aA2) {\r\n      return 1.0 - 3.0 * aA2 + 3.0 * aA1;\r\n    }\r\n\r\n    function B(aA1, aA2) {\r\n      return 3.0 * aA2 - 6.0 * aA1;\r\n    }\r\n\r\n    function C(aA1) {\r\n      return 3.0 * aA1;\r\n    } // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n\r\n\r\n    function calcBezier(aT, aA1, aA2) {\r\n      return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\r\n    } // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n\r\n\r\n    function getSlope(aT, aA1, aA2) {\r\n      return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n    }\r\n\r\n    function binarySubdivide(aX, aA, aB, mX1, mX2) {\r\n      var currentX,\r\n          currentT,\r\n          i = 0;\r\n\r\n      do {\r\n        currentT = aA + (aB - aA) / 2.0;\r\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n\r\n        if (currentX > 0.0) {\r\n          aB = currentT;\r\n        } else {\r\n          aA = currentT;\r\n        }\r\n      } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n\r\n      return currentT;\r\n    }\r\n\r\n    function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\r\n      for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n        var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n        if (currentSlope === 0.0) return aGuessT;\r\n        var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n        aGuessT -= currentX / currentSlope;\r\n      }\r\n\r\n      return aGuessT;\r\n    }\r\n    /**\r\n       * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n       */\r\n\r\n\r\n    function BezierEasing(points) {\r\n      this._p = points;\r\n      this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n      this._precomputed = false;\r\n      this.get = this.get.bind(this);\r\n    }\r\n\r\n    BezierEasing.prototype = {\r\n      get: function get(x) {\r\n        var mX1 = this._p[0],\r\n            mY1 = this._p[1],\r\n            mX2 = this._p[2],\r\n            mY2 = this._p[3];\r\n        if (!this._precomputed) this._precompute();\r\n        if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n        // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n\r\n        if (x === 0) return 0;\r\n        if (x === 1) return 1;\r\n        return calcBezier(this._getTForX(x), mY1, mY2);\r\n      },\r\n      // Private part\r\n      _precompute: function _precompute() {\r\n        var mX1 = this._p[0],\r\n            mY1 = this._p[1],\r\n            mX2 = this._p[2],\r\n            mY2 = this._p[3];\r\n        this._precomputed = true;\r\n\r\n        if (mX1 !== mY1 || mX2 !== mY2) {\r\n          this._calcSampleValues();\r\n        }\r\n      },\r\n      _calcSampleValues: function _calcSampleValues() {\r\n        var mX1 = this._p[0],\r\n            mX2 = this._p[2];\r\n\r\n        for (var i = 0; i < kSplineTableSize; ++i) {\r\n          this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n        }\r\n      },\r\n\r\n      /**\r\n           * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n           */\r\n      _getTForX: function _getTForX(aX) {\r\n        var mX1 = this._p[0],\r\n            mX2 = this._p[2],\r\n            mSampleValues = this._mSampleValues;\r\n        var intervalStart = 0.0;\r\n        var currentSample = 1;\r\n        var lastSample = kSplineTableSize - 1;\r\n\r\n        for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n          intervalStart += kSampleStepSize;\r\n        }\r\n\r\n        --currentSample; // Interpolate to provide an initial guess for t\r\n\r\n        var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\r\n        var guessForT = intervalStart + dist * kSampleStepSize;\r\n        var initialSlope = getSlope(guessForT, mX1, mX2);\r\n\r\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n          return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n        }\r\n\r\n        if (initialSlope === 0.0) {\r\n          return guessForT;\r\n        }\r\n\r\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n      }\r\n    };\r\n    return ob;\r\n  }();\r\n\r\n  var pooling = function () {\r\n    function _double(arr) {\r\n      return arr.concat(createSizedArray(arr.length));\r\n    }\r\n\r\n    return {\r\n      \"double\": _double\r\n    };\r\n  }();\r\n\r\n  var poolFactory = function () {\r\n    return function (initialLength, _create, _release) {\r\n      var _length = 0;\r\n      var _maxLength = initialLength;\r\n      var pool = createSizedArray(_maxLength);\r\n      var ob = {\r\n        newElement: newElement,\r\n        release: release\r\n      };\r\n\r\n      function newElement() {\r\n        var element;\r\n\r\n        if (_length) {\r\n          _length -= 1;\r\n          element = pool[_length];\r\n        } else {\r\n          element = _create();\r\n        }\r\n\r\n        return element;\r\n      }\r\n\r\n      function release(element) {\r\n        if (_length === _maxLength) {\r\n          pool = pooling[\"double\"](pool);\r\n          _maxLength *= 2;\r\n        }\r\n\r\n        if (_release) {\r\n          _release(element);\r\n        }\r\n\r\n        pool[_length] = element;\r\n        _length += 1;\r\n      }\r\n\r\n      return ob;\r\n    };\r\n  }();\r\n\r\n  var bezierLengthPool = function () {\r\n    function create() {\r\n      return {\r\n        addedLength: 0,\r\n        percents: createTypedArray('float32', getDefaultCurveSegments()),\r\n        lengths: createTypedArray('float32', getDefaultCurveSegments())\r\n      };\r\n    }\r\n\r\n    return poolFactory(8, create);\r\n  }();\r\n\r\n  var segmentsLengthPool = function () {\r\n    function create() {\r\n      return {\r\n        lengths: [],\r\n        totalLength: 0\r\n      };\r\n    }\r\n\r\n    function release(element) {\r\n      var i;\r\n      var len = element.lengths.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        bezierLengthPool.release(element.lengths[i]);\r\n      }\r\n\r\n      element.lengths.length = 0;\r\n    }\r\n\r\n    return poolFactory(8, create, release);\r\n  }();\r\n\r\n  function bezFunction() {\r\n    var math = Math;\r\n\r\n    function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\r\n      var det1 = x1 * y2 + y1 * x3 + x2 * y3 - x3 * y2 - y3 * x1 - x2 * y1;\r\n      return det1 > -0.001 && det1 < 0.001;\r\n    }\r\n\r\n    function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\r\n      if (z1 === 0 && z2 === 0 && z3 === 0) {\r\n        return pointOnLine2D(x1, y1, x2, y2, x3, y3);\r\n      }\r\n\r\n      var dist1 = math.sqrt(math.pow(x2 - x1, 2) + math.pow(y2 - y1, 2) + math.pow(z2 - z1, 2));\r\n      var dist2 = math.sqrt(math.pow(x3 - x1, 2) + math.pow(y3 - y1, 2) + math.pow(z3 - z1, 2));\r\n      var dist3 = math.sqrt(math.pow(x3 - x2, 2) + math.pow(y3 - y2, 2) + math.pow(z3 - z2, 2));\r\n      var diffDist;\r\n\r\n      if (dist1 > dist2) {\r\n        if (dist1 > dist3) {\r\n          diffDist = dist1 - dist2 - dist3;\r\n        } else {\r\n          diffDist = dist3 - dist2 - dist1;\r\n        }\r\n      } else if (dist3 > dist2) {\r\n        diffDist = dist3 - dist2 - dist1;\r\n      } else {\r\n        diffDist = dist2 - dist1 - dist3;\r\n      }\r\n\r\n      return diffDist > -0.0001 && diffDist < 0.0001;\r\n    }\r\n\r\n    var getBezierLength = function () {\r\n      return function (pt1, pt2, pt3, pt4) {\r\n        var curveSegments = getDefaultCurveSegments();\r\n        var k;\r\n        var i;\r\n        var len;\r\n        var ptCoord;\r\n        var perc;\r\n        var addedLength = 0;\r\n        var ptDistance;\r\n        var point = [];\r\n        var lastPoint = [];\r\n        var lengthData = bezierLengthPool.newElement();\r\n        len = pt3.length;\r\n\r\n        for (k = 0; k < curveSegments; k += 1) {\r\n          perc = k / (curveSegments - 1);\r\n          ptDistance = 0;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bmPow(perc, 2) * pt4[i] + bmPow(perc, 3) * pt2[i];\r\n            point[i] = ptCoord;\r\n\r\n            if (lastPoint[i] !== null) {\r\n              ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n            }\r\n\r\n            lastPoint[i] = point[i];\r\n          }\r\n\r\n          if (ptDistance) {\r\n            ptDistance = bmSqrt(ptDistance);\r\n            addedLength += ptDistance;\r\n          }\r\n\r\n          lengthData.percents[k] = perc;\r\n          lengthData.lengths[k] = addedLength;\r\n        }\r\n\r\n        lengthData.addedLength = addedLength;\r\n        return lengthData;\r\n      };\r\n    }();\r\n\r\n    function getSegmentsLength(shapeData) {\r\n      var segmentsLength = segmentsLengthPool.newElement();\r\n      var closed = shapeData.c;\r\n      var pathV = shapeData.v;\r\n      var pathO = shapeData.o;\r\n      var pathI = shapeData.i;\r\n      var i;\r\n      var len = shapeData._length;\r\n      var lengths = segmentsLength.lengths;\r\n      var totalLength = 0;\r\n\r\n      for (i = 0; i < len - 1; i += 1) {\r\n        lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\r\n        totalLength += lengths[i].addedLength;\r\n      }\r\n\r\n      if (closed && len) {\r\n        lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\r\n        totalLength += lengths[i].addedLength;\r\n      }\r\n\r\n      segmentsLength.totalLength = totalLength;\r\n      return segmentsLength;\r\n    }\r\n\r\n    function BezierData(length) {\r\n      this.segmentLength = 0;\r\n      this.points = new Array(length);\r\n    }\r\n\r\n    function PointData(partial, point) {\r\n      this.partialLength = partial;\r\n      this.point = point;\r\n    }\r\n\r\n    var buildBezierData = function () {\r\n      var storedData = {};\r\n      return function (pt1, pt2, pt3, pt4) {\r\n        var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\r\n\r\n        if (!storedData[bezierName]) {\r\n          var curveSegments = getDefaultCurveSegments();\r\n          var k;\r\n          var i;\r\n          var len;\r\n          var ptCoord;\r\n          var perc;\r\n          var addedLength = 0;\r\n          var ptDistance;\r\n          var point;\r\n          var lastPoint = null;\r\n\r\n          if (pt1.length === 2 && (pt1[0] !== pt2[0] || pt1[1] !== pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\r\n            curveSegments = 2;\r\n          }\r\n\r\n          var bezierData = new BezierData(curveSegments);\r\n          len = pt3.length;\r\n\r\n          for (k = 0; k < curveSegments; k += 1) {\r\n            point = createSizedArray(len);\r\n            perc = k / (curveSegments - 1);\r\n            ptDistance = 0;\r\n\r\n            for (i = 0; i < len; i += 1) {\r\n              ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bmPow(perc, 2) * (pt2[i] + pt4[i]) + bmPow(perc, 3) * pt2[i];\r\n              point[i] = ptCoord;\r\n\r\n              if (lastPoint !== null) {\r\n                ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n              }\r\n            }\r\n\r\n            ptDistance = bmSqrt(ptDistance);\r\n            addedLength += ptDistance;\r\n            bezierData.points[k] = new PointData(ptDistance, point);\r\n            lastPoint = point;\r\n          }\r\n\r\n          bezierData.segmentLength = addedLength;\r\n          storedData[bezierName] = bezierData;\r\n        }\r\n\r\n        return storedData[bezierName];\r\n      };\r\n    }();\r\n\r\n    function getDistancePerc(perc, bezierData) {\r\n      var percents = bezierData.percents;\r\n      var lengths = bezierData.lengths;\r\n      var len = percents.length;\r\n      var initPos = bmFloor((len - 1) * perc);\r\n      var lengthPos = perc * bezierData.addedLength;\r\n      var lPerc = 0;\r\n\r\n      if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\r\n        return percents[initPos];\r\n      }\r\n\r\n      var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n      var flag = true;\r\n\r\n      while (flag) {\r\n        if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\r\n          lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\r\n          flag = false;\r\n        } else {\r\n          initPos += dir;\r\n        }\r\n\r\n        if (initPos < 0 || initPos >= len - 1) {\r\n          // FIX for TypedArrays that don't store floating point values with enough accuracy\r\n          if (initPos === len - 1) {\r\n            return percents[initPos];\r\n          }\r\n\r\n          flag = false;\r\n        }\r\n      }\r\n\r\n      return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\r\n    }\r\n\r\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n      var t1 = getDistancePerc(percent, bezierData);\r\n      var u1 = 1 - t1;\r\n      var ptX = math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\r\n      var ptY = math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\r\n      return [ptX, ptY];\r\n    }\r\n\r\n    var bezierSegmentPoints = createTypedArray('float32', 8);\r\n\r\n    function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\r\n      if (startPerc < 0) {\r\n        startPerc = 0;\r\n      } else if (startPerc > 1) {\r\n        startPerc = 1;\r\n      }\r\n\r\n      var t0 = getDistancePerc(startPerc, bezierData);\r\n      endPerc = endPerc > 1 ? 1 : endPerc;\r\n      var t1 = getDistancePerc(endPerc, bezierData);\r\n      var i;\r\n      var len = pt1.length;\r\n      var u0 = 1 - t0;\r\n      var u1 = 1 - t1;\r\n      var u0u0u0 = u0 * u0 * u0;\r\n      var t0u0u0_3 = t0 * u0 * u0 * 3; // eslint-disable-line camelcase\r\n\r\n      var t0t0u0_3 = t0 * t0 * u0 * 3; // eslint-disable-line camelcase\r\n\r\n      var t0t0t0 = t0 * t0 * t0; //\r\n\r\n      var u0u0u1 = u0 * u0 * u1;\r\n      var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1; // eslint-disable-line camelcase\r\n\r\n      var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1; // eslint-disable-line camelcase\r\n\r\n      var t0t0t1 = t0 * t0 * t1; //\r\n\r\n      var u0u1u1 = u0 * u1 * u1;\r\n      var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1; // eslint-disable-line camelcase\r\n\r\n      var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1; // eslint-disable-line camelcase\r\n\r\n      var t0t1t1 = t0 * t1 * t1; //\r\n\r\n      var u1u1u1 = u1 * u1 * u1;\r\n      var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1; // eslint-disable-line camelcase\r\n\r\n      var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1; // eslint-disable-line camelcase\r\n\r\n      var t1t1t1 = t1 * t1 * t1;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        bezierSegmentPoints[i * 4] = math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n\r\n        bezierSegmentPoints[i * 4 + 1] = math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n\r\n        bezierSegmentPoints[i * 4 + 2] = math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n\r\n        bezierSegmentPoints[i * 4 + 3] = math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      }\r\n\r\n      return bezierSegmentPoints;\r\n    }\r\n\r\n    return {\r\n      getSegmentsLength: getSegmentsLength,\r\n      getNewSegment: getNewSegment,\r\n      getPointInSegment: getPointInSegment,\r\n      buildBezierData: buildBezierData,\r\n      pointOnLine2D: pointOnLine2D,\r\n      pointOnLine3D: pointOnLine3D\r\n    };\r\n  }\r\n\r\n  var bez = bezFunction();\r\n\r\n  var PropertyFactory = function () {\r\n    var initFrame = initialDefaultFrame;\r\n    var mathAbs = Math.abs;\r\n\r\n    function interpolateValue(frameNum, caching) {\r\n      var offsetTime = this.offsetTime;\r\n      var newValue;\r\n\r\n      if (this.propType === 'multidimensional') {\r\n        newValue = createTypedArray('float32', this.pv.length);\r\n      }\r\n\r\n      var iterationIndex = caching.lastIndex;\r\n      var i = iterationIndex;\r\n      var len = this.keyframes.length - 1;\r\n      var flag = true;\r\n      var keyData;\r\n      var nextKeyData;\r\n      var keyframeMetadata;\r\n\r\n      while (flag) {\r\n        keyData = this.keyframes[i];\r\n        nextKeyData = this.keyframes[i + 1];\r\n\r\n        if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\r\n          if (keyData.h) {\r\n            keyData = nextKeyData;\r\n          }\r\n\r\n          iterationIndex = 0;\r\n          break;\r\n        }\r\n\r\n        if (nextKeyData.t - offsetTime > frameNum) {\r\n          iterationIndex = i;\r\n          break;\r\n        }\r\n\r\n        if (i < len - 1) {\r\n          i += 1;\r\n        } else {\r\n          iterationIndex = 0;\r\n          flag = false;\r\n        }\r\n      }\r\n\r\n      keyframeMetadata = this.keyframesMetadata[i] || {};\r\n      var k;\r\n      var kLen;\r\n      var perc;\r\n      var jLen;\r\n      var j;\r\n      var fnc;\r\n      var nextKeyTime = nextKeyData.t - offsetTime;\r\n      var keyTime = keyData.t - offsetTime;\r\n      var endValue;\r\n\r\n      if (keyData.to) {\r\n        if (!keyframeMetadata.bezierData) {\r\n          keyframeMetadata.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\r\n        }\r\n\r\n        var bezierData = keyframeMetadata.bezierData;\r\n\r\n        if (frameNum >= nextKeyTime || frameNum < keyTime) {\r\n          var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\r\n          kLen = bezierData.points[ind].point.length;\r\n\r\n          for (k = 0; k < kLen; k += 1) {\r\n            newValue[k] = bezierData.points[ind].point[k];\r\n          } // caching._lastKeyframeIndex = -1;\r\n\r\n        } else {\r\n          if (keyframeMetadata.__fnct) {\r\n            fnc = keyframeMetadata.__fnct;\r\n          } else {\r\n            fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\r\n            keyframeMetadata.__fnct = fnc;\r\n          }\r\n\r\n          perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n          var distanceInLine = bezierData.segmentLength * perc;\r\n          var segmentPerc;\r\n          var addedLength = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastAddedLength : 0;\r\n          j = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastPoint : 0;\r\n          flag = true;\r\n          jLen = bezierData.points.length;\r\n\r\n          while (flag) {\r\n            addedLength += bezierData.points[j].partialLength;\r\n\r\n            if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\r\n              kLen = bezierData.points[j].point.length;\r\n\r\n              for (k = 0; k < kLen; k += 1) {\r\n                newValue[k] = bezierData.points[j].point[k];\r\n              }\r\n\r\n              break;\r\n            } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\r\n              segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\r\n              kLen = bezierData.points[j].point.length;\r\n\r\n              for (k = 0; k < kLen; k += 1) {\r\n                newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\r\n              }\r\n\r\n              break;\r\n            }\r\n\r\n            if (j < jLen - 1) {\r\n              j += 1;\r\n            } else {\r\n              flag = false;\r\n            }\r\n          }\r\n\r\n          caching._lastPoint = j;\r\n          caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n          caching._lastKeyframeIndex = i;\r\n        }\r\n      } else {\r\n        var outX;\r\n        var outY;\r\n        var inX;\r\n        var inY;\r\n        var keyValue;\r\n        len = keyData.s.length;\r\n        endValue = nextKeyData.s || keyData.e;\r\n\r\n        if (this.sh && keyData.h !== 1) {\r\n          if (frameNum >= nextKeyTime) {\r\n            newValue[0] = endValue[0];\r\n            newValue[1] = endValue[1];\r\n            newValue[2] = endValue[2];\r\n          } else if (frameNum <= keyTime) {\r\n            newValue[0] = keyData.s[0];\r\n            newValue[1] = keyData.s[1];\r\n            newValue[2] = keyData.s[2];\r\n          } else {\r\n            var quatStart = createQuaternion(keyData.s);\r\n            var quatEnd = createQuaternion(endValue);\r\n            var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\r\n            quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n          }\r\n        } else {\r\n          for (i = 0; i < len; i += 1) {\r\n            if (keyData.h !== 1) {\r\n              if (frameNum >= nextKeyTime) {\r\n                perc = 1;\r\n              } else if (frameNum < keyTime) {\r\n                perc = 0;\r\n              } else {\r\n                if (keyData.o.x.constructor === Array) {\r\n                  if (!keyframeMetadata.__fnct) {\r\n                    keyframeMetadata.__fnct = [];\r\n                  }\r\n\r\n                  if (!keyframeMetadata.__fnct[i]) {\r\n                    outX = keyData.o.x[i] === undefined ? keyData.o.x[0] : keyData.o.x[i];\r\n                    outY = keyData.o.y[i] === undefined ? keyData.o.y[0] : keyData.o.y[i];\r\n                    inX = keyData.i.x[i] === undefined ? keyData.i.x[0] : keyData.i.x[i];\r\n                    inY = keyData.i.y[i] === undefined ? keyData.i.y[0] : keyData.i.y[i];\r\n                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                    keyframeMetadata.__fnct[i] = fnc;\r\n                  } else {\r\n                    fnc = keyframeMetadata.__fnct[i];\r\n                  }\r\n                } else if (!keyframeMetadata.__fnct) {\r\n                  outX = keyData.o.x;\r\n                  outY = keyData.o.y;\r\n                  inX = keyData.i.x;\r\n                  inY = keyData.i.y;\r\n                  fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                  keyData.keyframeMetadata = fnc;\r\n                } else {\r\n                  fnc = keyframeMetadata.__fnct;\r\n                }\r\n\r\n                perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n              }\r\n            }\r\n\r\n            endValue = nextKeyData.s || keyData.e;\r\n            keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\r\n\r\n            if (this.propType === 'multidimensional') {\r\n              newValue[i] = keyValue;\r\n            } else {\r\n              newValue = keyValue;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      caching.lastIndex = iterationIndex;\r\n      return newValue;\r\n    } // based on @Toji's https://github.com/toji/gl-matrix/\r\n\r\n\r\n    function slerp(a, b, t) {\r\n      var out = [];\r\n      var ax = a[0];\r\n      var ay = a[1];\r\n      var az = a[2];\r\n      var aw = a[3];\r\n      var bx = b[0];\r\n      var by = b[1];\r\n      var bz = b[2];\r\n      var bw = b[3];\r\n      var omega;\r\n      var cosom;\r\n      var sinom;\r\n      var scale0;\r\n      var scale1;\r\n      cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n\r\n      if (cosom < 0.0) {\r\n        cosom = -cosom;\r\n        bx = -bx;\r\n        by = -by;\r\n        bz = -bz;\r\n        bw = -bw;\r\n      }\r\n\r\n      if (1.0 - cosom > 0.000001) {\r\n        omega = Math.acos(cosom);\r\n        sinom = Math.sin(omega);\r\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n        scale1 = Math.sin(t * omega) / sinom;\r\n      } else {\r\n        scale0 = 1.0 - t;\r\n        scale1 = t;\r\n      }\r\n\r\n      out[0] = scale0 * ax + scale1 * bx;\r\n      out[1] = scale0 * ay + scale1 * by;\r\n      out[2] = scale0 * az + scale1 * bz;\r\n      out[3] = scale0 * aw + scale1 * bw;\r\n      return out;\r\n    }\r\n\r\n    function quaternionToEuler(out, quat) {\r\n      var qx = quat[0];\r\n      var qy = quat[1];\r\n      var qz = quat[2];\r\n      var qw = quat[3];\r\n      var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\r\n      var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\r\n      var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\r\n      out[0] = heading / degToRads;\r\n      out[1] = attitude / degToRads;\r\n      out[2] = bank / degToRads;\r\n    }\r\n\r\n    function createQuaternion(values) {\r\n      var heading = values[0] * degToRads;\r\n      var attitude = values[1] * degToRads;\r\n      var bank = values[2] * degToRads;\r\n      var c1 = Math.cos(heading / 2);\r\n      var c2 = Math.cos(attitude / 2);\r\n      var c3 = Math.cos(bank / 2);\r\n      var s1 = Math.sin(heading / 2);\r\n      var s2 = Math.sin(attitude / 2);\r\n      var s3 = Math.sin(bank / 2);\r\n      var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n      var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n      var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n      var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n      return [x, y, z, w];\r\n    }\r\n\r\n    function getValueAtCurrentTime() {\r\n      var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n      var initTime = this.keyframes[0].t - this.offsetTime;\r\n      var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n\r\n      if (!(frameNum === this._caching.lastFrame || this._caching.lastFrame !== initFrame && (this._caching.lastFrame >= endTime && frameNum >= endTime || this._caching.lastFrame < initTime && frameNum < initTime))) {\r\n        if (this._caching.lastFrame >= frameNum) {\r\n          this._caching._lastKeyframeIndex = -1;\r\n          this._caching.lastIndex = 0;\r\n        }\r\n\r\n        var renderResult = this.interpolateValue(frameNum, this._caching);\r\n        this.pv = renderResult;\r\n      }\r\n\r\n      this._caching.lastFrame = frameNum;\r\n      return this.pv;\r\n    }\r\n\r\n    function setVValue(val) {\r\n      var multipliedValue;\r\n\r\n      if (this.propType === 'unidimensional') {\r\n        multipliedValue = val * this.mult;\r\n\r\n        if (mathAbs(this.v - multipliedValue) > 0.00001) {\r\n          this.v = multipliedValue;\r\n          this._mdf = true;\r\n        }\r\n      } else {\r\n        var i = 0;\r\n        var len = this.v.length;\r\n\r\n        while (i < len) {\r\n          multipliedValue = val[i] * this.mult;\r\n\r\n          if (mathAbs(this.v[i] - multipliedValue) > 0.00001) {\r\n            this.v[i] = multipliedValue;\r\n            this._mdf = true;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n      if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n        return;\r\n      }\r\n\r\n      if (this.lock) {\r\n        this.setVValue(this.pv);\r\n        return;\r\n      }\r\n\r\n      this.lock = true;\r\n      this._mdf = this._isFirstFrame;\r\n      var i;\r\n      var len = this.effectsSequence.length;\r\n      var finalValue = this.kf ? this.pv : this.data.k;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        finalValue = this.effectsSequence[i](finalValue);\r\n      }\r\n\r\n      this.setVValue(finalValue);\r\n      this._isFirstFrame = false;\r\n      this.lock = false;\r\n      this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n      this.effectsSequence.push(effectFunction);\r\n      this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    function ValueProperty(elem, data, mult, container) {\r\n      this.propType = 'unidimensional';\r\n      this.mult = mult || 1;\r\n      this.data = data;\r\n      this.v = mult ? data.k * mult : data.k;\r\n      this.pv = data.k;\r\n      this._mdf = false;\r\n      this.elem = elem;\r\n      this.container = container;\r\n      this.comp = elem.comp;\r\n      this.k = false;\r\n      this.kf = false;\r\n      this.vel = 0;\r\n      this.effectsSequence = [];\r\n      this._isFirstFrame = true;\r\n      this.getValue = processEffectsSequence;\r\n      this.setVValue = setVValue;\r\n      this.addEffect = addEffect;\r\n    }\r\n\r\n    function MultiDimensionalProperty(elem, data, mult, container) {\r\n      this.propType = 'multidimensional';\r\n      this.mult = mult || 1;\r\n      this.data = data;\r\n      this._mdf = false;\r\n      this.elem = elem;\r\n      this.container = container;\r\n      this.comp = elem.comp;\r\n      this.k = false;\r\n      this.kf = false;\r\n      this.frameId = -1;\r\n      var i;\r\n      var len = data.k.length;\r\n      this.v = createTypedArray('float32', len);\r\n      this.pv = createTypedArray('float32', len);\r\n      this.vel = createTypedArray('float32', len);\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.v[i] = data.k[i] * this.mult;\r\n        this.pv[i] = data.k[i];\r\n      }\r\n\r\n      this._isFirstFrame = true;\r\n      this.effectsSequence = [];\r\n      this.getValue = processEffectsSequence;\r\n      this.setVValue = setVValue;\r\n      this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedValueProperty(elem, data, mult, container) {\r\n      this.propType = 'unidimensional';\r\n      this.keyframes = data.k;\r\n      this.keyframesMetadata = [];\r\n      this.offsetTime = elem.data.st;\r\n      this.frameId = -1;\r\n      this._caching = {\r\n        lastFrame: initFrame,\r\n        lastIndex: 0,\r\n        value: 0,\r\n        _lastKeyframeIndex: -1\r\n      };\r\n      this.k = true;\r\n      this.kf = true;\r\n      this.data = data;\r\n      this.mult = mult || 1;\r\n      this.elem = elem;\r\n      this.container = container;\r\n      this.comp = elem.comp;\r\n      this.v = initFrame;\r\n      this.pv = initFrame;\r\n      this._isFirstFrame = true;\r\n      this.getValue = processEffectsSequence;\r\n      this.setVValue = setVValue;\r\n      this.interpolateValue = interpolateValue;\r\n      this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n      this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedMultidimensionalProperty(elem, data, mult, container) {\r\n      this.propType = 'multidimensional';\r\n      var i;\r\n      var len = data.k.length;\r\n      var s;\r\n      var e;\r\n      var to;\r\n      var ti;\r\n\r\n      for (i = 0; i < len - 1; i += 1) {\r\n        if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\r\n          s = data.k[i].s;\r\n          e = data.k[i + 1].s;\r\n          to = data.k[i].to;\r\n          ti = data.k[i].ti;\r\n\r\n          if (s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1]) || s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2])) {\r\n            data.k[i].to = null;\r\n            data.k[i].ti = null;\r\n          }\r\n\r\n          if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n            if (s.length === 2 || s[2] === e[2] && to[2] === 0 && ti[2] === 0) {\r\n              data.k[i].to = null;\r\n              data.k[i].ti = null;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n      this.data = data;\r\n      this.keyframes = data.k;\r\n      this.keyframesMetadata = [];\r\n      this.offsetTime = elem.data.st;\r\n      this.k = true;\r\n      this.kf = true;\r\n      this._isFirstFrame = true;\r\n      this.mult = mult || 1;\r\n      this.elem = elem;\r\n      this.container = container;\r\n      this.comp = elem.comp;\r\n      this.getValue = processEffectsSequence;\r\n      this.setVValue = setVValue;\r\n      this.interpolateValue = interpolateValue;\r\n      this.frameId = -1;\r\n      var arrLen = data.k[0].s.length;\r\n      this.v = createTypedArray('float32', arrLen);\r\n      this.pv = createTypedArray('float32', arrLen);\r\n\r\n      for (i = 0; i < arrLen; i += 1) {\r\n        this.v[i] = initFrame;\r\n        this.pv[i] = initFrame;\r\n      }\r\n\r\n      this._caching = {\r\n        lastFrame: initFrame,\r\n        lastIndex: 0,\r\n        value: createTypedArray('float32', arrLen)\r\n      };\r\n      this.addEffect = addEffect;\r\n    }\r\n\r\n    function getProp(elem, data, type, mult, container) {\r\n      var p;\r\n\r\n      if (!data.k.length) {\r\n        p = new ValueProperty(elem, data, mult, container);\r\n      } else if (typeof data.k[0] === 'number') {\r\n        p = new MultiDimensionalProperty(elem, data, mult, container);\r\n      } else {\r\n        switch (type) {\r\n          case 0:\r\n            p = new KeyframedValueProperty(elem, data, mult, container);\r\n            break;\r\n\r\n          case 1:\r\n            p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n\r\n      if (p.effectsSequence.length) {\r\n        container.addDynamicProperty(p);\r\n      }\r\n\r\n      return p;\r\n    }\r\n\r\n    var ob = {\r\n      getProp: getProp\r\n    };\r\n    return ob;\r\n  }();\r\n\r\n  function DynamicPropertyContainer() {}\r\n\r\n  DynamicPropertyContainer.prototype = {\r\n    addDynamicProperty: function addDynamicProperty(prop) {\r\n      if (this.dynamicProperties.indexOf(prop) === -1) {\r\n        this.dynamicProperties.push(prop);\r\n        this.container.addDynamicProperty(this);\r\n        this._isAnimated = true;\r\n      }\r\n    },\r\n    iterateDynamicProperties: function iterateDynamicProperties() {\r\n      this._mdf = false;\r\n      var i;\r\n      var len = this.dynamicProperties.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.dynamicProperties[i].getValue();\r\n\r\n        if (this.dynamicProperties[i]._mdf) {\r\n          this._mdf = true;\r\n        }\r\n      }\r\n    },\r\n    initDynamicPropertyContainer: function initDynamicPropertyContainer(container) {\r\n      this.container = container;\r\n      this.dynamicProperties = [];\r\n      this._mdf = false;\r\n      this._isAnimated = false;\r\n    }\r\n  };\r\n\r\n  var pointPool = function () {\r\n    function create() {\r\n      return createTypedArray('float32', 2);\r\n    }\r\n\r\n    return poolFactory(8, create);\r\n  }();\r\n\r\n  function ShapePath() {\r\n    this.c = false;\r\n    this._length = 0;\r\n    this._maxLength = 8;\r\n    this.v = createSizedArray(this._maxLength);\r\n    this.o = createSizedArray(this._maxLength);\r\n    this.i = createSizedArray(this._maxLength);\r\n  }\r\n\r\n  ShapePath.prototype.setPathData = function (closed, len) {\r\n    this.c = closed;\r\n    this.setLength(len);\r\n    var i = 0;\r\n\r\n    while (i < len) {\r\n      this.v[i] = pointPool.newElement();\r\n      this.o[i] = pointPool.newElement();\r\n      this.i[i] = pointPool.newElement();\r\n      i += 1;\r\n    }\r\n  };\r\n\r\n  ShapePath.prototype.setLength = function (len) {\r\n    while (this._maxLength < len) {\r\n      this.doubleArrayLength();\r\n    }\r\n\r\n    this._length = len;\r\n  };\r\n\r\n  ShapePath.prototype.doubleArrayLength = function () {\r\n    this.v = this.v.concat(createSizedArray(this._maxLength));\r\n    this.i = this.i.concat(createSizedArray(this._maxLength));\r\n    this.o = this.o.concat(createSizedArray(this._maxLength));\r\n    this._maxLength *= 2;\r\n  };\r\n\r\n  ShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\r\n    var arr;\r\n    this._length = Math.max(this._length, pos + 1);\r\n\r\n    if (this._length >= this._maxLength) {\r\n      this.doubleArrayLength();\r\n    }\r\n\r\n    switch (type) {\r\n      case 'v':\r\n        arr = this.v;\r\n        break;\r\n\r\n      case 'i':\r\n        arr = this.i;\r\n        break;\r\n\r\n      case 'o':\r\n        arr = this.o;\r\n        break;\r\n\r\n      default:\r\n        arr = [];\r\n        break;\r\n    }\r\n\r\n    if (!arr[pos] || arr[pos] && !replace) {\r\n      arr[pos] = pointPool.newElement();\r\n    }\r\n\r\n    arr[pos][0] = x;\r\n    arr[pos][1] = y;\r\n  };\r\n\r\n  ShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\r\n    this.setXYAt(vX, vY, 'v', pos, replace);\r\n    this.setXYAt(oX, oY, 'o', pos, replace);\r\n    this.setXYAt(iX, iY, 'i', pos, replace);\r\n  };\r\n\r\n  ShapePath.prototype.reverse = function () {\r\n    var newPath = new ShapePath();\r\n    newPath.setPathData(this.c, this._length);\r\n    var vertices = this.v;\r\n    var outPoints = this.o;\r\n    var inPoints = this.i;\r\n    var init = 0;\r\n\r\n    if (this.c) {\r\n      newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n      init = 1;\r\n    }\r\n\r\n    var cnt = this._length - 1;\r\n    var len = this._length;\r\n    var i;\r\n\r\n    for (i = init; i < len; i += 1) {\r\n      newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n      cnt -= 1;\r\n    }\r\n\r\n    return newPath;\r\n  };\r\n\r\n  ShapePath.prototype.length = function () {\r\n    return this._length;\r\n  };\r\n\r\n  var shapePool = function () {\r\n    function create() {\r\n      return new ShapePath();\r\n    }\r\n\r\n    function release(shapePath) {\r\n      var len = shapePath._length;\r\n      var i;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        pointPool.release(shapePath.v[i]);\r\n        pointPool.release(shapePath.i[i]);\r\n        pointPool.release(shapePath.o[i]);\r\n        shapePath.v[i] = null;\r\n        shapePath.i[i] = null;\r\n        shapePath.o[i] = null;\r\n      }\r\n\r\n      shapePath._length = 0;\r\n      shapePath.c = false;\r\n    }\r\n\r\n    function clone(shape) {\r\n      var cloned = factory.newElement();\r\n      var i;\r\n      var len = shape._length === undefined ? shape.v.length : shape._length;\r\n      cloned.setLength(len);\r\n      cloned.c = shape.c;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\r\n      }\r\n\r\n      return cloned;\r\n    }\r\n\r\n    var factory = poolFactory(4, create, release);\r\n    factory.clone = clone;\r\n    return factory;\r\n  }();\r\n\r\n  function ShapeCollection() {\r\n    this._length = 0;\r\n    this._maxLength = 4;\r\n    this.shapes = createSizedArray(this._maxLength);\r\n  }\r\n\r\n  ShapeCollection.prototype.addShape = function (shapeData) {\r\n    if (this._length === this._maxLength) {\r\n      this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n      this._maxLength *= 2;\r\n    }\r\n\r\n    this.shapes[this._length] = shapeData;\r\n    this._length += 1;\r\n  };\r\n\r\n  ShapeCollection.prototype.releaseShapes = function () {\r\n    var i;\r\n\r\n    for (i = 0; i < this._length; i += 1) {\r\n      shapePool.release(this.shapes[i]);\r\n    }\r\n\r\n    this._length = 0;\r\n  };\r\n\r\n  var shapeCollectionPool = function () {\r\n    var ob = {\r\n      newShapeCollection: newShapeCollection,\r\n      release: release\r\n    };\r\n    var _length = 0;\r\n    var _maxLength = 4;\r\n    var pool = createSizedArray(_maxLength);\r\n\r\n    function newShapeCollection() {\r\n      var shapeCollection;\r\n\r\n      if (_length) {\r\n        _length -= 1;\r\n        shapeCollection = pool[_length];\r\n      } else {\r\n        shapeCollection = new ShapeCollection();\r\n      }\r\n\r\n      return shapeCollection;\r\n    }\r\n\r\n    function release(shapeCollection) {\r\n      var i;\r\n      var len = shapeCollection._length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapePool.release(shapeCollection.shapes[i]);\r\n      }\r\n\r\n      shapeCollection._length = 0;\r\n\r\n      if (_length === _maxLength) {\r\n        pool = pooling[\"double\"](pool);\r\n        _maxLength *= 2;\r\n      }\r\n\r\n      pool[_length] = shapeCollection;\r\n      _length += 1;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var ShapePropertyFactory = function () {\r\n    var initFrame = -999999;\r\n\r\n    function interpolateShape(frameNum, previousValue, caching) {\r\n      var iterationIndex = caching.lastIndex;\r\n      var keyPropS;\r\n      var keyPropE;\r\n      var isHold;\r\n      var j;\r\n      var k;\r\n      var jLen;\r\n      var kLen;\r\n      var perc;\r\n      var vertexValue;\r\n      var kf = this.keyframes;\r\n\r\n      if (frameNum < kf[0].t - this.offsetTime) {\r\n        keyPropS = kf[0].s[0];\r\n        isHold = true;\r\n        iterationIndex = 0;\r\n      } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\r\n        keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\r\n        /* if(kf[kf.length - 1].s){\r\n                  keyPropS = kf[kf.length - 1].s[0];\r\n              }else{\r\n                  keyPropS = kf[kf.length - 2].e[0];\r\n              } */\r\n\r\n        isHold = true;\r\n      } else {\r\n        var i = iterationIndex;\r\n        var len = kf.length - 1;\r\n        var flag = true;\r\n        var keyData;\r\n        var nextKeyData;\r\n        var keyframeMetadata;\r\n\r\n        while (flag) {\r\n          keyData = kf[i];\r\n          nextKeyData = kf[i + 1];\r\n\r\n          if (nextKeyData.t - this.offsetTime > frameNum) {\r\n            break;\r\n          }\r\n\r\n          if (i < len - 1) {\r\n            i += 1;\r\n          } else {\r\n            flag = false;\r\n          }\r\n        }\r\n\r\n        keyframeMetadata = this.keyframesMetadata[i] || {};\r\n        isHold = keyData.h === 1;\r\n        iterationIndex = i;\r\n\r\n        if (!isHold) {\r\n          if (frameNum >= nextKeyData.t - this.offsetTime) {\r\n            perc = 1;\r\n          } else if (frameNum < keyData.t - this.offsetTime) {\r\n            perc = 0;\r\n          } else {\r\n            var fnc;\r\n\r\n            if (keyframeMetadata.__fnct) {\r\n              fnc = keyframeMetadata.__fnct;\r\n            } else {\r\n              fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\r\n              keyframeMetadata.__fnct = fnc;\r\n            }\r\n\r\n            perc = fnc((frameNum - (keyData.t - this.offsetTime)) / (nextKeyData.t - this.offsetTime - (keyData.t - this.offsetTime)));\r\n          }\r\n\r\n          keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\r\n        }\r\n\r\n        keyPropS = keyData.s[0];\r\n      }\r\n\r\n      jLen = previousValue._length;\r\n      kLen = keyPropS.i[0].length;\r\n      caching.lastIndex = iterationIndex;\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        for (k = 0; k < kLen; k += 1) {\r\n          vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\r\n          previousValue.i[j][k] = vertexValue;\r\n          vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\r\n          previousValue.o[j][k] = vertexValue;\r\n          vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\r\n          previousValue.v[j][k] = vertexValue;\r\n        }\r\n      }\r\n    }\r\n\r\n    function interpolateShapeCurrentTime() {\r\n      var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n      var initTime = this.keyframes[0].t - this.offsetTime;\r\n      var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n      var lastFrame = this._caching.lastFrame;\r\n\r\n      if (!(lastFrame !== initFrame && (lastFrame < initTime && frameNum < initTime || lastFrame > endTime && frameNum > endTime))) {\r\n        /// /\r\n        this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n        this.interpolateShape(frameNum, this.pv, this._caching); /// /\r\n      }\r\n\r\n      this._caching.lastFrame = frameNum;\r\n      return this.pv;\r\n    }\r\n\r\n    function resetShape() {\r\n      this.paths = this.localShapeCollection;\r\n    }\r\n\r\n    function shapesEqual(shape1, shape2) {\r\n      if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\r\n        return false;\r\n      }\r\n\r\n      var i;\r\n      var len = shape1._length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (shape1.v[i][0] !== shape2.v[i][0] || shape1.v[i][1] !== shape2.v[i][1] || shape1.o[i][0] !== shape2.o[i][0] || shape1.o[i][1] !== shape2.o[i][1] || shape1.i[i][0] !== shape2.i[i][0] || shape1.i[i][1] !== shape2.i[i][1]) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    function setVValue(newPath) {\r\n      if (!shapesEqual(this.v, newPath)) {\r\n        this.v = shapePool.clone(newPath);\r\n        this.localShapeCollection.releaseShapes();\r\n        this.localShapeCollection.addShape(this.v);\r\n        this._mdf = true;\r\n        this.paths = this.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n      if (this.elem.globalData.frameId === this.frameId) {\r\n        return;\r\n      }\r\n\r\n      if (!this.effectsSequence.length) {\r\n        this._mdf = false;\r\n        return;\r\n      }\r\n\r\n      if (this.lock) {\r\n        this.setVValue(this.pv);\r\n        return;\r\n      }\r\n\r\n      this.lock = true;\r\n      this._mdf = false;\r\n      var finalValue;\r\n\r\n      if (this.kf) {\r\n        finalValue = this.pv;\r\n      } else if (this.data.ks) {\r\n        finalValue = this.data.ks.k;\r\n      } else {\r\n        finalValue = this.data.pt.k;\r\n      }\r\n\r\n      var i;\r\n      var len = this.effectsSequence.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        finalValue = this.effectsSequence[i](finalValue);\r\n      }\r\n\r\n      this.setVValue(finalValue);\r\n      this.lock = false;\r\n      this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function ShapeProperty(elem, data, type) {\r\n      this.propType = 'shape';\r\n      this.comp = elem.comp;\r\n      this.container = elem;\r\n      this.elem = elem;\r\n      this.data = data;\r\n      this.k = false;\r\n      this.kf = false;\r\n      this._mdf = false;\r\n      var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n      this.v = shapePool.clone(pathData);\r\n      this.pv = shapePool.clone(this.v);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.paths = this.localShapeCollection;\r\n      this.paths.addShape(this.v);\r\n      this.reset = resetShape;\r\n      this.effectsSequence = [];\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n      this.effectsSequence.push(effectFunction);\r\n      this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    ShapeProperty.prototype.getValue = processEffectsSequence;\r\n    ShapeProperty.prototype.setVValue = setVValue;\r\n    ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    function KeyframedShapeProperty(elem, data, type) {\r\n      this.propType = 'shape';\r\n      this.comp = elem.comp;\r\n      this.elem = elem;\r\n      this.container = elem;\r\n      this.offsetTime = elem.data.st;\r\n      this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n      this.keyframesMetadata = [];\r\n      this.k = true;\r\n      this.kf = true;\r\n      var len = this.keyframes[0].s[0].i.length;\r\n      this.v = shapePool.newElement();\r\n      this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n      this.pv = shapePool.clone(this.v);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.paths = this.localShapeCollection;\r\n      this.paths.addShape(this.v);\r\n      this.lastFrame = initFrame;\r\n      this.reset = resetShape;\r\n      this._caching = {\r\n        lastFrame: initFrame,\r\n        lastIndex: 0\r\n      };\r\n      this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n    }\r\n\r\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    KeyframedShapeProperty.prototype.setVValue = setVValue;\r\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    var EllShapeProperty = function () {\r\n      var cPoint = roundCorner;\r\n\r\n      function EllShapePropertyFactory(elem, data) {\r\n        this.v = shapePool.newElement();\r\n        this.v.setPathData(true, 4);\r\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.localShapeCollection.addShape(this.v);\r\n        this.d = data.d;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.frameId = -1;\r\n        this.initDynamicPropertyContainer(elem);\r\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n\r\n        if (this.dynamicProperties.length) {\r\n          this.k = true;\r\n        } else {\r\n          this.k = false;\r\n          this.convertEllToPath();\r\n        }\r\n      }\r\n\r\n      EllShapePropertyFactory.prototype = {\r\n        reset: resetShape,\r\n        getValue: function getValue() {\r\n          if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n          }\r\n\r\n          this.frameId = this.elem.globalData.frameId;\r\n          this.iterateDynamicProperties();\r\n\r\n          if (this._mdf) {\r\n            this.convertEllToPath();\r\n          }\r\n        },\r\n        convertEllToPath: function convertEllToPath() {\r\n          var p0 = this.p.v[0];\r\n          var p1 = this.p.v[1];\r\n          var s0 = this.s.v[0] / 2;\r\n          var s1 = this.s.v[1] / 2;\r\n\r\n          var _cw = this.d !== 3;\r\n\r\n          var _v = this.v;\r\n          _v.v[0][0] = p0;\r\n          _v.v[0][1] = p1 - s1;\r\n          _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n          _v.v[1][1] = p1;\r\n          _v.v[2][0] = p0;\r\n          _v.v[2][1] = p1 + s1;\r\n          _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n          _v.v[3][1] = p1;\r\n          _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n          _v.i[0][1] = p1 - s1;\r\n          _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n          _v.i[1][1] = p1 - s1 * cPoint;\r\n          _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n          _v.i[2][1] = p1 + s1;\r\n          _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n          _v.i[3][1] = p1 + s1 * cPoint;\r\n          _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n          _v.o[0][1] = p1 - s1;\r\n          _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n          _v.o[1][1] = p1 + s1 * cPoint;\r\n          _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n          _v.o[2][1] = p1 + s1;\r\n          _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n          _v.o[3][1] = p1 - s1 * cPoint;\r\n        }\r\n      };\r\n      extendPrototype([DynamicPropertyContainer], EllShapePropertyFactory);\r\n      return EllShapePropertyFactory;\r\n    }();\r\n\r\n    var StarShapeProperty = function () {\r\n      function StarShapePropertyFactory(elem, data) {\r\n        this.v = shapePool.newElement();\r\n        this.v.setPathData(true, 0);\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.data = data;\r\n        this.frameId = -1;\r\n        this.d = data.d;\r\n        this.initDynamicPropertyContainer(elem);\r\n\r\n        if (data.sy === 1) {\r\n          this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\r\n          this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\r\n          this.convertToPath = this.convertStarToPath;\r\n        } else {\r\n          this.convertToPath = this.convertPolygonToPath;\r\n        }\r\n\r\n        this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\r\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n        this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\r\n        this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\r\n        this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\r\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n        this.localShapeCollection.addShape(this.v);\r\n        this.paths = this.localShapeCollection;\r\n\r\n        if (this.dynamicProperties.length) {\r\n          this.k = true;\r\n        } else {\r\n          this.k = false;\r\n          this.convertToPath();\r\n        }\r\n      }\r\n\r\n      StarShapePropertyFactory.prototype = {\r\n        reset: resetShape,\r\n        getValue: function getValue() {\r\n          if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n          }\r\n\r\n          this.frameId = this.elem.globalData.frameId;\r\n          this.iterateDynamicProperties();\r\n\r\n          if (this._mdf) {\r\n            this.convertToPath();\r\n          }\r\n        },\r\n        convertStarToPath: function convertStarToPath() {\r\n          var numPts = Math.floor(this.pt.v) * 2;\r\n          var angle = Math.PI * 2 / numPts;\r\n          /* this.v.v.length = numPts;\r\n                  this.v.i.length = numPts;\r\n                  this.v.o.length = numPts; */\r\n\r\n          var longFlag = true;\r\n          var longRad = this.or.v;\r\n          var shortRad = this.ir.v;\r\n          var longRound = this.os.v;\r\n          var shortRound = this.is.v;\r\n          var longPerimSegment = 2 * Math.PI * longRad / (numPts * 2);\r\n          var shortPerimSegment = 2 * Math.PI * shortRad / (numPts * 2);\r\n          var i;\r\n          var rad;\r\n          var roundness;\r\n          var perimSegment;\r\n          var currentAng = -Math.PI / 2;\r\n          currentAng += this.r.v;\r\n          var dir = this.data.d === 3 ? -1 : 1;\r\n          this.v._length = 0;\r\n\r\n          for (i = 0; i < numPts; i += 1) {\r\n            rad = longFlag ? longRad : shortRad;\r\n            roundness = longFlag ? longRound : shortRound;\r\n            perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n            var x = rad * Math.cos(currentAng);\r\n            var y = rad * Math.sin(currentAng);\r\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n            x += +this.p.v[0];\r\n            y += +this.p.v[1];\r\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n            /* this.v.v[i] = [x,y];\r\n                      this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                      this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                      this.v._length = numPts; */\r\n\r\n            longFlag = !longFlag;\r\n            currentAng += angle * dir;\r\n          }\r\n        },\r\n        convertPolygonToPath: function convertPolygonToPath() {\r\n          var numPts = Math.floor(this.pt.v);\r\n          var angle = Math.PI * 2 / numPts;\r\n          var rad = this.or.v;\r\n          var roundness = this.os.v;\r\n          var perimSegment = 2 * Math.PI * rad / (numPts * 4);\r\n          var i;\r\n          var currentAng = -Math.PI * 0.5;\r\n          var dir = this.data.d === 3 ? -1 : 1;\r\n          currentAng += this.r.v;\r\n          this.v._length = 0;\r\n\r\n          for (i = 0; i < numPts; i += 1) {\r\n            var x = rad * Math.cos(currentAng);\r\n            var y = rad * Math.sin(currentAng);\r\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n            x += +this.p.v[0];\r\n            y += +this.p.v[1];\r\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n            currentAng += angle * dir;\r\n          }\r\n\r\n          this.paths.length = 0;\r\n          this.paths[0] = this.v;\r\n        }\r\n      };\r\n      extendPrototype([DynamicPropertyContainer], StarShapePropertyFactory);\r\n      return StarShapePropertyFactory;\r\n    }();\r\n\r\n    var RectShapeProperty = function () {\r\n      function RectShapePropertyFactory(elem, data) {\r\n        this.v = shapePool.newElement();\r\n        this.v.c = true;\r\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n        this.localShapeCollection.addShape(this.v);\r\n        this.paths = this.localShapeCollection;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.frameId = -1;\r\n        this.d = data.d;\r\n        this.initDynamicPropertyContainer(elem);\r\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n        this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\r\n\r\n        if (this.dynamicProperties.length) {\r\n          this.k = true;\r\n        } else {\r\n          this.k = false;\r\n          this.convertRectToPath();\r\n        }\r\n      }\r\n\r\n      RectShapePropertyFactory.prototype = {\r\n        convertRectToPath: function convertRectToPath() {\r\n          var p0 = this.p.v[0];\r\n          var p1 = this.p.v[1];\r\n          var v0 = this.s.v[0] / 2;\r\n          var v1 = this.s.v[1] / 2;\r\n          var round = bmMin(v0, v1, this.r.v);\r\n          var cPoint = round * (1 - roundCorner);\r\n          this.v._length = 0;\r\n\r\n          if (this.d === 2 || this.d === 1) {\r\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\r\n            this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\r\n\r\n            if (round !== 0) {\r\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\r\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\r\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\r\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\r\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\r\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\r\n            } else {\r\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\r\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\r\n            }\r\n          } else {\r\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\r\n\r\n            if (round !== 0) {\r\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\r\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\r\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\r\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\r\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\r\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\r\n              this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\r\n            } else {\r\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\r\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\r\n              this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\r\n            }\r\n          }\r\n        },\r\n        getValue: function getValue() {\r\n          if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n          }\r\n\r\n          this.frameId = this.elem.globalData.frameId;\r\n          this.iterateDynamicProperties();\r\n\r\n          if (this._mdf) {\r\n            this.convertRectToPath();\r\n          }\r\n        },\r\n        reset: resetShape\r\n      };\r\n      extendPrototype([DynamicPropertyContainer], RectShapePropertyFactory);\r\n      return RectShapePropertyFactory;\r\n    }();\r\n\r\n    function getShapeProp(elem, data, type) {\r\n      var prop;\r\n\r\n      if (type === 3 || type === 4) {\r\n        var dataProp = type === 3 ? data.pt : data.ks;\r\n        var keys = dataProp.k;\r\n\r\n        if (keys.length) {\r\n          prop = new KeyframedShapeProperty(elem, data, type);\r\n        } else {\r\n          prop = new ShapeProperty(elem, data, type);\r\n        }\r\n      } else if (type === 5) {\r\n        prop = new RectShapeProperty(elem, data);\r\n      } else if (type === 6) {\r\n        prop = new EllShapeProperty(elem, data);\r\n      } else if (type === 7) {\r\n        prop = new StarShapeProperty(elem, data);\r\n      }\r\n\r\n      if (prop.k) {\r\n        elem.addDynamicProperty(prop);\r\n      }\r\n\r\n      return prop;\r\n    }\r\n\r\n    function getConstructorFunction() {\r\n      return ShapeProperty;\r\n    }\r\n\r\n    function getKeyframedConstructorFunction() {\r\n      return KeyframedShapeProperty;\r\n    }\r\n\r\n    var ob = {};\r\n    ob.getShapeProp = getShapeProp;\r\n    ob.getConstructorFunction = getConstructorFunction;\r\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n    return ob;\r\n  }();\r\n\r\n  /*!\r\n   Transformation Matrix v2.0\r\n   (c) Epistemex 2014-2015\r\n   www.epistemex.com\r\n   By Ken Fyrstenberg\r\n   Contributions by leeoniya.\r\n   License: MIT, header required.\r\n   */\r\n\r\n  /**\r\n   * 2D transformation matrix object initialized with identity matrix.\r\n   *\r\n   * The matrix can synchronize a canvas context by supplying the context\r\n   * as an argument, or later apply current absolute transform to an\r\n   * existing context.\r\n   *\r\n   * All values are handled as floating point values.\r\n   *\r\n   * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n   * @prop {number} a - scale x\r\n   * @prop {number} b - shear y\r\n   * @prop {number} c - shear x\r\n   * @prop {number} d - scale y\r\n   * @prop {number} e - translate x\r\n   * @prop {number} f - translate y\r\n   * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n   * @constructor\r\n   */\r\n\r\n  var Matrix = function () {\r\n    var _cos = Math.cos;\r\n    var _sin = Math.sin;\r\n    var _tan = Math.tan;\r\n    var _rnd = Math.round;\r\n\r\n    function reset() {\r\n      this.props[0] = 1;\r\n      this.props[1] = 0;\r\n      this.props[2] = 0;\r\n      this.props[3] = 0;\r\n      this.props[4] = 0;\r\n      this.props[5] = 1;\r\n      this.props[6] = 0;\r\n      this.props[7] = 0;\r\n      this.props[8] = 0;\r\n      this.props[9] = 0;\r\n      this.props[10] = 1;\r\n      this.props[11] = 0;\r\n      this.props[12] = 0;\r\n      this.props[13] = 0;\r\n      this.props[14] = 0;\r\n      this.props[15] = 1;\r\n      return this;\r\n    }\r\n\r\n    function rotate(angle) {\r\n      if (angle === 0) {\r\n        return this;\r\n      }\r\n\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateX(angle) {\r\n      if (angle === 0) {\r\n        return this;\r\n      }\r\n\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateY(angle) {\r\n      if (angle === 0) {\r\n        return this;\r\n      }\r\n\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateZ(angle) {\r\n      if (angle === 0) {\r\n        return this;\r\n      }\r\n\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function shear(sx, sy) {\r\n      return this._t(1, sy, sx, 1, 0, 0);\r\n    }\r\n\r\n    function skew(ax, ay) {\r\n      return this.shear(_tan(ax), _tan(ay));\r\n    }\r\n\r\n    function skewFromAxis(ax, angle) {\r\n      var mCos = _cos(angle);\r\n\r\n      var mSin = _sin(angle);\r\n\r\n      return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); // return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n    }\r\n\r\n    function scale(sx, sy, sz) {\r\n      if (!sz && sz !== 0) {\r\n        sz = 1;\r\n      }\r\n\r\n      if (sx === 1 && sy === 1 && sz === 1) {\r\n        return this;\r\n      }\r\n\r\n      return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n      this.props[0] = a;\r\n      this.props[1] = b;\r\n      this.props[2] = c;\r\n      this.props[3] = d;\r\n      this.props[4] = e;\r\n      this.props[5] = f;\r\n      this.props[6] = g;\r\n      this.props[7] = h;\r\n      this.props[8] = i;\r\n      this.props[9] = j;\r\n      this.props[10] = k;\r\n      this.props[11] = l;\r\n      this.props[12] = m;\r\n      this.props[13] = n;\r\n      this.props[14] = o;\r\n      this.props[15] = p;\r\n      return this;\r\n    }\r\n\r\n    function translate(tx, ty, tz) {\r\n      tz = tz || 0;\r\n\r\n      if (tx !== 0 || ty !== 0 || tz !== 0) {\r\n        return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\r\n      }\r\n\r\n      return this;\r\n    }\r\n\r\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n      var _p = this.props;\r\n\r\n      if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\r\n        // NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n        // if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n        _p[12] = _p[12] * a2 + _p[15] * m2;\r\n        _p[13] = _p[13] * f2 + _p[15] * n2;\r\n        _p[14] = _p[14] * k2 + _p[15] * o2;\r\n        _p[15] *= p2; // }\r\n\r\n        this._identityCalculated = false;\r\n        return this;\r\n      }\r\n\r\n      var a1 = _p[0];\r\n      var b1 = _p[1];\r\n      var c1 = _p[2];\r\n      var d1 = _p[3];\r\n      var e1 = _p[4];\r\n      var f1 = _p[5];\r\n      var g1 = _p[6];\r\n      var h1 = _p[7];\r\n      var i1 = _p[8];\r\n      var j1 = _p[9];\r\n      var k1 = _p[10];\r\n      var l1 = _p[11];\r\n      var m1 = _p[12];\r\n      var n1 = _p[13];\r\n      var o1 = _p[14];\r\n      var p1 = _p[15];\r\n      /* matrix order (canvas compatible):\r\n           * ace\r\n           * bdf\r\n           * 001\r\n           */\r\n\r\n      _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n      _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\r\n      _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\r\n      _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\r\n      _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\r\n      _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\r\n      _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\r\n      _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\r\n      _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\r\n      _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\r\n      _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\r\n      _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\r\n      _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\r\n      _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\r\n      _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\r\n      _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\r\n      this._identityCalculated = false;\r\n      return this;\r\n    }\r\n\r\n    function isIdentity() {\r\n      if (!this._identityCalculated) {\r\n        this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n        this._identityCalculated = true;\r\n      }\r\n\r\n      return this._identity;\r\n    }\r\n\r\n    function equals(matr) {\r\n      var i = 0;\r\n\r\n      while (i < 16) {\r\n        if (matr.props[i] !== this.props[i]) {\r\n          return false;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    function clone(matr) {\r\n      var i;\r\n\r\n      for (i = 0; i < 16; i += 1) {\r\n        matr.props[i] = this.props[i];\r\n      }\r\n\r\n      return matr;\r\n    }\r\n\r\n    function cloneFromProps(props) {\r\n      var i;\r\n\r\n      for (i = 0; i < 16; i += 1) {\r\n        this.props[i] = props[i];\r\n      }\r\n    }\r\n\r\n    function applyToPoint(x, y, z) {\r\n      return {\r\n        x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n        y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n        z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\r\n      };\r\n      /* return {\r\n           x: x * me.a + y * me.c + me.e,\r\n           y: x * me.b + y * me.d + me.f\r\n           }; */\r\n    }\r\n\r\n    function applyToX(x, y, z) {\r\n      return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n    }\r\n\r\n    function applyToY(x, y, z) {\r\n      return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n    }\r\n\r\n    function applyToZ(x, y, z) {\r\n      return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n    }\r\n\r\n    function getInverseMatrix() {\r\n      var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n      var a = this.props[5] / determinant;\r\n      var b = -this.props[1] / determinant;\r\n      var c = -this.props[4] / determinant;\r\n      var d = this.props[0] / determinant;\r\n      var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\r\n      var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\r\n      var inverseMatrix = new Matrix();\r\n      inverseMatrix.props[0] = a;\r\n      inverseMatrix.props[1] = b;\r\n      inverseMatrix.props[4] = c;\r\n      inverseMatrix.props[5] = d;\r\n      inverseMatrix.props[12] = e;\r\n      inverseMatrix.props[13] = f;\r\n      return inverseMatrix;\r\n    }\r\n\r\n    function inversePoint(pt) {\r\n      var inverseMatrix = this.getInverseMatrix();\r\n      return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0);\r\n    }\r\n\r\n    function inversePoints(pts) {\r\n      var i;\r\n      var len = pts.length;\r\n      var retPts = [];\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        retPts[i] = inversePoint(pts[i]);\r\n      }\r\n\r\n      return retPts;\r\n    }\r\n\r\n    function applyToTriplePoints(pt1, pt2, pt3) {\r\n      var arr = createTypedArray('float32', 6);\r\n\r\n      if (this.isIdentity()) {\r\n        arr[0] = pt1[0];\r\n        arr[1] = pt1[1];\r\n        arr[2] = pt2[0];\r\n        arr[3] = pt2[1];\r\n        arr[4] = pt3[0];\r\n        arr[5] = pt3[1];\r\n      } else {\r\n        var p0 = this.props[0];\r\n        var p1 = this.props[1];\r\n        var p4 = this.props[4];\r\n        var p5 = this.props[5];\r\n        var p12 = this.props[12];\r\n        var p13 = this.props[13];\r\n        arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n        arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n        arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n        arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n        arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n        arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function applyToPointArray(x, y, z) {\r\n      var arr;\r\n\r\n      if (this.isIdentity()) {\r\n        arr = [x, y, z];\r\n      } else {\r\n        arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12], x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13], x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function applyToPointStringified(x, y) {\r\n      if (this.isIdentity()) {\r\n        return x + ',' + y;\r\n      }\r\n\r\n      var _p = this.props;\r\n      return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\r\n    }\r\n\r\n    function toCSS() {\r\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n\r\n      /* if(this.isIdentity()) {\r\n              return '';\r\n          } */\r\n      var i = 0;\r\n      var props = this.props;\r\n      var cssValue = 'matrix3d(';\r\n      var v = 10000;\r\n\r\n      while (i < 16) {\r\n        cssValue += _rnd(props[i] * v) / v;\r\n        cssValue += i === 15 ? ')' : ',';\r\n        i += 1;\r\n      }\r\n\r\n      return cssValue;\r\n    }\r\n\r\n    function roundMatrixProperty(val) {\r\n      var v = 10000;\r\n\r\n      if (val < 0.000001 && val > 0 || val > -0.000001 && val < 0) {\r\n        return _rnd(val * v) / v;\r\n      }\r\n\r\n      return val;\r\n    }\r\n\r\n    function to2dCSS() {\r\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n\r\n      /* if(this.isIdentity()) {\r\n              return '';\r\n          } */\r\n      var props = this.props;\r\n\r\n      var _a = roundMatrixProperty(props[0]);\r\n\r\n      var _b = roundMatrixProperty(props[1]);\r\n\r\n      var _c = roundMatrixProperty(props[4]);\r\n\r\n      var _d = roundMatrixProperty(props[5]);\r\n\r\n      var _e = roundMatrixProperty(props[12]);\r\n\r\n      var _f = roundMatrixProperty(props[13]);\r\n\r\n      return 'matrix(' + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + ')';\r\n    }\r\n\r\n    return function () {\r\n      this.reset = reset;\r\n      this.rotate = rotate;\r\n      this.rotateX = rotateX;\r\n      this.rotateY = rotateY;\r\n      this.rotateZ = rotateZ;\r\n      this.skew = skew;\r\n      this.skewFromAxis = skewFromAxis;\r\n      this.shear = shear;\r\n      this.scale = scale;\r\n      this.setTransform = setTransform;\r\n      this.translate = translate;\r\n      this.transform = transform;\r\n      this.applyToPoint = applyToPoint;\r\n      this.applyToX = applyToX;\r\n      this.applyToY = applyToY;\r\n      this.applyToZ = applyToZ;\r\n      this.applyToPointArray = applyToPointArray;\r\n      this.applyToTriplePoints = applyToTriplePoints;\r\n      this.applyToPointStringified = applyToPointStringified;\r\n      this.toCSS = toCSS;\r\n      this.to2dCSS = to2dCSS;\r\n      this.clone = clone;\r\n      this.cloneFromProps = cloneFromProps;\r\n      this.equals = equals;\r\n      this.inversePoints = inversePoints;\r\n      this.inversePoint = inversePoint;\r\n      this.getInverseMatrix = getInverseMatrix;\r\n      this._t = this.transform;\r\n      this.isIdentity = isIdentity;\r\n      this._identity = true;\r\n      this._identityCalculated = false;\r\n      this.props = createTypedArray('float32', 16);\r\n      this.reset();\r\n    };\r\n  }();\r\n\r\n  function _typeof$3(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$3 = function _typeof(obj) { return typeof obj; }; } else { _typeof$3 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$3(obj); }\r\n  var lottie = {};\r\n  var standalone = '__[STANDALONE]__';\r\n  var animationData = '__[ANIMATIONDATA]__';\r\n  var renderer = '';\r\n\r\n  function setLocation(href) {\r\n    setLocationHref(href);\r\n  }\r\n\r\n  function searchAnimations() {\r\n    if (standalone === true) {\r\n      animationManager.searchAnimations(animationData, standalone, renderer);\r\n    } else {\r\n      animationManager.searchAnimations();\r\n    }\r\n  }\r\n\r\n  function setSubframeRendering(flag) {\r\n    setSubframeEnabled(flag);\r\n  }\r\n\r\n  function setPrefix(prefix) {\r\n    setIdPrefix(prefix);\r\n  }\r\n\r\n  function loadAnimation(params) {\r\n    if (standalone === true) {\r\n      params.animationData = JSON.parse(animationData);\r\n    }\r\n\r\n    return animationManager.loadAnimation(params);\r\n  }\r\n\r\n  function setQuality(value) {\r\n    if (typeof value === 'string') {\r\n      switch (value) {\r\n        case 'high':\r\n          setDefaultCurveSegments(200);\r\n          break;\r\n\r\n        default:\r\n        case 'medium':\r\n          setDefaultCurveSegments(50);\r\n          break;\r\n\r\n        case 'low':\r\n          setDefaultCurveSegments(10);\r\n          break;\r\n      }\r\n    } else if (!isNaN(value) && value > 1) {\r\n      setDefaultCurveSegments(value);\r\n    }\r\n\r\n    if (getDefaultCurveSegments() >= 50) {\r\n      roundValues(false);\r\n    } else {\r\n      roundValues(true);\r\n    }\r\n  }\r\n\r\n  function inBrowser() {\r\n    return typeof navigator !== 'undefined';\r\n  }\r\n\r\n  function installPlugin(type, plugin) {\r\n    if (type === 'expressions') {\r\n      setExpressionsPlugin(plugin);\r\n    }\r\n  }\r\n\r\n  function getFactory(name) {\r\n    switch (name) {\r\n      case 'propertyFactory':\r\n        return PropertyFactory;\r\n\r\n      case 'shapePropertyFactory':\r\n        return ShapePropertyFactory;\r\n\r\n      case 'matrix':\r\n        return Matrix;\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  lottie.play = animationManager.play;\r\n  lottie.pause = animationManager.pause;\r\n  lottie.setLocationHref = setLocation;\r\n  lottie.togglePause = animationManager.togglePause;\r\n  lottie.setSpeed = animationManager.setSpeed;\r\n  lottie.setDirection = animationManager.setDirection;\r\n  lottie.stop = animationManager.stop;\r\n  lottie.searchAnimations = searchAnimations;\r\n  lottie.registerAnimation = animationManager.registerAnimation;\r\n  lottie.loadAnimation = loadAnimation;\r\n  lottie.setSubframeRendering = setSubframeRendering;\r\n  lottie.resize = animationManager.resize; // lottie.start = start;\r\n\r\n  lottie.goToAndStop = animationManager.goToAndStop;\r\n  lottie.destroy = animationManager.destroy;\r\n  lottie.setQuality = setQuality;\r\n  lottie.inBrowser = inBrowser;\r\n  lottie.installPlugin = installPlugin;\r\n  lottie.freeze = animationManager.freeze;\r\n  lottie.unfreeze = animationManager.unfreeze;\r\n  lottie.setVolume = animationManager.setVolume;\r\n  lottie.mute = animationManager.mute;\r\n  lottie.unmute = animationManager.unmute;\r\n  lottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\r\n  lottie.useWebWorker = setWebWorker;\r\n  lottie.setIDPrefix = setPrefix;\r\n  lottie.__getFactory = getFactory;\r\n  lottie.version = '5.10.2';\r\n\r\n  function checkReady() {\r\n    if (document.readyState === 'complete') {\r\n      clearInterval(readyStateCheckInterval);\r\n      searchAnimations();\r\n    }\r\n  }\r\n\r\n  function getQueryVariable(variable) {\r\n    var vars = queryString.split('&');\r\n\r\n    for (var i = 0; i < vars.length; i += 1) {\r\n      var pair = vars[i].split('=');\r\n\r\n      if (decodeURIComponent(pair[0]) == variable) {\r\n        // eslint-disable-line eqeqeq\r\n        return decodeURIComponent(pair[1]);\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  var queryString = '';\r\n\r\n  if (standalone) {\r\n    var scripts = document.getElementsByTagName('script');\r\n    var index = scripts.length - 1;\r\n    var myScript = scripts[index] || {\r\n      src: ''\r\n    };\r\n    queryString = myScript.src ? myScript.src.replace(/^[^\\?]+\\??/, '') : ''; // eslint-disable-line no-useless-escape\r\n\r\n    renderer = getQueryVariable('renderer');\r\n  }\r\n\r\n  var readyStateCheckInterval = setInterval(checkReady, 100); // this adds bodymovin to the window object for backwards compatibility\r\n\r\n  try {\r\n    if (!((typeof exports === \"undefined\" ? \"undefined\" : _typeof$3(exports)) === 'object' && typeof module !== 'undefined') && !(typeof define === 'function' && define.amd) // eslint-disable-line no-undef\r\n    ) {\r\n      window.bodymovin = lottie;\r\n    }\r\n  } catch (err) {//\r\n  }\r\n\r\n  var ShapeModifiers = function () {\r\n    var ob = {};\r\n    var modifiers = {};\r\n    ob.registerModifier = registerModifier;\r\n    ob.getModifier = getModifier;\r\n\r\n    function registerModifier(nm, factory) {\r\n      if (!modifiers[nm]) {\r\n        modifiers[nm] = factory;\r\n      }\r\n    }\r\n\r\n    function getModifier(nm, elem, data) {\r\n      return new modifiers[nm](elem, data);\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  function ShapeModifier() {}\r\n\r\n  ShapeModifier.prototype.initModifierProperties = function () {};\r\n\r\n  ShapeModifier.prototype.addShapeToModifier = function () {};\r\n\r\n  ShapeModifier.prototype.addShape = function (data) {\r\n    if (!this.closed) {\r\n      // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\r\n      data.sh.container.addDynamicProperty(data.sh);\r\n      var shapeData = {\r\n        shape: data.sh,\r\n        data: data,\r\n        localShapeCollection: shapeCollectionPool.newShapeCollection()\r\n      };\r\n      this.shapes.push(shapeData);\r\n      this.addShapeToModifier(shapeData);\r\n\r\n      if (this._isAnimated) {\r\n        data.setAsAnimated();\r\n      }\r\n    }\r\n  };\r\n\r\n  ShapeModifier.prototype.init = function (elem, data) {\r\n    this.shapes = [];\r\n    this.elem = elem;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem, data);\r\n    this.frameId = initialDefaultFrame;\r\n    this.closed = false;\r\n    this.k = false;\r\n\r\n    if (this.dynamicProperties.length) {\r\n      this.k = true;\r\n    } else {\r\n      this.getValue(true);\r\n    }\r\n  };\r\n\r\n  ShapeModifier.prototype.processKeys = function () {\r\n    if (this.elem.globalData.frameId === this.frameId) {\r\n      return;\r\n    }\r\n\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], ShapeModifier);\r\n\r\n  function TrimModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], TrimModifier);\r\n\r\n  TrimModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n    this.sValue = 0;\r\n    this.eValue = 0;\r\n    this.getValue = this.processKeys;\r\n    this.m = data.m;\r\n    this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\r\n  };\r\n\r\n  TrimModifier.prototype.addShapeToModifier = function (shapeData) {\r\n    shapeData.pathsData = [];\r\n  };\r\n\r\n  TrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\r\n    var segments = [];\r\n\r\n    if (e <= 1) {\r\n      segments.push({\r\n        s: s,\r\n        e: e\r\n      });\r\n    } else if (s >= 1) {\r\n      segments.push({\r\n        s: s - 1,\r\n        e: e - 1\r\n      });\r\n    } else {\r\n      segments.push({\r\n        s: s,\r\n        e: 1\r\n      });\r\n      segments.push({\r\n        s: 0,\r\n        e: e - 1\r\n      });\r\n    }\r\n\r\n    var shapeSegments = [];\r\n    var i;\r\n    var len = segments.length;\r\n    var segmentOb;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      segmentOb = segments[i];\r\n\r\n      if (!(segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength)) {\r\n        var shapeS;\r\n        var shapeE;\r\n\r\n        if (segmentOb.s * totalModifierLength <= addedLength) {\r\n          shapeS = 0;\r\n        } else {\r\n          shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n        }\r\n\r\n        if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n          shapeE = 1;\r\n        } else {\r\n          shapeE = (segmentOb.e * totalModifierLength - addedLength) / shapeLength;\r\n        }\r\n\r\n        shapeSegments.push([shapeS, shapeE]);\r\n      }\r\n    }\r\n\r\n    if (!shapeSegments.length) {\r\n      shapeSegments.push([0, 0]);\r\n    }\r\n\r\n    return shapeSegments;\r\n  };\r\n\r\n  TrimModifier.prototype.releasePathsData = function (pathsData) {\r\n    var i;\r\n    var len = pathsData.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      segmentsLengthPool.release(pathsData[i]);\r\n    }\r\n\r\n    pathsData.length = 0;\r\n    return pathsData;\r\n  };\r\n\r\n  TrimModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var s;\r\n    var e;\r\n\r\n    if (this._mdf || _isFirstFrame) {\r\n      var o = this.o.v % 360 / 360;\r\n\r\n      if (o < 0) {\r\n        o += 1;\r\n      }\r\n\r\n      if (this.s.v > 1) {\r\n        s = 1 + o;\r\n      } else if (this.s.v < 0) {\r\n        s = 0 + o;\r\n      } else {\r\n        s = this.s.v + o;\r\n      }\r\n\r\n      if (this.e.v > 1) {\r\n        e = 1 + o;\r\n      } else if (this.e.v < 0) {\r\n        e = 0 + o;\r\n      } else {\r\n        e = this.e.v + o;\r\n      }\r\n\r\n      if (s > e) {\r\n        var _s = s;\r\n        s = e;\r\n        e = _s;\r\n      }\r\n\r\n      s = Math.round(s * 10000) * 0.0001;\r\n      e = Math.round(e * 10000) * 0.0001;\r\n      this.sValue = s;\r\n      this.eValue = e;\r\n    } else {\r\n      s = this.sValue;\r\n      e = this.eValue;\r\n    }\r\n\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var pathsData;\r\n    var pathData;\r\n    var totalShapeLength;\r\n    var totalModifierLength = 0;\r\n\r\n    if (e === s) {\r\n      for (i = 0; i < len; i += 1) {\r\n        this.shapes[i].localShapeCollection.releaseShapes();\r\n        this.shapes[i].shape._mdf = true;\r\n        this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n\r\n        if (this._mdf) {\r\n          this.shapes[i].pathsData.length = 0;\r\n        }\r\n      }\r\n    } else if (!(e === 1 && s === 0 || e === 0 && s === 1)) {\r\n      var segments = [];\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i]; // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n\r\n        if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n          shapeData.shape.paths = shapeData.localShapeCollection;\r\n        } else {\r\n          shapePaths = shapeData.shape.paths;\r\n          jLen = shapePaths._length;\r\n          totalShapeLength = 0;\r\n\r\n          if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n            totalShapeLength = shapeData.totalShapeLength;\r\n          } else {\r\n            pathsData = this.releasePathsData(shapeData.pathsData);\r\n\r\n            for (j = 0; j < jLen; j += 1) {\r\n              pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n              pathsData.push(pathData);\r\n              totalShapeLength += pathData.totalLength;\r\n            }\r\n\r\n            shapeData.totalShapeLength = totalShapeLength;\r\n            shapeData.pathsData = pathsData;\r\n          }\r\n\r\n          totalModifierLength += totalShapeLength;\r\n          shapeData.shape._mdf = true;\r\n        }\r\n      }\r\n\r\n      var shapeS = s;\r\n      var shapeE = e;\r\n      var addedLength = 0;\r\n      var edges;\r\n\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        shapeData = this.shapes[i];\r\n\r\n        if (shapeData.shape._mdf) {\r\n          localShapeCollection = shapeData.localShapeCollection;\r\n          localShapeCollection.releaseShapes(); // if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n\r\n          if (this.m === 2 && len > 1) {\r\n            edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n            addedLength += shapeData.totalShapeLength;\r\n          } else {\r\n            edges = [[shapeS, shapeE]];\r\n          }\r\n\r\n          jLen = edges.length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            shapeS = edges[j][0];\r\n            shapeE = edges[j][1];\r\n            segments.length = 0;\r\n\r\n            if (shapeE <= 1) {\r\n              segments.push({\r\n                s: shapeData.totalShapeLength * shapeS,\r\n                e: shapeData.totalShapeLength * shapeE\r\n              });\r\n            } else if (shapeS >= 1) {\r\n              segments.push({\r\n                s: shapeData.totalShapeLength * (shapeS - 1),\r\n                e: shapeData.totalShapeLength * (shapeE - 1)\r\n              });\r\n            } else {\r\n              segments.push({\r\n                s: shapeData.totalShapeLength * shapeS,\r\n                e: shapeData.totalShapeLength\r\n              });\r\n              segments.push({\r\n                s: 0,\r\n                e: shapeData.totalShapeLength * (shapeE - 1)\r\n              });\r\n            }\r\n\r\n            var newShapesData = this.addShapes(shapeData, segments[0]);\r\n\r\n            if (segments[0].s !== segments[0].e) {\r\n              if (segments.length > 1) {\r\n                var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\r\n\r\n                if (lastShapeInCollection.c) {\r\n                  var lastShape = newShapesData.pop();\r\n                  this.addPaths(newShapesData, localShapeCollection);\r\n                  newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n                } else {\r\n                  this.addPaths(newShapesData, localShapeCollection);\r\n                  newShapesData = this.addShapes(shapeData, segments[1]);\r\n                }\r\n              }\r\n\r\n              this.addPaths(newShapesData, localShapeCollection);\r\n            }\r\n          }\r\n\r\n          shapeData.shape.paths = localShapeCollection;\r\n        }\r\n      }\r\n    } else if (this._mdf) {\r\n      for (i = 0; i < len; i += 1) {\r\n        // Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\r\n        // Don't remove this even if it's losing cached info.\r\n        this.shapes[i].pathsData.length = 0;\r\n        this.shapes[i].shape._mdf = true;\r\n      }\r\n    }\r\n  };\r\n\r\n  TrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\r\n    var i;\r\n    var len = newPaths.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      localShapeCollection.addShape(newPaths[i]);\r\n    }\r\n  };\r\n\r\n  TrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n\r\n    if (newShape) {\r\n      shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n    }\r\n\r\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n  };\r\n\r\n  TrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n\r\n    if (newShape) {\r\n      shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n    }\r\n\r\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n  };\r\n\r\n  TrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\r\n    var pathsData = shapeData.pathsData;\r\n    var shapePaths = shapeData.shape.paths.shapes;\r\n    var i;\r\n    var len = shapeData.shape.paths._length;\r\n    var j;\r\n    var jLen;\r\n    var addedLength = 0;\r\n    var currentLengthData;\r\n    var segmentCount;\r\n    var lengths;\r\n    var segment;\r\n    var shapes = [];\r\n    var initPos;\r\n    var newShape = true;\r\n\r\n    if (!shapePath) {\r\n      shapePath = shapePool.newElement();\r\n      segmentCount = 0;\r\n      initPos = 0;\r\n    } else {\r\n      segmentCount = shapePath._length;\r\n      initPos = shapePath._length;\r\n    }\r\n\r\n    shapes.push(shapePath);\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      lengths = pathsData[i].lengths;\r\n      shapePath.c = shapePaths[i].c;\r\n      jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n\r\n      for (j = 1; j < jLen; j += 1) {\r\n        currentLengthData = lengths[j - 1];\r\n\r\n        if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n          addedLength += currentLengthData.addedLength;\r\n          shapePath.c = false;\r\n        } else if (addedLength > shapeSegment.e) {\r\n          shapePath.c = false;\r\n          break;\r\n        } else {\r\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n            newShape = false;\r\n          } else {\r\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\r\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape); // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n\r\n            newShape = false;\r\n            shapePath.c = false;\r\n          }\r\n\r\n          addedLength += currentLengthData.addedLength;\r\n          segmentCount += 1;\r\n        }\r\n      }\r\n\r\n      if (shapePaths[i].c && lengths.length) {\r\n        currentLengthData = lengths[j - 1];\r\n\r\n        if (addedLength <= shapeSegment.e) {\r\n          var segmentLength = lengths[j - 1].addedLength;\r\n\r\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n            newShape = false;\r\n          } else {\r\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape); // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n\r\n            newShape = false;\r\n            shapePath.c = false;\r\n          }\r\n        } else {\r\n          shapePath.c = false;\r\n        }\r\n\r\n        addedLength += currentLengthData.addedLength;\r\n        segmentCount += 1;\r\n      }\r\n\r\n      if (shapePath._length) {\r\n        shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n        shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\r\n      }\r\n\r\n      if (addedLength > shapeSegment.e) {\r\n        break;\r\n      }\r\n\r\n      if (i < len - 1) {\r\n        shapePath = shapePool.newElement();\r\n        newShape = true;\r\n        shapes.push(shapePath);\r\n        segmentCount = 0;\r\n      }\r\n    }\r\n\r\n    return shapes;\r\n  };\r\n\r\n  function PuckerAndBloatModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], PuckerAndBloatModifier);\r\n\r\n  PuckerAndBloatModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\r\n    this._isAnimated = !!this.amount.effectsSequence.length;\r\n  };\r\n\r\n  PuckerAndBloatModifier.prototype.processPath = function (path, amount) {\r\n    var percent = amount / 100;\r\n    var centerPoint = [0, 0];\r\n    var pathLength = path._length;\r\n    var i = 0;\r\n\r\n    for (i = 0; i < pathLength; i += 1) {\r\n      centerPoint[0] += path.v[i][0];\r\n      centerPoint[1] += path.v[i][1];\r\n    }\r\n\r\n    centerPoint[0] /= pathLength;\r\n    centerPoint[1] /= pathLength;\r\n    var clonedPath = shapePool.newElement();\r\n    clonedPath.c = path.c;\r\n    var vX;\r\n    var vY;\r\n    var oX;\r\n    var oY;\r\n    var iX;\r\n    var iY;\r\n\r\n    for (i = 0; i < pathLength; i += 1) {\r\n      vX = path.v[i][0] + (centerPoint[0] - path.v[i][0]) * percent;\r\n      vY = path.v[i][1] + (centerPoint[1] - path.v[i][1]) * percent;\r\n      oX = path.o[i][0] + (centerPoint[0] - path.o[i][0]) * -percent;\r\n      oY = path.o[i][1] + (centerPoint[1] - path.o[i][1]) * -percent;\r\n      iX = path.i[i][0] + (centerPoint[0] - path.i[i][0]) * -percent;\r\n      iY = path.i[i][1] + (centerPoint[1] - path.i[i][1]) * -percent;\r\n      clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, i);\r\n    }\r\n\r\n    return clonedPath;\r\n  };\r\n\r\n  PuckerAndBloatModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var amount = this.amount.v;\r\n\r\n    if (amount !== 0) {\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i];\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n\r\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n          localShapeCollection.releaseShapes();\r\n          shapeData.shape._mdf = true;\r\n          shapePaths = shapeData.shape.paths.shapes;\r\n          jLen = shapeData.shape.paths._length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amount));\r\n          }\r\n        }\r\n\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this._mdf = false;\r\n    }\r\n  };\r\n\r\n  var TransformPropertyFactory = function () {\r\n    var defaultVector = [0, 0];\r\n\r\n    function applyToMatrix(mat) {\r\n      var _mdf = this._mdf;\r\n      this.iterateDynamicProperties();\r\n      this._mdf = this._mdf || _mdf;\r\n\r\n      if (this.a) {\r\n        mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n      }\r\n\r\n      if (this.s) {\r\n        mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n      }\r\n\r\n      if (this.sk) {\r\n        mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n      }\r\n\r\n      if (this.r) {\r\n        mat.rotate(-this.r.v);\r\n      } else {\r\n        mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n      }\r\n\r\n      if (this.data.p.s) {\r\n        if (this.data.p.z) {\r\n          mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n        } else {\r\n          mat.translate(this.px.v, this.py.v, 0);\r\n        }\r\n      } else {\r\n        mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n      }\r\n    }\r\n\r\n    function processKeys(forceRender) {\r\n      if (this.elem.globalData.frameId === this.frameId) {\r\n        return;\r\n      }\r\n\r\n      if (this._isDirty) {\r\n        this.precalculateMatrix();\r\n        this._isDirty = false;\r\n      }\r\n\r\n      this.iterateDynamicProperties();\r\n\r\n      if (this._mdf || forceRender) {\r\n        var frameRate;\r\n        this.v.cloneFromProps(this.pre.props);\r\n\r\n        if (this.appliedTransformations < 1) {\r\n          this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n        }\r\n\r\n        if (this.appliedTransformations < 2) {\r\n          this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n        }\r\n\r\n        if (this.sk && this.appliedTransformations < 3) {\r\n          this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n        }\r\n\r\n        if (this.r && this.appliedTransformations < 4) {\r\n          this.v.rotate(-this.r.v);\r\n        } else if (!this.r && this.appliedTransformations < 4) {\r\n          this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n        }\r\n\r\n        if (this.autoOriented) {\r\n          var v1;\r\n          var v2;\r\n          frameRate = this.elem.globalData.frameRate;\r\n\r\n          if (this.p && this.p.keyframes && this.p.getValueAtTime) {\r\n            if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\r\n              v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\r\n              v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\r\n            } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n              v1 = this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length - 1].t / frameRate, 0);\r\n              v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\r\n            } else {\r\n              v1 = this.p.pv;\r\n              v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\r\n            }\r\n          } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\r\n            v1 = [];\r\n            v2 = [];\r\n            var px = this.px;\r\n            var py = this.py;\r\n\r\n            if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\r\n              v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\r\n              v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\r\n              v2[0] = px.getValueAtTime(px.keyframes[0].t / frameRate, 0);\r\n              v2[1] = py.getValueAtTime(py.keyframes[0].t / frameRate, 0);\r\n            } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\r\n              v1[0] = px.getValueAtTime(px.keyframes[px.keyframes.length - 1].t / frameRate, 0);\r\n              v1[1] = py.getValueAtTime(py.keyframes[py.keyframes.length - 1].t / frameRate, 0);\r\n              v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n              v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n            } else {\r\n              v1 = [px.pv, py.pv];\r\n              v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\r\n              v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\r\n            }\r\n          } else {\r\n            v2 = defaultVector;\r\n            v1 = v2;\r\n          }\r\n\r\n          this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n        }\r\n\r\n        if (this.data.p && this.data.p.s) {\r\n          if (this.data.p.z) {\r\n            this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n          } else {\r\n            this.v.translate(this.px.v, this.py.v, 0);\r\n          }\r\n        } else {\r\n          this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n        }\r\n      }\r\n\r\n      this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function precalculateMatrix() {\r\n      if (!this.a.k) {\r\n        this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n        this.appliedTransformations = 1;\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      if (!this.s.effectsSequence.length) {\r\n        this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n        this.appliedTransformations = 2;\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      if (this.sk) {\r\n        if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\r\n          this.pre.skewFromAxis(-this.sk.v, this.sa.v);\r\n          this.appliedTransformations = 3;\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (this.r) {\r\n        if (!this.r.effectsSequence.length) {\r\n          this.pre.rotate(-this.r.v);\r\n          this.appliedTransformations = 4;\r\n        }\r\n      } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\r\n        this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n        this.appliedTransformations = 4;\r\n      }\r\n    }\r\n\r\n    function autoOrient() {//\r\n      // var prevP = this.getValueAtTime();\r\n    }\r\n\r\n    function addDynamicProperty(prop) {\r\n      this._addDynamicProperty(prop);\r\n\r\n      this.elem.addDynamicProperty(prop);\r\n      this._isDirty = true;\r\n    }\r\n\r\n    function TransformProperty(elem, data, container) {\r\n      this.elem = elem;\r\n      this.frameId = -1;\r\n      this.propType = 'transform';\r\n      this.data = data;\r\n      this.v = new Matrix(); // Precalculated matrix with non animated properties\r\n\r\n      this.pre = new Matrix();\r\n      this.appliedTransformations = 0;\r\n      this.initDynamicPropertyContainer(container || elem);\r\n\r\n      if (data.p && data.p.s) {\r\n        this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\r\n        this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\r\n\r\n        if (data.p.z) {\r\n          this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\r\n        }\r\n      } else {\r\n        this.p = PropertyFactory.getProp(elem, data.p || {\r\n          k: [0, 0, 0]\r\n        }, 1, 0, this);\r\n      }\r\n\r\n      if (data.rx) {\r\n        this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n        this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n        this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n\r\n        if (data.or.k[0].ti) {\r\n          var i;\r\n          var len = data.or.k.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            data.or.k[i].to = null;\r\n            data.or.k[i].ti = null;\r\n          }\r\n        }\r\n\r\n        this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this); // sh Indicates it needs to be capped between -180 and 180\r\n\r\n        this.or.sh = true;\r\n      } else {\r\n        this.r = PropertyFactory.getProp(elem, data.r || {\r\n          k: 0\r\n        }, 0, degToRads, this);\r\n      }\r\n\r\n      if (data.sk) {\r\n        this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n        this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n      }\r\n\r\n      this.a = PropertyFactory.getProp(elem, data.a || {\r\n        k: [0, 0, 0]\r\n      }, 1, 0, this);\r\n      this.s = PropertyFactory.getProp(elem, data.s || {\r\n        k: [100, 100, 100]\r\n      }, 1, 0.01, this); // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n\r\n      if (data.o) {\r\n        this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\r\n      } else {\r\n        this.o = {\r\n          _mdf: false,\r\n          v: 1\r\n        };\r\n      }\r\n\r\n      this._isDirty = true;\r\n\r\n      if (!this.dynamicProperties.length) {\r\n        this.getValue(true);\r\n      }\r\n    }\r\n\r\n    TransformProperty.prototype = {\r\n      applyToMatrix: applyToMatrix,\r\n      getValue: processKeys,\r\n      precalculateMatrix: precalculateMatrix,\r\n      autoOrient: autoOrient\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], TransformProperty);\r\n    TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n    TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\r\n\r\n    function getTransformProperty(elem, data, container) {\r\n      return new TransformProperty(elem, data, container);\r\n    }\r\n\r\n    return {\r\n      getTransformProperty: getTransformProperty\r\n    };\r\n  }();\r\n\r\n  function RepeaterModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\n  RepeaterModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\r\n    this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\r\n    this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\r\n    this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\r\n    this.data = data;\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this.getValue(true);\r\n    }\r\n\r\n    this._isAnimated = !!this.dynamicProperties.length;\r\n    this.pMatrix = new Matrix();\r\n    this.rMatrix = new Matrix();\r\n    this.sMatrix = new Matrix();\r\n    this.tMatrix = new Matrix();\r\n    this.matrix = new Matrix();\r\n  };\r\n\r\n  RepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\r\n    var dir = inv ? -1 : 1;\r\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    rMatrix.rotate(-transform.r.v * dir * perc);\r\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\r\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n  };\r\n\r\n  RepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\r\n    this.elem = elem;\r\n    this.arr = arr;\r\n    this.pos = pos;\r\n    this.elemsData = elemsData;\r\n    this._currentCopies = 0;\r\n    this._elements = [];\r\n    this._groups = [];\r\n    this.frameId = -1;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem, arr[pos]);\r\n\r\n    while (pos > 0) {\r\n      pos -= 1; // this._elements.unshift(arr.splice(pos,1)[0]);\r\n\r\n      this._elements.unshift(arr[pos]);\r\n    }\r\n\r\n    if (this.dynamicProperties.length) {\r\n      this.k = true;\r\n    } else {\r\n      this.getValue(true);\r\n    }\r\n  };\r\n\r\n  RepeaterModifier.prototype.resetElements = function (elements) {\r\n    var i;\r\n    var len = elements.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      elements[i]._processed = false;\r\n\r\n      if (elements[i].ty === 'gr') {\r\n        this.resetElements(elements[i].it);\r\n      }\r\n    }\r\n  };\r\n\r\n  RepeaterModifier.prototype.cloneElements = function (elements) {\r\n    var newElements = JSON.parse(JSON.stringify(elements));\r\n    this.resetElements(newElements);\r\n    return newElements;\r\n  };\r\n\r\n  RepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\r\n    var i;\r\n    var len = elements.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      elements[i]._render = renderFlag;\r\n\r\n      if (elements[i].ty === 'gr') {\r\n        this.changeGroupRender(elements[i].it, renderFlag);\r\n      }\r\n    }\r\n  };\r\n\r\n  RepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var items;\r\n    var itemsTransform;\r\n    var i;\r\n    var dir;\r\n    var cont;\r\n    var hasReloaded = false;\r\n\r\n    if (this._mdf || _isFirstFrame) {\r\n      var copies = Math.ceil(this.c.v);\r\n\r\n      if (this._groups.length < copies) {\r\n        while (this._groups.length < copies) {\r\n          var group = {\r\n            it: this.cloneElements(this._elements),\r\n            ty: 'gr'\r\n          };\r\n          group.it.push({\r\n            a: {\r\n              a: 0,\r\n              ix: 1,\r\n              k: [0, 0]\r\n            },\r\n            nm: 'Transform',\r\n            o: {\r\n              a: 0,\r\n              ix: 7,\r\n              k: 100\r\n            },\r\n            p: {\r\n              a: 0,\r\n              ix: 2,\r\n              k: [0, 0]\r\n            },\r\n            r: {\r\n              a: 1,\r\n              ix: 6,\r\n              k: [{\r\n                s: 0,\r\n                e: 0,\r\n                t: 0\r\n              }, {\r\n                s: 0,\r\n                e: 0,\r\n                t: 1\r\n              }]\r\n            },\r\n            s: {\r\n              a: 0,\r\n              ix: 3,\r\n              k: [100, 100]\r\n            },\r\n            sa: {\r\n              a: 0,\r\n              ix: 5,\r\n              k: 0\r\n            },\r\n            sk: {\r\n              a: 0,\r\n              ix: 4,\r\n              k: 0\r\n            },\r\n            ty: 'tr'\r\n          });\r\n          this.arr.splice(0, 0, group);\r\n\r\n          this._groups.splice(0, 0, group);\r\n\r\n          this._currentCopies += 1;\r\n        }\r\n\r\n        this.elem.reloadShapes();\r\n        hasReloaded = true;\r\n      }\r\n\r\n      cont = 0;\r\n      var renderFlag;\r\n\r\n      for (i = 0; i <= this._groups.length - 1; i += 1) {\r\n        renderFlag = cont < copies;\r\n        this._groups[i]._render = renderFlag;\r\n        this.changeGroupRender(this._groups[i].it, renderFlag);\r\n\r\n        if (!renderFlag) {\r\n          var elems = this.elemsData[i].it;\r\n          var transformData = elems[elems.length - 1];\r\n\r\n          if (transformData.transform.op.v !== 0) {\r\n            transformData.transform.op._mdf = true;\r\n            transformData.transform.op.v = 0;\r\n          } else {\r\n            transformData.transform.op._mdf = false;\r\n          }\r\n        }\r\n\r\n        cont += 1;\r\n      }\r\n\r\n      this._currentCopies = copies; /// /\r\n\r\n      var offset = this.o.v;\r\n      var offsetModulo = offset % 1;\r\n      var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n      var pProps = this.pMatrix.props;\r\n      var rProps = this.rMatrix.props;\r\n      var sProps = this.sMatrix.props;\r\n      this.pMatrix.reset();\r\n      this.rMatrix.reset();\r\n      this.sMatrix.reset();\r\n      this.tMatrix.reset();\r\n      this.matrix.reset();\r\n      var iteration = 0;\r\n\r\n      if (offset > 0) {\r\n        while (iteration < roundOffset) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n          iteration += 1;\r\n        }\r\n\r\n        if (offsetModulo) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n          iteration += offsetModulo;\r\n        }\r\n      } else if (offset < 0) {\r\n        while (iteration > roundOffset) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n          iteration -= 1;\r\n        }\r\n\r\n        if (offsetModulo) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\r\n          iteration -= offsetModulo;\r\n        }\r\n      }\r\n\r\n      i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n      dir = this.data.m === 1 ? 1 : -1;\r\n      cont = this._currentCopies;\r\n      var j;\r\n      var jLen;\r\n\r\n      while (cont) {\r\n        items = this.elemsData[i].it;\r\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n        jLen = itemsTransform.length;\r\n        items[items.length - 1].transform.mProps._mdf = true;\r\n        items[items.length - 1].transform.op._mdf = true;\r\n        items[items.length - 1].transform.op.v = this._currentCopies === 1 ? this.so.v : this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\r\n\r\n        if (iteration !== 0) {\r\n          if (i !== 0 && dir === 1 || i !== this._currentCopies - 1 && dir === -1) {\r\n            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n          }\r\n\r\n          this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\r\n          this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\r\n          this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            itemsTransform[j] = this.matrix.props[j];\r\n          }\r\n\r\n          this.matrix.reset();\r\n        } else {\r\n          this.matrix.reset();\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            itemsTransform[j] = this.matrix.props[j];\r\n          }\r\n        }\r\n\r\n        iteration += 1;\r\n        cont -= 1;\r\n        i += dir;\r\n      }\r\n    } else {\r\n      cont = this._currentCopies;\r\n      i = 0;\r\n      dir = 1;\r\n\r\n      while (cont) {\r\n        items = this.elemsData[i].it;\r\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n        items[items.length - 1].transform.mProps._mdf = false;\r\n        items[items.length - 1].transform.op._mdf = false;\r\n        cont -= 1;\r\n        i += dir;\r\n      }\r\n    }\r\n\r\n    return hasReloaded;\r\n  };\r\n\r\n  RepeaterModifier.prototype.addShape = function () {};\r\n\r\n  function RoundCornersModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], RoundCornersModifier);\r\n\r\n  RoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\r\n    this._isAnimated = !!this.rd.effectsSequence.length;\r\n  };\r\n\r\n  RoundCornersModifier.prototype.processPath = function (path, round) {\r\n    var clonedPath = shapePool.newElement();\r\n    clonedPath.c = path.c;\r\n    var i;\r\n    var len = path._length;\r\n    var currentV;\r\n    var currentI;\r\n    var currentO;\r\n    var closerV;\r\n    var distance;\r\n    var newPosPerc;\r\n    var index = 0;\r\n    var vX;\r\n    var vY;\r\n    var oX;\r\n    var oY;\r\n    var iX;\r\n    var iY;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      currentV = path.v[i];\r\n      currentO = path.o[i];\r\n      currentI = path.i[i];\r\n\r\n      if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\r\n        if ((i === 0 || i === len - 1) && !path.c) {\r\n          clonedPath.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\r\n          /* clonedPath.v[index] = currentV;\r\n                  clonedPath.o[index] = currentO;\r\n                  clonedPath.i[index] = currentI; */\r\n\r\n          index += 1;\r\n        } else {\r\n          if (i === 0) {\r\n            closerV = path.v[len - 1];\r\n          } else {\r\n            closerV = path.v[i - 1];\r\n          }\r\n\r\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n          iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n          vX = iX;\r\n          iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\r\n          vY = iY;\r\n          oX = vX - (vX - currentV[0]) * roundCorner;\r\n          oY = vY - (vY - currentV[1]) * roundCorner;\r\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n          index += 1;\r\n\r\n          if (i === len - 1) {\r\n            closerV = path.v[0];\r\n          } else {\r\n            closerV = path.v[i + 1];\r\n          }\r\n\r\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n          oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n          vX = oX;\r\n          oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\r\n          vY = oY;\r\n          iX = vX - (vX - currentV[0]) * roundCorner;\r\n          iY = vY - (vY - currentV[1]) * roundCorner;\r\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n          index += 1;\r\n        }\r\n      } else {\r\n        clonedPath.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\r\n        index += 1;\r\n      }\r\n    }\r\n\r\n    return clonedPath;\r\n  };\r\n\r\n  RoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var rd = this.rd.v;\r\n\r\n    if (rd !== 0) {\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i];\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n\r\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n          localShapeCollection.releaseShapes();\r\n          shapeData.shape._mdf = true;\r\n          shapePaths = shapeData.shape.paths.shapes;\r\n          jLen = shapeData.shape.paths._length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\r\n          }\r\n        }\r\n\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this._mdf = false;\r\n    }\r\n  };\r\n\r\n  function floatEqual(a, b) {\r\n    return Math.abs(a - b) * 100000 <= Math.min(Math.abs(a), Math.abs(b));\r\n  }\r\n\r\n  function floatZero(f) {\r\n    return Math.abs(f) <= 0.00001;\r\n  }\r\n\r\n  function lerp(p0, p1, amount) {\r\n    return p0 * (1 - amount) + p1 * amount;\r\n  }\r\n\r\n  function lerpPoint(p0, p1, amount) {\r\n    return [lerp(p0[0], p1[0], amount), lerp(p0[1], p1[1], amount)];\r\n  }\r\n\r\n  function quadRoots(a, b, c) {\r\n    // no root\r\n    if (a === 0) return [];\r\n    var s = b * b - 4 * a * c; // Complex roots\r\n\r\n    if (s < 0) return [];\r\n    var singleRoot = -b / (2 * a); // 1 root\r\n\r\n    if (s === 0) return [singleRoot];\r\n    var delta = Math.sqrt(s) / (2 * a); // 2 roots\r\n\r\n    return [singleRoot - delta, singleRoot + delta];\r\n  }\r\n\r\n  function polynomialCoefficients(p0, p1, p2, p3) {\r\n    return [-p0 + 3 * p1 - 3 * p2 + p3, 3 * p0 - 6 * p1 + 3 * p2, -3 * p0 + 3 * p1, p0];\r\n  }\r\n\r\n  function singlePoint(p) {\r\n    return new PolynomialBezier(p, p, p, p, false);\r\n  }\r\n\r\n  function PolynomialBezier(p0, p1, p2, p3, linearize) {\r\n    if (linearize && pointEqual(p0, p1)) {\r\n      p1 = lerpPoint(p0, p3, 1 / 3);\r\n    }\r\n\r\n    if (linearize && pointEqual(p2, p3)) {\r\n      p2 = lerpPoint(p0, p3, 2 / 3);\r\n    }\r\n\r\n    var coeffx = polynomialCoefficients(p0[0], p1[0], p2[0], p3[0]);\r\n    var coeffy = polynomialCoefficients(p0[1], p1[1], p2[1], p3[1]);\r\n    this.a = [coeffx[0], coeffy[0]];\r\n    this.b = [coeffx[1], coeffy[1]];\r\n    this.c = [coeffx[2], coeffy[2]];\r\n    this.d = [coeffx[3], coeffy[3]];\r\n    this.points = [p0, p1, p2, p3];\r\n  }\r\n\r\n  PolynomialBezier.prototype.point = function (t) {\r\n    return [((this.a[0] * t + this.b[0]) * t + this.c[0]) * t + this.d[0], ((this.a[1] * t + this.b[1]) * t + this.c[1]) * t + this.d[1]];\r\n  };\r\n\r\n  PolynomialBezier.prototype.derivative = function (t) {\r\n    return [(3 * t * this.a[0] + 2 * this.b[0]) * t + this.c[0], (3 * t * this.a[1] + 2 * this.b[1]) * t + this.c[1]];\r\n  };\r\n\r\n  PolynomialBezier.prototype.tangentAngle = function (t) {\r\n    var p = this.derivative(t);\r\n    return Math.atan2(p[1], p[0]);\r\n  };\r\n\r\n  PolynomialBezier.prototype.normalAngle = function (t) {\r\n    var p = this.derivative(t);\r\n    return Math.atan2(p[0], p[1]);\r\n  };\r\n\r\n  PolynomialBezier.prototype.inflectionPoints = function () {\r\n    var denom = this.a[1] * this.b[0] - this.a[0] * this.b[1];\r\n    if (floatZero(denom)) return [];\r\n    var tcusp = -0.5 * (this.a[1] * this.c[0] - this.a[0] * this.c[1]) / denom;\r\n    var square = tcusp * tcusp - 1 / 3 * (this.b[1] * this.c[0] - this.b[0] * this.c[1]) / denom;\r\n    if (square < 0) return [];\r\n    var root = Math.sqrt(square);\r\n\r\n    if (floatZero(root)) {\r\n      if (root > 0 && root < 1) return [tcusp];\r\n      return [];\r\n    }\r\n\r\n    return [tcusp - root, tcusp + root].filter(function (r) {\r\n      return r > 0 && r < 1;\r\n    });\r\n  };\r\n\r\n  PolynomialBezier.prototype.split = function (t) {\r\n    if (t <= 0) return [singlePoint(this.points[0]), this];\r\n    if (t >= 1) return [this, singlePoint(this.points[this.points.length - 1])];\r\n    var p10 = lerpPoint(this.points[0], this.points[1], t);\r\n    var p11 = lerpPoint(this.points[1], this.points[2], t);\r\n    var p12 = lerpPoint(this.points[2], this.points[3], t);\r\n    var p20 = lerpPoint(p10, p11, t);\r\n    var p21 = lerpPoint(p11, p12, t);\r\n    var p3 = lerpPoint(p20, p21, t);\r\n    return [new PolynomialBezier(this.points[0], p10, p20, p3, true), new PolynomialBezier(p3, p21, p12, this.points[3], true)];\r\n  };\r\n\r\n  function extrema(bez, comp) {\r\n    var min = bez.points[0][comp];\r\n    var max = bez.points[bez.points.length - 1][comp];\r\n\r\n    if (min > max) {\r\n      var e = max;\r\n      max = min;\r\n      min = e;\r\n    } // Derivative roots to find min/max\r\n\r\n\r\n    var f = quadRoots(3 * bez.a[comp], 2 * bez.b[comp], bez.c[comp]);\r\n\r\n    for (var i = 0; i < f.length; i += 1) {\r\n      if (f[i] > 0 && f[i] < 1) {\r\n        var val = bez.point(f[i])[comp];\r\n        if (val < min) min = val;else if (val > max) max = val;\r\n      }\r\n    }\r\n\r\n    return {\r\n      min: min,\r\n      max: max\r\n    };\r\n  }\r\n\r\n  PolynomialBezier.prototype.bounds = function () {\r\n    return {\r\n      x: extrema(this, 0),\r\n      y: extrema(this, 1)\r\n    };\r\n  };\r\n\r\n  PolynomialBezier.prototype.boundingBox = function () {\r\n    var bounds = this.bounds();\r\n    return {\r\n      left: bounds.x.min,\r\n      right: bounds.x.max,\r\n      top: bounds.y.min,\r\n      bottom: bounds.y.max,\r\n      width: bounds.x.max - bounds.x.min,\r\n      height: bounds.y.max - bounds.y.min,\r\n      cx: (bounds.x.max + bounds.x.min) / 2,\r\n      cy: (bounds.y.max + bounds.y.min) / 2\r\n    };\r\n  };\r\n\r\n  function intersectData(bez, t1, t2) {\r\n    var box = bez.boundingBox();\r\n    return {\r\n      cx: box.cx,\r\n      cy: box.cy,\r\n      width: box.width,\r\n      height: box.height,\r\n      bez: bez,\r\n      t: (t1 + t2) / 2,\r\n      t1: t1,\r\n      t2: t2\r\n    };\r\n  }\r\n\r\n  function splitData(data) {\r\n    var split = data.bez.split(0.5);\r\n    return [intersectData(split[0], data.t1, data.t), intersectData(split[1], data.t, data.t2)];\r\n  }\r\n\r\n  function boxIntersect(b1, b2) {\r\n    return Math.abs(b1.cx - b2.cx) * 2 < b1.width + b2.width && Math.abs(b1.cy - b2.cy) * 2 < b1.height + b2.height;\r\n  }\r\n\r\n  function intersectsImpl(d1, d2, depth, tolerance, intersections, maxRecursion) {\r\n    if (!boxIntersect(d1, d2)) return;\r\n\r\n    if (depth >= maxRecursion || d1.width <= tolerance && d1.height <= tolerance && d2.width <= tolerance && d2.height <= tolerance) {\r\n      intersections.push([d1.t, d2.t]);\r\n      return;\r\n    }\r\n\r\n    var d1s = splitData(d1);\r\n    var d2s = splitData(d2);\r\n    intersectsImpl(d1s[0], d2s[0], depth + 1, tolerance, intersections, maxRecursion);\r\n    intersectsImpl(d1s[0], d2s[1], depth + 1, tolerance, intersections, maxRecursion);\r\n    intersectsImpl(d1s[1], d2s[0], depth + 1, tolerance, intersections, maxRecursion);\r\n    intersectsImpl(d1s[1], d2s[1], depth + 1, tolerance, intersections, maxRecursion);\r\n  }\r\n\r\n  PolynomialBezier.prototype.intersections = function (other, tolerance, maxRecursion) {\r\n    if (tolerance === undefined) tolerance = 2;\r\n    if (maxRecursion === undefined) maxRecursion = 7;\r\n    var intersections = [];\r\n    intersectsImpl(intersectData(this, 0, 1), intersectData(other, 0, 1), 0, tolerance, intersections, maxRecursion);\r\n    return intersections;\r\n  };\r\n\r\n  PolynomialBezier.shapeSegment = function (shapePath, index) {\r\n    var nextIndex = (index + 1) % shapePath.length();\r\n    return new PolynomialBezier(shapePath.v[index], shapePath.o[index], shapePath.i[nextIndex], shapePath.v[nextIndex], true);\r\n  };\r\n\r\n  PolynomialBezier.shapeSegmentInverted = function (shapePath, index) {\r\n    var nextIndex = (index + 1) % shapePath.length();\r\n    return new PolynomialBezier(shapePath.v[nextIndex], shapePath.i[nextIndex], shapePath.o[index], shapePath.v[index], true);\r\n  };\r\n\r\n  function crossProduct(a, b) {\r\n    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\r\n  }\r\n\r\n  function lineIntersection(start1, end1, start2, end2) {\r\n    var v1 = [start1[0], start1[1], 1];\r\n    var v2 = [end1[0], end1[1], 1];\r\n    var v3 = [start2[0], start2[1], 1];\r\n    var v4 = [end2[0], end2[1], 1];\r\n    var r = crossProduct(crossProduct(v1, v2), crossProduct(v3, v4));\r\n    if (floatZero(r[2])) return null;\r\n    return [r[0] / r[2], r[1] / r[2]];\r\n  }\r\n\r\n  function polarOffset(p, angle, length) {\r\n    return [p[0] + Math.cos(angle) * length, p[1] - Math.sin(angle) * length];\r\n  }\r\n\r\n  function pointDistance(p1, p2) {\r\n    return Math.hypot(p1[0] - p2[0], p1[1] - p2[1]);\r\n  }\r\n\r\n  function pointEqual(p1, p2) {\r\n    return floatEqual(p1[0], p2[0]) && floatEqual(p1[1], p2[1]);\r\n  }\r\n\r\n  function ZigZagModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], ZigZagModifier);\r\n\r\n  ZigZagModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.amplitude = PropertyFactory.getProp(elem, data.s, 0, null, this);\r\n    this.frequency = PropertyFactory.getProp(elem, data.r, 0, null, this);\r\n    this.pointsType = PropertyFactory.getProp(elem, data.pt, 0, null, this);\r\n    this._isAnimated = this.amplitude.effectsSequence.length !== 0 || this.frequency.effectsSequence.length !== 0 || this.pointsType.effectsSequence.length !== 0;\r\n  };\r\n\r\n  function setPoint(outputBezier, point, angle, direction, amplitude, outAmplitude, inAmplitude) {\r\n    var angO = angle - Math.PI / 2;\r\n    var angI = angle + Math.PI / 2;\r\n    var px = point[0] + Math.cos(angle) * direction * amplitude;\r\n    var py = point[1] - Math.sin(angle) * direction * amplitude;\r\n    outputBezier.setTripleAt(px, py, px + Math.cos(angO) * outAmplitude, py - Math.sin(angO) * outAmplitude, px + Math.cos(angI) * inAmplitude, py - Math.sin(angI) * inAmplitude, outputBezier.length());\r\n  }\r\n\r\n  function getPerpendicularVector(pt1, pt2) {\r\n    var vector = [pt2[0] - pt1[0], pt2[1] - pt1[1]];\r\n    var rot = -Math.PI * 0.5;\r\n    var rotatedVector = [Math.cos(rot) * vector[0] - Math.sin(rot) * vector[1], Math.sin(rot) * vector[0] + Math.cos(rot) * vector[1]];\r\n    return rotatedVector;\r\n  }\r\n\r\n  function getProjectingAngle(path, cur) {\r\n    var prevIndex = cur === 0 ? path.length() - 1 : cur - 1;\r\n    var nextIndex = (cur + 1) % path.length();\r\n    var prevPoint = path.v[prevIndex];\r\n    var nextPoint = path.v[nextIndex];\r\n    var pVector = getPerpendicularVector(prevPoint, nextPoint);\r\n    return Math.atan2(0, 1) - Math.atan2(pVector[1], pVector[0]);\r\n  }\r\n\r\n  function zigZagCorner(outputBezier, path, cur, amplitude, frequency, pointType, direction) {\r\n    var angle = getProjectingAngle(path, cur);\r\n    var point = path.v[cur % path._length];\r\n    var prevPoint = path.v[cur === 0 ? path._length - 1 : cur - 1];\r\n    var nextPoint = path.v[(cur + 1) % path._length];\r\n    var prevDist = pointType === 2 ? Math.sqrt(Math.pow(point[0] - prevPoint[0], 2) + Math.pow(point[1] - prevPoint[1], 2)) : 0;\r\n    var nextDist = pointType === 2 ? Math.sqrt(Math.pow(point[0] - nextPoint[0], 2) + Math.pow(point[1] - nextPoint[1], 2)) : 0;\r\n    setPoint(outputBezier, path.v[cur % path._length], angle, direction, amplitude, nextDist / ((frequency + 1) * 2), prevDist / ((frequency + 1) * 2), pointType);\r\n  }\r\n\r\n  function zigZagSegment(outputBezier, segment, amplitude, frequency, pointType, direction) {\r\n    for (var i = 0; i < frequency; i += 1) {\r\n      var t = (i + 1) / (frequency + 1);\r\n      var dist = pointType === 2 ? Math.sqrt(Math.pow(segment.points[3][0] - segment.points[0][0], 2) + Math.pow(segment.points[3][1] - segment.points[0][1], 2)) : 0;\r\n      var angle = segment.normalAngle(t);\r\n      var point = segment.point(t);\r\n      setPoint(outputBezier, point, angle, direction, amplitude, dist / ((frequency + 1) * 2), dist / ((frequency + 1) * 2), pointType);\r\n      direction = -direction;\r\n    }\r\n\r\n    return direction;\r\n  }\r\n\r\n  ZigZagModifier.prototype.processPath = function (path, amplitude, frequency, pointType) {\r\n    var count = path._length;\r\n    var clonedPath = shapePool.newElement();\r\n    clonedPath.c = path.c;\r\n\r\n    if (!path.c) {\r\n      count -= 1;\r\n    }\r\n\r\n    if (count === 0) return clonedPath;\r\n    var direction = -1;\r\n    var segment = PolynomialBezier.shapeSegment(path, 0);\r\n    zigZagCorner(clonedPath, path, 0, amplitude, frequency, pointType, direction);\r\n\r\n    for (var i = 0; i < count; i += 1) {\r\n      direction = zigZagSegment(clonedPath, segment, amplitude, frequency, pointType, -direction);\r\n\r\n      if (i === count - 1 && !path.c) {\r\n        segment = null;\r\n      } else {\r\n        segment = PolynomialBezier.shapeSegment(path, (i + 1) % count);\r\n      }\r\n\r\n      zigZagCorner(clonedPath, path, i + 1, amplitude, frequency, pointType, direction);\r\n    }\r\n\r\n    return clonedPath;\r\n  };\r\n\r\n  ZigZagModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var amplitude = this.amplitude.v;\r\n    var frequency = Math.max(0, Math.round(this.frequency.v));\r\n    var pointType = this.pointsType.v;\r\n\r\n    if (amplitude !== 0) {\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i];\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n\r\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n          localShapeCollection.releaseShapes();\r\n          shapeData.shape._mdf = true;\r\n          shapePaths = shapeData.shape.paths.shapes;\r\n          jLen = shapeData.shape.paths._length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amplitude, frequency, pointType));\r\n          }\r\n        }\r\n\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this._mdf = false;\r\n    }\r\n  };\r\n\r\n  function linearOffset(p1, p2, amount) {\r\n    var angle = Math.atan2(p2[0] - p1[0], p2[1] - p1[1]);\r\n    return [polarOffset(p1, angle, amount), polarOffset(p2, angle, amount)];\r\n  }\r\n\r\n  function offsetSegment(segment, amount) {\r\n    var p0;\r\n    var p1a;\r\n    var p1b;\r\n    var p2b;\r\n    var p2a;\r\n    var p3;\r\n    var e;\r\n    e = linearOffset(segment.points[0], segment.points[1], amount);\r\n    p0 = e[0];\r\n    p1a = e[1];\r\n    e = linearOffset(segment.points[1], segment.points[2], amount);\r\n    p1b = e[0];\r\n    p2b = e[1];\r\n    e = linearOffset(segment.points[2], segment.points[3], amount);\r\n    p2a = e[0];\r\n    p3 = e[1];\r\n    var p1 = lineIntersection(p0, p1a, p1b, p2b);\r\n    if (p1 === null) p1 = p1a;\r\n    var p2 = lineIntersection(p2a, p3, p1b, p2b);\r\n    if (p2 === null) p2 = p2a;\r\n    return new PolynomialBezier(p0, p1, p2, p3);\r\n  }\r\n\r\n  function joinLines(outputBezier, seg1, seg2, lineJoin, miterLimit) {\r\n    var p0 = seg1.points[3];\r\n    var p1 = seg2.points[0]; // Bevel\r\n\r\n    if (lineJoin === 3) return p0; // Connected, they don't need a joint\r\n\r\n    if (pointEqual(p0, p1)) return p0; // Round\r\n\r\n    if (lineJoin === 2) {\r\n      var angleOut = -seg1.tangentAngle(1);\r\n      var angleIn = -seg2.tangentAngle(0) + Math.PI;\r\n      var center = lineIntersection(p0, polarOffset(p0, angleOut + Math.PI / 2, 100), p1, polarOffset(p1, angleOut + Math.PI / 2, 100));\r\n      var radius = center ? pointDistance(center, p0) : pointDistance(p0, p1) / 2;\r\n      var tan = polarOffset(p0, angleOut, 2 * radius * roundCorner);\r\n      outputBezier.setXYAt(tan[0], tan[1], 'o', outputBezier.length() - 1);\r\n      tan = polarOffset(p1, angleIn, 2 * radius * roundCorner);\r\n      outputBezier.setTripleAt(p1[0], p1[1], p1[0], p1[1], tan[0], tan[1], outputBezier.length());\r\n      return p1;\r\n    } // Miter\r\n\r\n\r\n    var t0 = pointEqual(p0, seg1.points[2]) ? seg1.points[0] : seg1.points[2];\r\n    var t1 = pointEqual(p1, seg2.points[1]) ? seg2.points[3] : seg2.points[1];\r\n    var intersection = lineIntersection(t0, p0, p1, t1);\r\n\r\n    if (intersection && pointDistance(intersection, p0) < miterLimit) {\r\n      outputBezier.setTripleAt(intersection[0], intersection[1], intersection[0], intersection[1], intersection[0], intersection[1], outputBezier.length());\r\n      return intersection;\r\n    }\r\n\r\n    return p0;\r\n  }\r\n\r\n  function getIntersection(a, b) {\r\n    var intersect = a.intersections(b);\r\n    if (intersect.length && floatEqual(intersect[0][0], 1)) intersect.shift();\r\n    if (intersect.length) return intersect[0];\r\n    return null;\r\n  }\r\n\r\n  function pruneSegmentIntersection(a, b) {\r\n    var outa = a.slice();\r\n    var outb = b.slice();\r\n    var intersect = getIntersection(a[a.length - 1], b[0]);\r\n\r\n    if (intersect) {\r\n      outa[a.length - 1] = a[a.length - 1].split(intersect[0])[0];\r\n      outb[0] = b[0].split(intersect[1])[1];\r\n    }\r\n\r\n    if (a.length > 1 && b.length > 1) {\r\n      intersect = getIntersection(a[0], b[b.length - 1]);\r\n\r\n      if (intersect) {\r\n        return [[a[0].split(intersect[0])[0]], [b[b.length - 1].split(intersect[1])[1]]];\r\n      }\r\n    }\r\n\r\n    return [outa, outb];\r\n  }\r\n\r\n  function pruneIntersections(segments) {\r\n    var e;\r\n\r\n    for (var i = 1; i < segments.length; i += 1) {\r\n      e = pruneSegmentIntersection(segments[i - 1], segments[i]);\r\n      segments[i - 1] = e[0];\r\n      segments[i] = e[1];\r\n    }\r\n\r\n    if (segments.length > 1) {\r\n      e = pruneSegmentIntersection(segments[segments.length - 1], segments[0]);\r\n      segments[segments.length - 1] = e[0];\r\n      segments[0] = e[1];\r\n    }\r\n\r\n    return segments;\r\n  }\r\n\r\n  function offsetSegmentSplit(segment, amount) {\r\n    /*\r\n      We split each bezier segment into smaller pieces based\r\n      on inflection points, this ensures the control point\r\n      polygon is convex.\r\n        (A cubic bezier can have none, one, or two inflection points)\r\n    */\r\n    var flex = segment.inflectionPoints();\r\n    var left;\r\n    var right;\r\n    var split;\r\n    var mid;\r\n\r\n    if (flex.length === 0) {\r\n      return [offsetSegment(segment, amount)];\r\n    }\r\n\r\n    if (flex.length === 1 || floatEqual(flex[1], 1)) {\r\n      split = segment.split(flex[0]);\r\n      left = split[0];\r\n      right = split[1];\r\n      return [offsetSegment(left, amount), offsetSegment(right, amount)];\r\n    }\r\n\r\n    split = segment.split(flex[0]);\r\n    left = split[0];\r\n    var t = (flex[1] - flex[0]) / (1 - flex[0]);\r\n    split = split[1].split(t);\r\n    mid = split[0];\r\n    right = split[1];\r\n    return [offsetSegment(left, amount), offsetSegment(mid, amount), offsetSegment(right, amount)];\r\n  }\r\n\r\n  function OffsetPathModifier() {}\r\n\r\n  extendPrototype([ShapeModifier], OffsetPathModifier);\r\n\r\n  OffsetPathModifier.prototype.initModifierProperties = function (elem, data) {\r\n    this.getValue = this.processKeys;\r\n    this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\r\n    this.miterLimit = PropertyFactory.getProp(elem, data.ml, 0, null, this);\r\n    this.lineJoin = data.lj;\r\n    this._isAnimated = this.amount.effectsSequence.length !== 0;\r\n  };\r\n\r\n  OffsetPathModifier.prototype.processPath = function (inputBezier, amount, lineJoin, miterLimit) {\r\n    var outputBezier = shapePool.newElement();\r\n    outputBezier.c = inputBezier.c;\r\n    var count = inputBezier.length();\r\n\r\n    if (!inputBezier.c) {\r\n      count -= 1;\r\n    }\r\n\r\n    var i;\r\n    var j;\r\n    var segment;\r\n    var multiSegments = [];\r\n\r\n    for (i = 0; i < count; i += 1) {\r\n      segment = PolynomialBezier.shapeSegment(inputBezier, i);\r\n      multiSegments.push(offsetSegmentSplit(segment, amount));\r\n    }\r\n\r\n    if (!inputBezier.c) {\r\n      for (i = count - 1; i >= 0; i -= 1) {\r\n        segment = PolynomialBezier.shapeSegmentInverted(inputBezier, i);\r\n        multiSegments.push(offsetSegmentSplit(segment, amount));\r\n      }\r\n    }\r\n\r\n    multiSegments = pruneIntersections(multiSegments); // Add bezier segments to the output and apply line joints\r\n\r\n    var lastPoint = null;\r\n    var lastSeg = null;\r\n\r\n    for (i = 0; i < multiSegments.length; i += 1) {\r\n      var multiSegment = multiSegments[i];\r\n      if (lastSeg) lastPoint = joinLines(outputBezier, lastSeg, multiSegment[0], lineJoin, miterLimit);\r\n      lastSeg = multiSegment[multiSegment.length - 1];\r\n\r\n      for (j = 0; j < multiSegment.length; j += 1) {\r\n        segment = multiSegment[j];\r\n\r\n        if (lastPoint && pointEqual(segment.points[0], lastPoint)) {\r\n          outputBezier.setXYAt(segment.points[1][0], segment.points[1][1], 'o', outputBezier.length() - 1);\r\n        } else {\r\n          outputBezier.setTripleAt(segment.points[0][0], segment.points[0][1], segment.points[1][0], segment.points[1][1], segment.points[0][0], segment.points[0][1], outputBezier.length());\r\n        }\r\n\r\n        outputBezier.setTripleAt(segment.points[3][0], segment.points[3][1], segment.points[3][0], segment.points[3][1], segment.points[2][0], segment.points[2][1], outputBezier.length());\r\n        lastPoint = segment.points[3];\r\n      }\r\n    }\r\n\r\n    if (multiSegments.length) joinLines(outputBezier, lastSeg, multiSegments[0][0], lineJoin, miterLimit);\r\n    return outputBezier;\r\n  };\r\n\r\n  OffsetPathModifier.prototype.processShapes = function (_isFirstFrame) {\r\n    var shapePaths;\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var j;\r\n    var jLen;\r\n    var amount = this.amount.v;\r\n    var miterLimit = this.miterLimit.v;\r\n    var lineJoin = this.lineJoin;\r\n\r\n    if (amount !== 0) {\r\n      var shapeData;\r\n      var localShapeCollection;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shapeData = this.shapes[i];\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n\r\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n          localShapeCollection.releaseShapes();\r\n          shapeData.shape._mdf = true;\r\n          shapePaths = shapeData.shape.paths.shapes;\r\n          jLen = shapeData.shape.paths._length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amount, lineJoin, miterLimit));\r\n          }\r\n        }\r\n\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      }\r\n    }\r\n\r\n    if (!this.dynamicProperties.length) {\r\n      this._mdf = false;\r\n    }\r\n  };\r\n\r\n  function getFontProperties(fontData) {\r\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n    var fWeight = 'normal';\r\n    var fStyle = 'normal';\r\n    var len = styles.length;\r\n    var styleName;\r\n\r\n    for (var i = 0; i < len; i += 1) {\r\n      styleName = styles[i].toLowerCase();\r\n\r\n      switch (styleName) {\r\n        case 'italic':\r\n          fStyle = 'italic';\r\n          break;\r\n\r\n        case 'bold':\r\n          fWeight = '700';\r\n          break;\r\n\r\n        case 'black':\r\n          fWeight = '900';\r\n          break;\r\n\r\n        case 'medium':\r\n          fWeight = '500';\r\n          break;\r\n\r\n        case 'regular':\r\n        case 'normal':\r\n          fWeight = '400';\r\n          break;\r\n\r\n        case 'light':\r\n        case 'thin':\r\n          fWeight = '200';\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    return {\r\n      style: fStyle,\r\n      weight: fontData.fWeight || fWeight\r\n    };\r\n  }\r\n\r\n  var FontManager = function () {\r\n    var maxWaitingTime = 5000;\r\n    var emptyChar = {\r\n      w: 0,\r\n      size: 0,\r\n      shapes: [],\r\n      data: {\r\n        shapes: []\r\n      }\r\n    };\r\n    var combinedCharacters = []; // Hindi characters\r\n\r\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366, 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379, 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n    var surrogateModifiers = ['d83cdffb', 'd83cdffc', 'd83cdffd', 'd83cdffe', 'd83cdfff'];\r\n    var zeroWidthJoiner = [65039, 8205];\r\n\r\n    function trimFontOptions(font) {\r\n      var familyArray = font.split(',');\r\n      var i;\r\n      var len = familyArray.length;\r\n      var enabledFamilies = [];\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (familyArray[i] !== 'sans-serif' && familyArray[i] !== 'monospace') {\r\n          enabledFamilies.push(familyArray[i]);\r\n        }\r\n      }\r\n\r\n      return enabledFamilies.join(',');\r\n    }\r\n\r\n    function setUpNode(font, family) {\r\n      var parentNode = createTag('span'); // Node is invisible to screen readers.\r\n\r\n      parentNode.setAttribute('aria-hidden', true);\r\n      parentNode.style.fontFamily = family;\r\n      var node = createTag('span'); // Characters that vary significantly among different fonts\r\n\r\n      node.innerText = 'giItT1WQy@!-/#'; // Visible - so we can measure it - but not on the screen\r\n\r\n      parentNode.style.position = 'absolute';\r\n      parentNode.style.left = '-10000px';\r\n      parentNode.style.top = '-10000px'; // Large font size makes even subtle changes obvious\r\n\r\n      parentNode.style.fontSize = '300px'; // Reset any font properties\r\n\r\n      parentNode.style.fontVariant = 'normal';\r\n      parentNode.style.fontStyle = 'normal';\r\n      parentNode.style.fontWeight = 'normal';\r\n      parentNode.style.letterSpacing = '0';\r\n      parentNode.appendChild(node);\r\n      document.body.appendChild(parentNode); // Remember width with no applied web font\r\n\r\n      var width = node.offsetWidth;\r\n      node.style.fontFamily = trimFontOptions(font) + ', ' + family;\r\n      return {\r\n        node: node,\r\n        w: width,\r\n        parent: parentNode\r\n      };\r\n    }\r\n\r\n    function checkLoadedFonts() {\r\n      var i;\r\n      var len = this.fonts.length;\r\n      var node;\r\n      var w;\r\n      var loadedCount = len;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (this.fonts[i].loaded) {\r\n          loadedCount -= 1;\r\n        } else if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\r\n          this.fonts[i].loaded = true;\r\n        } else {\r\n          node = this.fonts[i].monoCase.node;\r\n          w = this.fonts[i].monoCase.w;\r\n\r\n          if (node.offsetWidth !== w) {\r\n            loadedCount -= 1;\r\n            this.fonts[i].loaded = true;\r\n          } else {\r\n            node = this.fonts[i].sansCase.node;\r\n            w = this.fonts[i].sansCase.w;\r\n\r\n            if (node.offsetWidth !== w) {\r\n              loadedCount -= 1;\r\n              this.fonts[i].loaded = true;\r\n            }\r\n          }\r\n\r\n          if (this.fonts[i].loaded) {\r\n            this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n            this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\r\n        setTimeout(this.checkLoadedFontsBinded, 20);\r\n      } else {\r\n        setTimeout(this.setIsLoadedBinded, 10);\r\n      }\r\n    }\r\n\r\n    function createHelper(fontData, def) {\r\n      var engine = document.body && def ? 'svg' : 'canvas';\r\n      var helper;\r\n      var fontProps = getFontProperties(fontData);\r\n\r\n      if (engine === 'svg') {\r\n        var tHelper = createNS('text');\r\n        tHelper.style.fontSize = '100px'; // tHelper.style.fontFamily = fontData.fFamily;\r\n\r\n        tHelper.setAttribute('font-family', fontData.fFamily);\r\n        tHelper.setAttribute('font-style', fontProps.style);\r\n        tHelper.setAttribute('font-weight', fontProps.weight);\r\n        tHelper.textContent = '1';\r\n\r\n        if (fontData.fClass) {\r\n          tHelper.style.fontFamily = 'inherit';\r\n          tHelper.setAttribute('class', fontData.fClass);\r\n        } else {\r\n          tHelper.style.fontFamily = fontData.fFamily;\r\n        }\r\n\r\n        def.appendChild(tHelper);\r\n        helper = tHelper;\r\n      } else {\r\n        var tCanvasHelper = new OffscreenCanvas(500, 500).getContext('2d');\r\n        tCanvasHelper.font = fontProps.style + ' ' + fontProps.weight + ' 100px ' + fontData.fFamily;\r\n        helper = tCanvasHelper;\r\n      }\r\n\r\n      function measure(text) {\r\n        if (engine === 'svg') {\r\n          helper.textContent = text;\r\n          return helper.getComputedTextLength();\r\n        }\r\n\r\n        return helper.measureText(text).width;\r\n      }\r\n\r\n      return {\r\n        measureText: measure\r\n      };\r\n    }\r\n\r\n    function addFonts(fontData, defs) {\r\n      if (!fontData) {\r\n        this.isLoaded = true;\r\n        return;\r\n      }\r\n\r\n      if (this.chars) {\r\n        this.isLoaded = true;\r\n        this.fonts = fontData.list;\r\n        return;\r\n      }\r\n\r\n      if (!document.body) {\r\n        this.isLoaded = true;\r\n        fontData.list.forEach(function (data) {\r\n          data.helper = createHelper(data);\r\n          data.cache = {};\r\n        });\r\n        this.fonts = fontData.list;\r\n        return;\r\n      }\r\n\r\n      var fontArr = fontData.list;\r\n      var i;\r\n      var len = fontArr.length;\r\n      var _pendingFonts = len;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        var shouldLoadFont = true;\r\n        var loadedSelector;\r\n        var j;\r\n        fontArr[i].loaded = false;\r\n        fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\r\n        fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\r\n\r\n        if (!fontArr[i].fPath) {\r\n          fontArr[i].loaded = true;\r\n          _pendingFonts -= 1;\r\n        } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\r\n          loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\r\n\r\n          if (loadedSelector.length > 0) {\r\n            shouldLoadFont = false;\r\n          }\r\n\r\n          if (shouldLoadFont) {\r\n            var s = createTag('style');\r\n            s.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n            s.setAttribute('f-origin', fontArr[i].origin);\r\n            s.setAttribute('f-family', fontArr[i].fFamily);\r\n            s.type = 'text/css';\r\n            s.innerText = '@font-face {font-family: ' + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\r\n            defs.appendChild(s);\r\n          }\r\n        } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\r\n          loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\r\n\r\n          for (j = 0; j < loadedSelector.length; j += 1) {\r\n            if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\r\n              // Font is already loaded\r\n              shouldLoadFont = false;\r\n            }\r\n          }\r\n\r\n          if (shouldLoadFont) {\r\n            var l = createTag('link');\r\n            l.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n            l.setAttribute('f-origin', fontArr[i].origin);\r\n            l.type = 'text/css';\r\n            l.rel = 'stylesheet';\r\n            l.href = fontArr[i].fPath;\r\n            document.body.appendChild(l);\r\n          }\r\n        } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\r\n          loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\r\n\r\n          for (j = 0; j < loadedSelector.length; j += 1) {\r\n            if (fontArr[i].fPath === loadedSelector[j].src) {\r\n              // Font is already loaded\r\n              shouldLoadFont = false;\r\n            }\r\n          }\r\n\r\n          if (shouldLoadFont) {\r\n            var sc = createTag('link');\r\n            sc.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n            sc.setAttribute('f-origin', fontArr[i].origin);\r\n            sc.setAttribute('rel', 'stylesheet');\r\n            sc.setAttribute('href', fontArr[i].fPath);\r\n            defs.appendChild(sc);\r\n          }\r\n        }\r\n\r\n        fontArr[i].helper = createHelper(fontArr[i], defs);\r\n        fontArr[i].cache = {};\r\n        this.fonts.push(fontArr[i]);\r\n      }\r\n\r\n      if (_pendingFonts === 0) {\r\n        this.isLoaded = true;\r\n      } else {\r\n        // On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\r\n        // Adding this timeout seems to fix it\r\n        setTimeout(this.checkLoadedFonts.bind(this), 100);\r\n      }\r\n    }\r\n\r\n    function addChars(chars) {\r\n      if (!chars) {\r\n        return;\r\n      }\r\n\r\n      if (!this.chars) {\r\n        this.chars = [];\r\n      }\r\n\r\n      var i;\r\n      var len = chars.length;\r\n      var j;\r\n      var jLen = this.chars.length;\r\n      var found;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        j = 0;\r\n        found = false;\r\n\r\n        while (j < jLen) {\r\n          if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\r\n            found = true;\r\n          }\r\n\r\n          j += 1;\r\n        }\r\n\r\n        if (!found) {\r\n          this.chars.push(chars[i]);\r\n          jLen += 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    function getCharData(_char, style, font) {\r\n      var i = 0;\r\n      var len = this.chars.length;\r\n\r\n      while (i < len) {\r\n        if (this.chars[i].ch === _char && this.chars[i].style === style && this.chars[i].fFamily === font) {\r\n          return this.chars[i];\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      if ((typeof _char === 'string' && _char.charCodeAt(0) !== 13 || !_char) && console && console.warn // eslint-disable-line no-console\r\n      && !this._warned) {\r\n        this._warned = true;\r\n        console.warn('Missing character from exported characters list: ', _char, style, font); // eslint-disable-line no-console\r\n      }\r\n\r\n      return emptyChar;\r\n    }\r\n\r\n    function measureText(_char2, fontName, size) {\r\n      var fontData = this.getFontByName(fontName);\r\n\r\n      var index = _char2.charCodeAt(0);\r\n\r\n      if (!fontData.cache[index + 1]) {\r\n        var tHelper = fontData.helper;\r\n\r\n        if (_char2 === ' ') {\r\n          var doubleSize = tHelper.measureText('|' + _char2 + '|');\r\n          var singleSize = tHelper.measureText('||');\r\n          fontData.cache[index + 1] = (doubleSize - singleSize) / 100;\r\n        } else {\r\n          fontData.cache[index + 1] = tHelper.measureText(_char2) / 100;\r\n        }\r\n      }\r\n\r\n      return fontData.cache[index + 1] * size;\r\n    }\r\n\r\n    function getFontByName(name) {\r\n      var i = 0;\r\n      var len = this.fonts.length;\r\n\r\n      while (i < len) {\r\n        if (this.fonts[i].fName === name) {\r\n          return this.fonts[i];\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return this.fonts[0];\r\n    }\r\n\r\n    function isModifier(firstCharCode, secondCharCode) {\r\n      var sum = firstCharCode.toString(16) + secondCharCode.toString(16);\r\n      return surrogateModifiers.indexOf(sum) !== -1;\r\n    }\r\n\r\n    function isZeroWidthJoiner(firstCharCode, secondCharCode) {\r\n      if (!secondCharCode) {\r\n        return firstCharCode === zeroWidthJoiner[1];\r\n      }\r\n\r\n      return firstCharCode === zeroWidthJoiner[0] && secondCharCode === zeroWidthJoiner[1];\r\n    }\r\n\r\n    function isCombinedCharacter(_char3) {\r\n      return combinedCharacters.indexOf(_char3) !== -1;\r\n    }\r\n\r\n    function setIsLoaded() {\r\n      this.isLoaded = true;\r\n    }\r\n\r\n    var Font = function Font() {\r\n      this.fonts = [];\r\n      this.chars = null;\r\n      this.typekitLoaded = 0;\r\n      this.isLoaded = false;\r\n      this._warned = false;\r\n      this.initTime = Date.now();\r\n      this.setIsLoadedBinded = this.setIsLoaded.bind(this);\r\n      this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this);\r\n    };\r\n\r\n    Font.isModifier = isModifier;\r\n    Font.isZeroWidthJoiner = isZeroWidthJoiner;\r\n    Font.isCombinedCharacter = isCombinedCharacter;\r\n    var fontPrototype = {\r\n      addChars: addChars,\r\n      addFonts: addFonts,\r\n      getCharData: getCharData,\r\n      getFontByName: getFontByName,\r\n      measureText: measureText,\r\n      checkLoadedFonts: checkLoadedFonts,\r\n      setIsLoaded: setIsLoaded\r\n    };\r\n    Font.prototype = fontPrototype;\r\n    return Font;\r\n  }();\r\n\r\n  function RenderableElement() {}\r\n\r\n  RenderableElement.prototype = {\r\n    initRenderable: function initRenderable() {\r\n      // layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n      this.isInRange = false; // layer's display state\r\n\r\n      this.hidden = false; // If layer's transparency equals 0, it can be hidden\r\n\r\n      this.isTransparent = false; // list of animated components\r\n\r\n      this.renderableComponents = [];\r\n    },\r\n    addRenderableComponent: function addRenderableComponent(component) {\r\n      if (this.renderableComponents.indexOf(component) === -1) {\r\n        this.renderableComponents.push(component);\r\n      }\r\n    },\r\n    removeRenderableComponent: function removeRenderableComponent(component) {\r\n      if (this.renderableComponents.indexOf(component) !== -1) {\r\n        this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\r\n      }\r\n    },\r\n    prepareRenderableFrame: function prepareRenderableFrame(num) {\r\n      this.checkLayerLimits(num);\r\n    },\r\n    checkTransparency: function checkTransparency() {\r\n      if (this.finalTransform.mProp.o.v <= 0) {\r\n        if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\r\n          this.isTransparent = true;\r\n          this.hide();\r\n        }\r\n      } else if (this.isTransparent) {\r\n        this.isTransparent = false;\r\n        this.show();\r\n      }\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Initializes frame related properties.\r\n       *\r\n       * @param {number} num\r\n       * current frame number in Layer's time\r\n       *\r\n       */\r\n    checkLayerLimits: function checkLayerLimits(num) {\r\n      if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\r\n        if (this.isInRange !== true) {\r\n          this.globalData._mdf = true;\r\n          this._mdf = true;\r\n          this.isInRange = true;\r\n          this.show();\r\n        }\r\n      } else if (this.isInRange !== false) {\r\n        this.globalData._mdf = true;\r\n        this.isInRange = false;\r\n        this.hide();\r\n      }\r\n    },\r\n    renderRenderable: function renderRenderable() {\r\n      var i;\r\n      var len = this.renderableComponents.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.renderableComponents[i].renderFrame(this._isFirstFrame);\r\n      }\r\n      /* this.maskManager.renderFrame(this.finalTransform.mat);\r\n          this.renderableEffectsManager.renderFrame(this._isFirstFrame); */\r\n\r\n    },\r\n    sourceRectAtTime: function sourceRectAtTime() {\r\n      return {\r\n        top: 0,\r\n        left: 0,\r\n        width: 100,\r\n        height: 100\r\n      };\r\n    },\r\n    getLayerSize: function getLayerSize() {\r\n      if (this.data.ty === 5) {\r\n        return {\r\n          w: this.data.textData.width,\r\n          h: this.data.textData.height\r\n        };\r\n      }\r\n\r\n      return {\r\n        w: this.data.width,\r\n        h: this.data.height\r\n      };\r\n    }\r\n  };\r\n\r\n  var getBlendMode = function () {\r\n    var blendModeEnums = {\r\n      0: 'source-over',\r\n      1: 'multiply',\r\n      2: 'screen',\r\n      3: 'overlay',\r\n      4: 'darken',\r\n      5: 'lighten',\r\n      6: 'color-dodge',\r\n      7: 'color-burn',\r\n      8: 'hard-light',\r\n      9: 'soft-light',\r\n      10: 'difference',\r\n      11: 'exclusion',\r\n      12: 'hue',\r\n      13: 'saturation',\r\n      14: 'color',\r\n      15: 'luminosity'\r\n    };\r\n    return function (mode) {\r\n      return blendModeEnums[mode] || '';\r\n    };\r\n  }();\r\n\r\n  function SliderEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function AngleEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function ColorEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n  }\r\n\r\n  function PointEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n  }\r\n\r\n  function LayerIndexEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function MaskIndexEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function CheckboxEffect(data, elem, container) {\r\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n  }\r\n\r\n  function NoValueEffect() {\r\n    this.p = {};\r\n  }\r\n\r\n  function EffectsManager(data, element) {\r\n    var effects = data.ef || [];\r\n    this.effectElements = [];\r\n    var i;\r\n    var len = effects.length;\r\n    var effectItem;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      effectItem = new GroupEffect(effects[i], element);\r\n      this.effectElements.push(effectItem);\r\n    }\r\n  }\r\n\r\n  function GroupEffect(data, element) {\r\n    this.init(data, element);\r\n  }\r\n\r\n  extendPrototype([DynamicPropertyContainer], GroupEffect);\r\n  GroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\r\n\r\n  GroupEffect.prototype.init = function (data, element) {\r\n    this.data = data;\r\n    this.effectElements = [];\r\n    this.initDynamicPropertyContainer(element);\r\n    var i;\r\n    var len = this.data.ef.length;\r\n    var eff;\r\n    var effects = this.data.ef;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      eff = null;\r\n\r\n      switch (effects[i].ty) {\r\n        case 0:\r\n          eff = new SliderEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 1:\r\n          eff = new AngleEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 2:\r\n          eff = new ColorEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 3:\r\n          eff = new PointEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 4:\r\n        case 7:\r\n          eff = new CheckboxEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 10:\r\n          eff = new LayerIndexEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 11:\r\n          eff = new MaskIndexEffect(effects[i], element, this);\r\n          break;\r\n\r\n        case 5:\r\n          eff = new EffectsManager(effects[i], element, this);\r\n          break;\r\n        // case 6:\r\n\r\n        default:\r\n          eff = new NoValueEffect(effects[i], element, this);\r\n          break;\r\n      }\r\n\r\n      if (eff) {\r\n        this.effectElements.push(eff);\r\n      }\r\n    }\r\n  };\r\n\r\n  function BaseElement() {}\r\n\r\n  BaseElement.prototype = {\r\n    checkMasks: function checkMasks() {\r\n      if (!this.data.hasMask) {\r\n        return false;\r\n      }\r\n\r\n      var i = 0;\r\n      var len = this.data.masksProperties.length;\r\n\r\n      while (i < len) {\r\n        if (this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false) {\r\n          return true;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return false;\r\n    },\r\n    initExpressions: function initExpressions() {\r\n      var expressionsInterfaces = getExpressionInterfaces();\r\n\r\n      if (!expressionsInterfaces) {\r\n        return;\r\n      }\r\n\r\n      var LayerExpressionInterface = expressionsInterfaces('layer');\r\n      var EffectsExpressionInterface = expressionsInterfaces('effects');\r\n      var ShapeExpressionInterface = expressionsInterfaces('shape');\r\n      var TextExpressionInterface = expressionsInterfaces('text');\r\n      var CompExpressionInterface = expressionsInterfaces('comp');\r\n      this.layerInterface = LayerExpressionInterface(this);\r\n\r\n      if (this.data.hasMask && this.maskManager) {\r\n        this.layerInterface.registerMaskInterface(this.maskManager);\r\n      }\r\n\r\n      var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\r\n      this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n      if (this.data.ty === 0 || this.data.xt) {\r\n        this.compInterface = CompExpressionInterface(this);\r\n      } else if (this.data.ty === 4) {\r\n        this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\r\n        this.layerInterface.content = this.layerInterface.shapeInterface;\r\n      } else if (this.data.ty === 5) {\r\n        this.layerInterface.textInterface = TextExpressionInterface(this);\r\n        this.layerInterface.text = this.layerInterface.textInterface;\r\n      }\r\n    },\r\n    setBlendMode: function setBlendMode() {\r\n      var blendModeValue = getBlendMode(this.data.bm);\r\n      var elem = this.baseElement || this.layerElement;\r\n      elem.style['mix-blend-mode'] = blendModeValue;\r\n    },\r\n    initBaseData: function initBaseData(data, globalData, comp) {\r\n      this.globalData = globalData;\r\n      this.comp = comp;\r\n      this.data = data;\r\n      this.layerId = createElementID(); // Stretch factor for old animations missing this property.\r\n\r\n      if (!this.data.sr) {\r\n        this.data.sr = 1;\r\n      } // effects manager\r\n\r\n\r\n      this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\r\n    },\r\n    getType: function getType() {\r\n      return this.type;\r\n    },\r\n    sourceRectAtTime: function sourceRectAtTime() {}\r\n  };\r\n\r\n  /**\r\n   * @file\r\n   * Handles element's layer frame update.\r\n   * Checks layer in point and out point\r\n   *\r\n   */\r\n  function FrameElement() {}\r\n\r\n  FrameElement.prototype = {\r\n    /**\r\n       * @function\r\n       * Initializes frame related properties.\r\n       *\r\n       */\r\n    initFrame: function initFrame() {\r\n      // set to true when inpoint is rendered\r\n      this._isFirstFrame = false; // list of animated properties\r\n\r\n      this.dynamicProperties = []; // If layer has been modified in current tick this will be true\r\n\r\n      this._mdf = false;\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Calculates all dynamic values\r\n       *\r\n       * @param {number} num\r\n       * current frame number in Layer's time\r\n       * @param {boolean} isVisible\r\n       * if layers is currently in range\r\n       *\r\n       */\r\n    prepareProperties: function prepareProperties(num, isVisible) {\r\n      var i;\r\n      var len = this.dynamicProperties.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (isVisible || this._isParent && this.dynamicProperties[i].propType === 'transform') {\r\n          this.dynamicProperties[i].getValue();\r\n\r\n          if (this.dynamicProperties[i]._mdf) {\r\n            this.globalData._mdf = true;\r\n            this._mdf = true;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    addDynamicProperty: function addDynamicProperty(prop) {\r\n      if (this.dynamicProperties.indexOf(prop) === -1) {\r\n        this.dynamicProperties.push(prop);\r\n      }\r\n    }\r\n  };\r\n\r\n  function FootageElement(data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initRenderable();\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.footageData = globalData.imageLoader.getAsset(this.assetData);\r\n    this.initBaseData(data, globalData, comp);\r\n  }\r\n\r\n  FootageElement.prototype.prepareFrame = function () {};\r\n\r\n  extendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement);\r\n\r\n  FootageElement.prototype.getBaseElement = function () {\r\n    return null;\r\n  };\r\n\r\n  FootageElement.prototype.renderFrame = function () {};\r\n\r\n  FootageElement.prototype.destroy = function () {};\r\n\r\n  FootageElement.prototype.initExpressions = function () {\r\n    var expressionsInterfaces = getExpressionInterfaces();\r\n\r\n    if (!expressionsInterfaces) {\r\n      return;\r\n    }\r\n\r\n    var FootageInterface = expressionsInterfaces('footage');\r\n    this.layerInterface = FootageInterface(this);\r\n  };\r\n\r\n  FootageElement.prototype.getFootageData = function () {\r\n    return this.footageData;\r\n  };\r\n\r\n  function AudioElement(data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initRenderable();\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initBaseData(data, globalData, comp);\r\n    this._isPlaying = false;\r\n    this._canPlay = false;\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    this.audio = this.globalData.audioController.createAudio(assetPath);\r\n    this._currentTime = 0;\r\n    this.globalData.audioController.addAudio(this);\r\n    this._volumeMultiplier = 1;\r\n    this._volume = 1;\r\n    this._previousVolume = null;\r\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\r\n      _placeholder: true\r\n    };\r\n    this.lv = PropertyFactory.getProp(this, data.au && data.au.lv ? data.au.lv : {\r\n      k: [100]\r\n    }, 1, 0.01, this);\r\n  }\r\n\r\n  AudioElement.prototype.prepareFrame = function (num) {\r\n    this.prepareRenderableFrame(num, true);\r\n    this.prepareProperties(num, true);\r\n\r\n    if (!this.tm._placeholder) {\r\n      var timeRemapped = this.tm.v;\r\n      this._currentTime = timeRemapped;\r\n    } else {\r\n      this._currentTime = num / this.data.sr;\r\n    }\r\n\r\n    this._volume = this.lv.v[0];\r\n    var totalVolume = this._volume * this._volumeMultiplier;\r\n\r\n    if (this._previousVolume !== totalVolume) {\r\n      this._previousVolume = totalVolume;\r\n      this.audio.volume(totalVolume);\r\n    }\r\n  };\r\n\r\n  extendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement);\r\n\r\n  AudioElement.prototype.renderFrame = function () {\r\n    if (this.isInRange && this._canPlay) {\r\n      if (!this._isPlaying) {\r\n        this.audio.play();\r\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n        this._isPlaying = true;\r\n      } else if (!this.audio.playing() || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > 0.1) {\r\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n      }\r\n    }\r\n  };\r\n\r\n  AudioElement.prototype.show = function () {// this.audio.play()\r\n  };\r\n\r\n  AudioElement.prototype.hide = function () {\r\n    this.audio.pause();\r\n    this._isPlaying = false;\r\n  };\r\n\r\n  AudioElement.prototype.pause = function () {\r\n    this.audio.pause();\r\n    this._isPlaying = false;\r\n    this._canPlay = false;\r\n  };\r\n\r\n  AudioElement.prototype.resume = function () {\r\n    this._canPlay = true;\r\n  };\r\n\r\n  AudioElement.prototype.setRate = function (rateValue) {\r\n    this.audio.rate(rateValue);\r\n  };\r\n\r\n  AudioElement.prototype.volume = function (volumeValue) {\r\n    this._volumeMultiplier = volumeValue;\r\n    this._previousVolume = volumeValue * this._volume;\r\n    this.audio.volume(this._previousVolume);\r\n  };\r\n\r\n  AudioElement.prototype.getBaseElement = function () {\r\n    return null;\r\n  };\r\n\r\n  AudioElement.prototype.destroy = function () {};\r\n\r\n  AudioElement.prototype.sourceRectAtTime = function () {};\r\n\r\n  AudioElement.prototype.initExpressions = function () {};\r\n\r\n  function BaseRenderer() {}\r\n\r\n  BaseRenderer.prototype.checkLayers = function (num) {\r\n    var i;\r\n    var len = this.layers.length;\r\n    var data;\r\n    this.completeLayers = true;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (!this.elements[i]) {\r\n        data = this.layers[i];\r\n\r\n        if (data.ip - data.st <= num - this.layers[i].st && data.op - data.st > num - this.layers[i].st) {\r\n          this.buildItem(i);\r\n        }\r\n      }\r\n\r\n      this.completeLayers = this.elements[i] ? this.completeLayers : false;\r\n    }\r\n\r\n    this.checkPendingElements();\r\n  };\r\n\r\n  BaseRenderer.prototype.createItem = function (layer) {\r\n    switch (layer.ty) {\r\n      case 2:\r\n        return this.createImage(layer);\r\n\r\n      case 0:\r\n        return this.createComp(layer);\r\n\r\n      case 1:\r\n        return this.createSolid(layer);\r\n\r\n      case 3:\r\n        return this.createNull(layer);\r\n\r\n      case 4:\r\n        return this.createShape(layer);\r\n\r\n      case 5:\r\n        return this.createText(layer);\r\n\r\n      case 6:\r\n        return this.createAudio(layer);\r\n\r\n      case 13:\r\n        return this.createCamera(layer);\r\n\r\n      case 15:\r\n        return this.createFootage(layer);\r\n\r\n      default:\r\n        return this.createNull(layer);\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.createCamera = function () {\r\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n  };\r\n\r\n  BaseRenderer.prototype.createAudio = function (data) {\r\n    return new AudioElement(data, this.globalData, this);\r\n  };\r\n\r\n  BaseRenderer.prototype.createFootage = function (data) {\r\n    return new FootageElement(data, this.globalData, this);\r\n  };\r\n\r\n  BaseRenderer.prototype.buildAllItems = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.buildItem(i);\r\n    }\r\n\r\n    this.checkPendingElements();\r\n  };\r\n\r\n  BaseRenderer.prototype.includeLayers = function (newLayers) {\r\n    this.completeLayers = false;\r\n    var i;\r\n    var len = newLayers.length;\r\n    var j;\r\n    var jLen = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      j = 0;\r\n\r\n      while (j < jLen) {\r\n        if (this.layers[j].id === newLayers[i].id) {\r\n          this.layers[j] = newLayers[i];\r\n          break;\r\n        }\r\n\r\n        j += 1;\r\n      }\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.setProjectInterface = function (pInterface) {\r\n    this.globalData.projectInterface = pInterface;\r\n  };\r\n\r\n  BaseRenderer.prototype.initItems = function () {\r\n    if (!this.globalData.progressiveLoad) {\r\n      this.buildAllItems();\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\r\n    var elements = this.elements;\r\n    var layers = this.layers;\r\n    var i = 0;\r\n    var len = layers.length;\r\n\r\n    while (i < len) {\r\n      if (layers[i].ind == parentName) {\r\n        // eslint-disable-line eqeqeq\r\n        if (!elements[i] || elements[i] === true) {\r\n          this.buildItem(i);\r\n          this.addPendingElement(element);\r\n        } else {\r\n          hierarchy.push(elements[i]);\r\n          elements[i].setAsParent();\r\n\r\n          if (layers[i].parent !== undefined) {\r\n            this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n          } else {\r\n            element.setHierarchy(hierarchy);\r\n          }\r\n        }\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.addPendingElement = function (element) {\r\n    this.pendingElements.push(element);\r\n  };\r\n\r\n  BaseRenderer.prototype.searchExtraCompositions = function (assets) {\r\n    var i;\r\n    var len = assets.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (assets[i].xt) {\r\n        var comp = this.createComp(assets[i]);\r\n        comp.initExpressions();\r\n        this.globalData.projectInterface.registerComposition(comp);\r\n      }\r\n    }\r\n  };\r\n\r\n  BaseRenderer.prototype.getElementById = function (ind) {\r\n    var i;\r\n    var len = this.elements.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.elements[i].data.ind === ind) {\r\n        return this.elements[i];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  BaseRenderer.prototype.getElementByPath = function (path) {\r\n    var pathValue = path.shift();\r\n    var element;\r\n\r\n    if (typeof pathValue === 'number') {\r\n      element = this.elements[pathValue];\r\n    } else {\r\n      var i;\r\n      var len = this.elements.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (this.elements[i].data.nm === pathValue) {\r\n          element = this.elements[i];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (path.length === 0) {\r\n      return element;\r\n    }\r\n\r\n    return element.getElementByPath(path);\r\n  };\r\n\r\n  BaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.imageLoader = this.animationItem.imagePreloader;\r\n    this.globalData.audioController = this.animationItem.audioController;\r\n    this.globalData.frameId = 0;\r\n    this.globalData.frameRate = animData.fr;\r\n    this.globalData.nm = animData.nm;\r\n    this.globalData.compSize = {\r\n      w: animData.w,\r\n      h: animData.h\r\n    };\r\n  };\r\n\r\n  function TransformElement() {}\r\n\r\n  TransformElement.prototype = {\r\n    initTransform: function initTransform() {\r\n      this.finalTransform = {\r\n        mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {\r\n          o: 0\r\n        },\r\n        _matMdf: false,\r\n        _opMdf: false,\r\n        mat: new Matrix()\r\n      };\r\n\r\n      if (this.data.ao) {\r\n        this.finalTransform.mProp.autoOriented = true;\r\n      } // TODO: check TYPE 11: Guided elements\r\n\r\n\r\n      if (this.data.ty !== 11) {// this.createElements();\r\n      }\r\n    },\r\n    renderTransform: function renderTransform() {\r\n      this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n      this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n      if (this.hierarchy) {\r\n        var mat;\r\n        var finalMat = this.finalTransform.mat;\r\n        var i = 0;\r\n        var len = this.hierarchy.length; // Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n\r\n        if (!this.finalTransform._matMdf) {\r\n          while (i < len) {\r\n            if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n              this.finalTransform._matMdf = true;\r\n              break;\r\n            }\r\n\r\n            i += 1;\r\n          }\r\n        }\r\n\r\n        if (this.finalTransform._matMdf) {\r\n          mat = this.finalTransform.mProp.v.props;\r\n          finalMat.cloneFromProps(mat);\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n            finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    globalToLocal: function globalToLocal(pt) {\r\n      var transforms = [];\r\n      transforms.push(this.finalTransform);\r\n      var flag = true;\r\n      var comp = this.comp;\r\n\r\n      while (flag) {\r\n        if (comp.finalTransform) {\r\n          if (comp.data.hasMask) {\r\n            transforms.splice(0, 0, comp.finalTransform);\r\n          }\r\n\r\n          comp = comp.comp;\r\n        } else {\r\n          flag = false;\r\n        }\r\n      }\r\n\r\n      var i;\r\n      var len = transforms.length;\r\n      var ptNew;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        ptNew = transforms[i].mat.applyToPointArray(0, 0, 0); // ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n\r\n        pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n      }\r\n\r\n      return pt;\r\n    },\r\n    mHelper: new Matrix()\r\n  };\r\n\r\n  function MaskElement(data, element, globalData) {\r\n    this.data = data;\r\n    this.element = element;\r\n    this.globalData = globalData;\r\n    this.storedData = [];\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.maskElement = null;\r\n    var defs = this.globalData.defs;\r\n    var i;\r\n    var len = this.masksProperties ? this.masksProperties.length : 0;\r\n    this.viewData = createSizedArray(len);\r\n    this.solidPath = '';\r\n    var path;\r\n    var properties = this.masksProperties;\r\n    var count = 0;\r\n    var currentMasks = [];\r\n    var j;\r\n    var jLen;\r\n    var layerId = createElementID();\r\n    var rect;\r\n    var expansor;\r\n    var feMorph;\r\n    var x;\r\n    var maskType = 'clipPath';\r\n    var maskRef = 'clip-path';\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (properties[i].mode !== 'a' && properties[i].mode !== 'n' || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\r\n        maskType = 'mask';\r\n        maskRef = 'mask';\r\n      }\r\n\r\n      if ((properties[i].mode === 's' || properties[i].mode === 'i') && count === 0) {\r\n        rect = createNS('rect');\r\n        rect.setAttribute('fill', '#ffffff');\r\n        rect.setAttribute('width', this.element.comp.data.w || 0);\r\n        rect.setAttribute('height', this.element.comp.data.h || 0);\r\n        currentMasks.push(rect);\r\n      } else {\r\n        rect = null;\r\n      }\r\n\r\n      path = createNS('path');\r\n\r\n      if (properties[i].mode === 'n') {\r\n        // TODO move this to a factory or to a constructor\r\n        this.viewData[i] = {\r\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n          elem: path,\r\n          lastPath: ''\r\n        };\r\n        defs.appendChild(path);\r\n      } else {\r\n        count += 1;\r\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n        path.setAttribute('clip-rule', 'nonzero');\r\n        var filterID;\r\n\r\n        if (properties[i].x.k !== 0) {\r\n          maskType = 'mask';\r\n          maskRef = 'mask';\r\n          x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\r\n          filterID = createElementID();\r\n          expansor = createNS('filter');\r\n          expansor.setAttribute('id', filterID);\r\n          feMorph = createNS('feMorphology');\r\n          feMorph.setAttribute('operator', 'erode');\r\n          feMorph.setAttribute('in', 'SourceGraphic');\r\n          feMorph.setAttribute('radius', '0');\r\n          expansor.appendChild(feMorph);\r\n          defs.appendChild(expansor);\r\n          path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n        } else {\r\n          feMorph = null;\r\n          x = null;\r\n        } // TODO move this to a factory or to a constructor\r\n\r\n\r\n        this.storedData[i] = {\r\n          elem: path,\r\n          x: x,\r\n          expan: feMorph,\r\n          lastPath: '',\r\n          lastOperator: '',\r\n          filterId: filterID,\r\n          lastRadius: 0\r\n        };\r\n\r\n        if (properties[i].mode === 'i') {\r\n          jLen = currentMasks.length;\r\n          var g = createNS('g');\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            g.appendChild(currentMasks[j]);\r\n          }\r\n\r\n          var mask = createNS('mask');\r\n          mask.setAttribute('mask-type', 'alpha');\r\n          mask.setAttribute('id', layerId + '_' + count);\r\n          mask.appendChild(path);\r\n          defs.appendChild(mask);\r\n          g.setAttribute('mask', 'url(' + getLocationHref() + '#' + layerId + '_' + count + ')');\r\n          currentMasks.length = 0;\r\n          currentMasks.push(g);\r\n        } else {\r\n          currentMasks.push(path);\r\n        }\r\n\r\n        if (properties[i].inv && !this.solidPath) {\r\n          this.solidPath = this.createLayerSolidPath();\r\n        } // TODO move this to a factory or to a constructor\r\n\r\n\r\n        this.viewData[i] = {\r\n          elem: path,\r\n          lastPath: '',\r\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n          invRect: rect\r\n        };\r\n\r\n        if (!this.viewData[i].prop.k) {\r\n          this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.maskElement = createNS(maskType);\r\n    len = currentMasks.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.maskElement.appendChild(currentMasks[i]);\r\n    }\r\n\r\n    if (count > 0) {\r\n      this.maskElement.setAttribute('id', layerId);\r\n      this.element.maskedElement.setAttribute(maskRef, 'url(' + getLocationHref() + '#' + layerId + ')');\r\n      defs.appendChild(this.maskElement);\r\n    }\r\n\r\n    if (this.viewData.length) {\r\n      this.element.addRenderableComponent(this);\r\n    }\r\n  }\r\n\r\n  MaskElement.prototype.getMaskProperty = function (pos) {\r\n    return this.viewData[pos].prop;\r\n  };\r\n\r\n  MaskElement.prototype.renderFrame = function (isFirstFrame) {\r\n    var finalMat = this.element.finalTransform.mat;\r\n    var i;\r\n    var len = this.masksProperties.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.viewData[i].prop._mdf || isFirstFrame) {\r\n        this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n      }\r\n\r\n      if (this.viewData[i].op._mdf || isFirstFrame) {\r\n        this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\r\n      }\r\n\r\n      if (this.masksProperties[i].mode !== 'n') {\r\n        if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\r\n          this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS());\r\n        }\r\n\r\n        if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\r\n          var feMorph = this.storedData[i].expan;\r\n\r\n          if (this.storedData[i].x.v < 0) {\r\n            if (this.storedData[i].lastOperator !== 'erode') {\r\n              this.storedData[i].lastOperator = 'erode';\r\n              this.storedData[i].elem.setAttribute('filter', 'url(' + getLocationHref() + '#' + this.storedData[i].filterId + ')');\r\n            }\r\n\r\n            feMorph.setAttribute('radius', -this.storedData[i].x.v);\r\n          } else {\r\n            if (this.storedData[i].lastOperator !== 'dilate') {\r\n              this.storedData[i].lastOperator = 'dilate';\r\n              this.storedData[i].elem.setAttribute('filter', null);\r\n            }\r\n\r\n            this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  MaskElement.prototype.getMaskelement = function () {\r\n    return this.maskElement;\r\n  };\r\n\r\n  MaskElement.prototype.createLayerSolidPath = function () {\r\n    var path = 'M0,0 ';\r\n    path += ' h' + this.globalData.compSize.w;\r\n    path += ' v' + this.globalData.compSize.h;\r\n    path += ' h-' + this.globalData.compSize.w;\r\n    path += ' v-' + this.globalData.compSize.h + ' ';\r\n    return path;\r\n  };\r\n\r\n  MaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\r\n    var pathString = ' M' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n    var i;\r\n    var len;\r\n    len = pathNodes._length;\r\n\r\n    for (i = 1; i < len; i += 1) {\r\n      // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + ' ' + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\r\n    } // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n\r\n\r\n    if (pathNodes.c && len > 1) {\r\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + ' ' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n    } // pathNodes.__renderedString = pathString;\r\n\r\n\r\n    if (viewData.lastPath !== pathString) {\r\n      var pathShapeValue = '';\r\n\r\n      if (viewData.elem) {\r\n        if (pathNodes.c) {\r\n          pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n        }\r\n\r\n        viewData.elem.setAttribute('d', pathShapeValue);\r\n      }\r\n\r\n      viewData.lastPath = pathString;\r\n    }\r\n  };\r\n\r\n  MaskElement.prototype.destroy = function () {\r\n    this.element = null;\r\n    this.globalData = null;\r\n    this.maskElement = null;\r\n    this.data = null;\r\n    this.masksProperties = null;\r\n  };\r\n\r\n  var filtersFactory = function () {\r\n    var ob = {};\r\n    ob.createFilter = createFilter;\r\n    ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n    function createFilter(filId, skipCoordinates) {\r\n      var fil = createNS('filter');\r\n      fil.setAttribute('id', filId);\r\n\r\n      if (skipCoordinates !== true) {\r\n        fil.setAttribute('filterUnits', 'objectBoundingBox');\r\n        fil.setAttribute('x', '0%');\r\n        fil.setAttribute('y', '0%');\r\n        fil.setAttribute('width', '100%');\r\n        fil.setAttribute('height', '100%');\r\n      }\r\n\r\n      return fil;\r\n    }\r\n\r\n    function createAlphaToLuminanceFilter() {\r\n      var feColorMatrix = createNS('feColorMatrix');\r\n      feColorMatrix.setAttribute('type', 'matrix');\r\n      feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n      feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n      return feColorMatrix;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var featureSupport = function () {\r\n    var ob = {\r\n      maskType: true,\r\n      svgLumaHidden: true,\r\n      offscreenCanvas: typeof OffscreenCanvas !== 'undefined'\r\n    };\r\n\r\n    if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n      ob.maskType = false;\r\n    }\r\n\r\n    if (/firefox/i.test(navigator.userAgent)) {\r\n      ob.svgLumaHidden = false;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var registeredEffects = {};\r\n  var idPrefix = 'filter_result_';\r\n\r\n  function SVGEffects(elem) {\r\n    var i;\r\n    var source = 'SourceGraphic';\r\n    var len = elem.data.ef ? elem.data.ef.length : 0;\r\n    var filId = createElementID();\r\n    var fil = filtersFactory.createFilter(filId, true);\r\n    var count = 0;\r\n    this.filters = [];\r\n    var filterManager;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      filterManager = null;\r\n      var type = elem.data.ef[i].ty;\r\n\r\n      if (registeredEffects[type]) {\r\n        var Effect = registeredEffects[type].effect;\r\n        filterManager = new Effect(fil, elem.effectsManager.effectElements[i], elem, idPrefix + count, source);\r\n        source = idPrefix + count;\r\n\r\n        if (registeredEffects[type].countsAsEffect) {\r\n          count += 1;\r\n        }\r\n      }\r\n\r\n      if (filterManager) {\r\n        this.filters.push(filterManager);\r\n      }\r\n    }\r\n\r\n    if (count) {\r\n      elem.globalData.defs.appendChild(fil);\r\n      elem.layerElement.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\r\n    }\r\n\r\n    if (this.filters.length) {\r\n      elem.addRenderableComponent(this);\r\n    }\r\n  }\r\n\r\n  SVGEffects.prototype.renderFrame = function (_isFirstFrame) {\r\n    var i;\r\n    var len = this.filters.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.filters[i].renderFrame(_isFirstFrame);\r\n    }\r\n  };\r\n\r\n  function registerEffect(id, effect, countsAsEffect) {\r\n    registeredEffects[id] = {\r\n      effect: effect,\r\n      countsAsEffect: countsAsEffect\r\n    };\r\n  }\r\n\r\n  function SVGBaseElement() {}\r\n\r\n  SVGBaseElement.prototype = {\r\n    initRendererElement: function initRendererElement() {\r\n      this.layerElement = createNS('g');\r\n    },\r\n    createContainerElements: function createContainerElements() {\r\n      this.matteElement = createNS('g');\r\n      this.transformedElement = this.layerElement;\r\n      this.maskedElement = this.layerElement;\r\n      this._sizeChanged = false;\r\n      var layerElementParent = null; // If this layer acts as a mask for the following layer\r\n\r\n      if (this.data.td) {\r\n        this.matteMasks = {};\r\n        var gg = createNS('g');\r\n        gg.setAttribute('id', this.layerId);\r\n        gg.appendChild(this.layerElement);\r\n        layerElementParent = gg;\r\n        this.globalData.defs.appendChild(gg);\r\n      } else if (this.data.tt) {\r\n        this.matteElement.appendChild(this.layerElement);\r\n        layerElementParent = this.matteElement;\r\n        this.baseElement = this.matteElement;\r\n      } else {\r\n        this.baseElement = this.layerElement;\r\n      }\r\n\r\n      if (this.data.ln) {\r\n        this.layerElement.setAttribute('id', this.data.ln);\r\n      }\r\n\r\n      if (this.data.cl) {\r\n        this.layerElement.setAttribute('class', this.data.cl);\r\n      } // Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n\r\n\r\n      if (this.data.ty === 0 && !this.data.hd) {\r\n        var cp = createNS('clipPath');\r\n        var pt = createNS('path');\r\n        pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0 L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n        var clipId = createElementID();\r\n        cp.setAttribute('id', clipId);\r\n        cp.appendChild(pt);\r\n        this.globalData.defs.appendChild(cp);\r\n\r\n        if (this.checkMasks()) {\r\n          var cpGroup = createNS('g');\r\n          cpGroup.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\r\n          cpGroup.appendChild(this.layerElement);\r\n          this.transformedElement = cpGroup;\r\n\r\n          if (layerElementParent) {\r\n            layerElementParent.appendChild(this.transformedElement);\r\n          } else {\r\n            this.baseElement = this.transformedElement;\r\n          }\r\n        } else {\r\n          this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\r\n        }\r\n      }\r\n\r\n      if (this.data.bm !== 0) {\r\n        this.setBlendMode();\r\n      }\r\n    },\r\n    renderElement: function renderElement() {\r\n      if (this.finalTransform._matMdf) {\r\n        this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\r\n      }\r\n\r\n      if (this.finalTransform._opMdf) {\r\n        this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\r\n      }\r\n    },\r\n    destroyBaseElement: function destroyBaseElement() {\r\n      this.layerElement = null;\r\n      this.matteElement = null;\r\n      this.maskManager.destroy();\r\n    },\r\n    getBaseElement: function getBaseElement() {\r\n      if (this.data.hd) {\r\n        return null;\r\n      }\r\n\r\n      return this.baseElement;\r\n    },\r\n    createRenderableComponents: function createRenderableComponents() {\r\n      this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n      this.renderableEffectsManager = new SVGEffects(this);\r\n    },\r\n    getMatte: function getMatte(matteType) {\r\n      // This should not be a common case. But for backward compatibility, we'll create the matte object.\r\n      // It solves animations that have two consecutive layers marked as matte masks.\r\n      // Which is an undefined behavior in AE.\r\n      if (!this.matteMasks) {\r\n        this.matteMasks = {};\r\n      }\r\n\r\n      if (!this.matteMasks[matteType]) {\r\n        var id = this.layerId + '_' + matteType;\r\n        var filId;\r\n        var fil;\r\n        var useElement;\r\n        var gg;\r\n\r\n        if (matteType === 1 || matteType === 3) {\r\n          var masker = createNS('mask');\r\n          masker.setAttribute('id', id);\r\n          masker.setAttribute('mask-type', matteType === 3 ? 'luminance' : 'alpha');\r\n          useElement = createNS('use');\r\n          useElement.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + this.layerId);\r\n          masker.appendChild(useElement);\r\n          this.globalData.defs.appendChild(masker);\r\n\r\n          if (!featureSupport.maskType && matteType === 1) {\r\n            masker.setAttribute('mask-type', 'luminance');\r\n            filId = createElementID();\r\n            fil = filtersFactory.createFilter(filId);\r\n            this.globalData.defs.appendChild(fil);\r\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n            gg = createNS('g');\r\n            gg.appendChild(useElement);\r\n            masker.appendChild(gg);\r\n            gg.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\r\n          }\r\n        } else if (matteType === 2) {\r\n          var maskGroup = createNS('mask');\r\n          maskGroup.setAttribute('id', id);\r\n          maskGroup.setAttribute('mask-type', 'alpha');\r\n          var maskGrouper = createNS('g');\r\n          maskGroup.appendChild(maskGrouper);\r\n          filId = createElementID();\r\n          fil = filtersFactory.createFilter(filId); /// /\r\n\r\n          var feCTr = createNS('feComponentTransfer');\r\n          feCTr.setAttribute('in', 'SourceGraphic');\r\n          fil.appendChild(feCTr);\r\n          var feFunc = createNS('feFuncA');\r\n          feFunc.setAttribute('type', 'table');\r\n          feFunc.setAttribute('tableValues', '1.0 0.0');\r\n          feCTr.appendChild(feFunc); /// /\r\n\r\n          this.globalData.defs.appendChild(fil);\r\n          var alphaRect = createNS('rect');\r\n          alphaRect.setAttribute('width', this.comp.data.w);\r\n          alphaRect.setAttribute('height', this.comp.data.h);\r\n          alphaRect.setAttribute('x', '0');\r\n          alphaRect.setAttribute('y', '0');\r\n          alphaRect.setAttribute('fill', '#ffffff');\r\n          alphaRect.setAttribute('opacity', '0');\r\n          maskGrouper.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\r\n          maskGrouper.appendChild(alphaRect);\r\n          useElement = createNS('use');\r\n          useElement.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + this.layerId);\r\n          maskGrouper.appendChild(useElement);\r\n\r\n          if (!featureSupport.maskType) {\r\n            maskGroup.setAttribute('mask-type', 'luminance');\r\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n            gg = createNS('g');\r\n            maskGrouper.appendChild(alphaRect);\r\n            gg.appendChild(this.layerElement);\r\n            maskGrouper.appendChild(gg);\r\n          }\r\n\r\n          this.globalData.defs.appendChild(maskGroup);\r\n        }\r\n\r\n        this.matteMasks[matteType] = id;\r\n      }\r\n\r\n      return this.matteMasks[matteType];\r\n    },\r\n    setMatte: function setMatte(id) {\r\n      if (!this.matteElement) {\r\n        return;\r\n      }\r\n\r\n      this.matteElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @file\r\n   * Handles AE's layer parenting property.\r\n   *\r\n   */\r\n  function HierarchyElement() {}\r\n\r\n  HierarchyElement.prototype = {\r\n    /**\r\n       * @function\r\n       * Initializes hierarchy properties\r\n       *\r\n       */\r\n    initHierarchy: function initHierarchy() {\r\n      // element's parent list\r\n      this.hierarchy = []; // if element is parent of another layer _isParent will be true\r\n\r\n      this._isParent = false;\r\n      this.checkParenting();\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Sets layer's hierarchy.\r\n       * @param {array} hierarch\r\n       * layer's parent list\r\n       *\r\n       */\r\n    setHierarchy: function setHierarchy(hierarchy) {\r\n      this.hierarchy = hierarchy;\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Sets layer as parent.\r\n       *\r\n       */\r\n    setAsParent: function setAsParent() {\r\n      this._isParent = true;\r\n    },\r\n\r\n    /**\r\n       * @function\r\n       * Searches layer's parenting chain\r\n       *\r\n       */\r\n    checkParenting: function checkParenting() {\r\n      if (this.data.parent !== undefined) {\r\n        this.comp.buildElementParenting(this, this.data.parent, []);\r\n      }\r\n    }\r\n  };\r\n\r\n  function RenderableDOMElement() {}\r\n\r\n  (function () {\r\n    var _prototype = {\r\n      initElement: function initElement(data, globalData, comp) {\r\n        this.initFrame();\r\n        this.initBaseData(data, globalData, comp);\r\n        this.initTransform(data, globalData, comp);\r\n        this.initHierarchy();\r\n        this.initRenderable();\r\n        this.initRendererElement();\r\n        this.createContainerElements();\r\n        this.createRenderableComponents();\r\n        this.createContent();\r\n        this.hide();\r\n      },\r\n      hide: function hide() {\r\n        // console.log('HIDE', this);\r\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n          var elem = this.baseElement || this.layerElement;\r\n          elem.style.display = 'none';\r\n          this.hidden = true;\r\n        }\r\n      },\r\n      show: function show() {\r\n        // console.log('SHOW', this);\r\n        if (this.isInRange && !this.isTransparent) {\r\n          if (!this.data.hd) {\r\n            var elem = this.baseElement || this.layerElement;\r\n            elem.style.display = 'block';\r\n          }\r\n\r\n          this.hidden = false;\r\n          this._isFirstFrame = true;\r\n        }\r\n      },\r\n      renderFrame: function renderFrame() {\r\n        // If it is exported as hidden (data.hd === true) no need to render\r\n        // If it is not visible no need to render\r\n        if (this.data.hd || this.hidden) {\r\n          return;\r\n        }\r\n\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.renderElement();\r\n        this.renderInnerContent();\r\n\r\n        if (this._isFirstFrame) {\r\n          this._isFirstFrame = false;\r\n        }\r\n      },\r\n      renderInnerContent: function renderInnerContent() {},\r\n      prepareFrame: function prepareFrame(num) {\r\n        this._mdf = false;\r\n        this.prepareRenderableFrame(num);\r\n        this.prepareProperties(num, this.isInRange);\r\n        this.checkTransparency();\r\n      },\r\n      destroy: function destroy() {\r\n        this.innerElem = null;\r\n        this.destroyBaseElement();\r\n      }\r\n    };\r\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n  })();\r\n\r\n  function IImageElement(data, globalData, comp) {\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data, globalData, comp);\r\n    this.sourceRect = {\r\n      top: 0,\r\n      left: 0,\r\n      width: this.assetData.w,\r\n      height: this.assetData.h\r\n    };\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\r\n\r\n  IImageElement.prototype.createContent = function () {\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    this.innerElem = createNS('image');\r\n    this.innerElem.setAttribute('width', this.assetData.w + 'px');\r\n    this.innerElem.setAttribute('height', this.assetData.h + 'px');\r\n    this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\r\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n    this.layerElement.appendChild(this.innerElem);\r\n  };\r\n\r\n  IImageElement.prototype.sourceRectAtTime = function () {\r\n    return this.sourceRect;\r\n  };\r\n\r\n  function ProcessedElement(element, position) {\r\n    this.elem = element;\r\n    this.pos = position;\r\n  }\r\n\r\n  function IShapeElement() {}\r\n\r\n  IShapeElement.prototype = {\r\n    addShapeToModifiers: function addShapeToModifiers(data) {\r\n      var i;\r\n      var len = this.shapeModifiers.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.shapeModifiers[i].addShape(data);\r\n      }\r\n    },\r\n    isShapeInAnimatedModifiers: function isShapeInAnimatedModifiers(data) {\r\n      var i = 0;\r\n      var len = this.shapeModifiers.length;\r\n\r\n      while (i < len) {\r\n        if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    },\r\n    renderModifiers: function renderModifiers() {\r\n      if (!this.shapeModifiers.length) {\r\n        return;\r\n      }\r\n\r\n      var i;\r\n      var len = this.shapes.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.shapes[i].sh.reset();\r\n      }\r\n\r\n      len = this.shapeModifiers.length;\r\n      var shouldBreakProcess;\r\n\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        shouldBreakProcess = this.shapeModifiers[i].processShapes(this._isFirstFrame); // workaround to fix cases where a repeater resets the shape so the following processes get called twice\r\n        // TODO: find a better solution for this\r\n\r\n        if (shouldBreakProcess) {\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    searchProcessedElement: function searchProcessedElement(elem) {\r\n      var elements = this.processedElements;\r\n      var i = 0;\r\n      var len = elements.length;\r\n\r\n      while (i < len) {\r\n        if (elements[i].elem === elem) {\r\n          return elements[i].pos;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      return 0;\r\n    },\r\n    addProcessedElement: function addProcessedElement(elem, pos) {\r\n      var elements = this.processedElements;\r\n      var i = elements.length;\r\n\r\n      while (i) {\r\n        i -= 1;\r\n\r\n        if (elements[i].elem === elem) {\r\n          elements[i].pos = pos;\r\n          return;\r\n        }\r\n      }\r\n\r\n      elements.push(new ProcessedElement(elem, pos));\r\n    },\r\n    prepareFrame: function prepareFrame(num) {\r\n      this.prepareRenderableFrame(num);\r\n      this.prepareProperties(num, this.isInRange);\r\n    }\r\n  };\r\n\r\n  var lineCapEnum = {\r\n    1: 'butt',\r\n    2: 'round',\r\n    3: 'square'\r\n  };\r\n  var lineJoinEnum = {\r\n    1: 'miter',\r\n    2: 'round',\r\n    3: 'bevel'\r\n  };\r\n\r\n  function SVGShapeData(transformers, level, shape) {\r\n    this.caches = [];\r\n    this.styles = [];\r\n    this.transformers = transformers;\r\n    this.lStr = '';\r\n    this.sh = shape;\r\n    this.lvl = level; // TODO find if there are some cases where _isAnimated can be false.\r\n    // For now, since shapes add up with other shapes. They have to be calculated every time.\r\n    // One way of finding out is checking if all styles associated to this shape depend only of this shape\r\n\r\n    this._isAnimated = !!shape.k; // TODO: commenting this for now since all shapes are animated\r\n\r\n    var i = 0;\r\n    var len = transformers.length;\r\n\r\n    while (i < len) {\r\n      if (transformers[i].mProps.dynamicProperties.length) {\r\n        this._isAnimated = true;\r\n        break;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n  }\r\n\r\n  SVGShapeData.prototype.setAsAnimated = function () {\r\n    this._isAnimated = true;\r\n  };\r\n\r\n  function SVGStyleData(data, level) {\r\n    this.data = data;\r\n    this.type = data.ty;\r\n    this.d = '';\r\n    this.lvl = level;\r\n    this._mdf = false;\r\n    this.closed = data.hd === true;\r\n    this.pElem = createNS('path');\r\n    this.msElem = null;\r\n  }\r\n\r\n  SVGStyleData.prototype.reset = function () {\r\n    this.d = '';\r\n    this._mdf = false;\r\n  };\r\n\r\n  function DashProperty(elem, data, renderer, container) {\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.dataProps = createSizedArray(data.length);\r\n    this.renderer = renderer;\r\n    this.k = false;\r\n    this.dashStr = '';\r\n    this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\r\n    this.dashoffset = createTypedArray('float32', 1);\r\n    this.initDynamicPropertyContainer(container);\r\n    var i;\r\n    var len = data.length || 0;\r\n    var prop;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\r\n      this.k = prop.k || this.k;\r\n      this.dataProps[i] = {\r\n        n: data[i].n,\r\n        p: prop\r\n      };\r\n    }\r\n\r\n    if (!this.k) {\r\n      this.getValue(true);\r\n    }\r\n\r\n    this._isAnimated = this.k;\r\n  }\r\n\r\n  DashProperty.prototype.getValue = function (forceRender) {\r\n    if (this.elem.globalData.frameId === this.frameId && !forceRender) {\r\n      return;\r\n    }\r\n\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n    this._mdf = this._mdf || forceRender;\r\n\r\n    if (this._mdf) {\r\n      var i = 0;\r\n      var len = this.dataProps.length;\r\n\r\n      if (this.renderer === 'svg') {\r\n        this.dashStr = '';\r\n      }\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (this.dataProps[i].n !== 'o') {\r\n          if (this.renderer === 'svg') {\r\n            this.dashStr += ' ' + this.dataProps[i].p.v;\r\n          } else {\r\n            this.dashArray[i] = this.dataProps[i].p.v;\r\n          }\r\n        } else {\r\n          this.dashoffset[0] = this.dataProps[i].p.v;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], DashProperty);\r\n\r\n  function SVGStrokeStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n    this.style = styleOb;\r\n    this._isAnimated = !!this._isAnimated;\r\n  }\r\n\r\n  extendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\r\n\r\n  function SVGFillStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n    this.style = styleOb;\r\n  }\r\n\r\n  extendPrototype([DynamicPropertyContainer], SVGFillStyleData);\r\n\r\n  function SVGNoStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.style = styleOb;\r\n  }\r\n\r\n  extendPrototype([DynamicPropertyContainer], SVGNoStyleData);\r\n\r\n  function GradientProperty(elem, data, container) {\r\n    this.data = data;\r\n    this.c = createTypedArray('uint8c', data.p * 4);\r\n    var cLength = data.k.k[0].s ? data.k.k[0].s.length - data.p * 4 : data.k.k.length - data.p * 4;\r\n    this.o = createTypedArray('float32', cLength);\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    this._collapsable = this.checkCollapsable();\r\n    this._hasOpacity = cLength;\r\n    this.initDynamicPropertyContainer(container);\r\n    this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\r\n    this.k = this.prop.k;\r\n    this.getValue(true);\r\n  }\r\n\r\n  GradientProperty.prototype.comparePoints = function (values, points) {\r\n    var i = 0;\r\n    var len = this.o.length / 2;\r\n    var diff;\r\n\r\n    while (i < len) {\r\n      diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\r\n\r\n      if (diff > 0.01) {\r\n        return false;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  GradientProperty.prototype.checkCollapsable = function () {\r\n    if (this.o.length / 2 !== this.c.length / 4) {\r\n      return false;\r\n    }\r\n\r\n    if (this.data.k.k[0].s) {\r\n      var i = 0;\r\n      var len = this.data.k.k.length;\r\n\r\n      while (i < len) {\r\n        if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n          return false;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n    } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  GradientProperty.prototype.getValue = function (forceRender) {\r\n    this.prop.getValue();\r\n    this._mdf = false;\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n\r\n    if (this.prop._mdf || forceRender) {\r\n      var i;\r\n      var len = this.data.p * 4;\r\n      var mult;\r\n      var val;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        mult = i % 4 === 0 ? 100 : 255;\r\n        val = Math.round(this.prop.v[i] * mult);\r\n\r\n        if (this.c[i] !== val) {\r\n          this.c[i] = val;\r\n          this._cmdf = !forceRender;\r\n        }\r\n      }\r\n\r\n      if (this.o.length) {\r\n        len = this.prop.v.length;\r\n\r\n        for (i = this.data.p * 4; i < len; i += 1) {\r\n          mult = i % 2 === 0 ? 100 : 1;\r\n          val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\r\n\r\n          if (this.o[i - this.data.p * 4] !== val) {\r\n            this.o[i - this.data.p * 4] = val;\r\n            this._omdf = !forceRender;\r\n          }\r\n        }\r\n      }\r\n\r\n      this._mdf = !forceRender;\r\n    }\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], GradientProperty);\r\n\r\n  function SVGGradientFillStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.initGradientData(elem, data, styleOb);\r\n  }\r\n\r\n  SVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n    this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\r\n    this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\r\n    this.h = PropertyFactory.getProp(elem, data.h || {\r\n      k: 0\r\n    }, 0, 0.01, this);\r\n    this.a = PropertyFactory.getProp(elem, data.a || {\r\n      k: 0\r\n    }, 0, degToRads, this);\r\n    this.g = new GradientProperty(elem, data.g, this);\r\n    this.style = styleOb;\r\n    this.stops = [];\r\n    this.setGradientData(styleOb.pElem, data);\r\n    this.setGradientOpacity(data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n  };\r\n\r\n  SVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\r\n    var gradientId = createElementID();\r\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    gfill.setAttribute('id', gradientId);\r\n    gfill.setAttribute('spreadMethod', 'pad');\r\n    gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n    var stops = [];\r\n    var stop;\r\n    var j;\r\n    var jLen;\r\n    jLen = data.g.p * 4;\r\n\r\n    for (j = 0; j < jLen; j += 4) {\r\n      stop = createNS('stop');\r\n      gfill.appendChild(stop);\r\n      stops.push(stop);\r\n    }\r\n\r\n    pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + gradientId + ')');\r\n    this.gf = gfill;\r\n    this.cst = stops;\r\n  };\r\n\r\n  SVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\r\n    if (this.g._hasOpacity && !this.g._collapsable) {\r\n      var stop;\r\n      var j;\r\n      var jLen;\r\n      var mask = createNS('mask');\r\n      var maskElement = createNS('path');\r\n      mask.appendChild(maskElement);\r\n      var opacityId = createElementID();\r\n      var maskId = createElementID();\r\n      mask.setAttribute('id', maskId);\r\n      var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n      opFill.setAttribute('id', opacityId);\r\n      opFill.setAttribute('spreadMethod', 'pad');\r\n      opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n      jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n      var stops = this.stops;\r\n\r\n      for (j = data.g.p * 4; j < jLen; j += 2) {\r\n        stop = createNS('stop');\r\n        stop.setAttribute('stop-color', 'rgb(255,255,255)');\r\n        opFill.appendChild(stop);\r\n        stops.push(stop);\r\n      }\r\n\r\n      maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + opacityId + ')');\r\n\r\n      if (data.ty === 'gs') {\r\n        maskElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\r\n        maskElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\r\n\r\n        if (data.lj === 1) {\r\n          maskElement.setAttribute('stroke-miterlimit', data.ml);\r\n        }\r\n      }\r\n\r\n      this.of = opFill;\r\n      this.ms = mask;\r\n      this.ost = stops;\r\n      this.maskId = maskId;\r\n      styleOb.msElem = maskElement;\r\n    }\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\r\n\r\n  function SVGGradientStrokeStyleData(elem, data, styleOb) {\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n    this.initGradientData(elem, data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n  }\r\n\r\n  extendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\r\n\r\n  function ShapeGroupData() {\r\n    this.it = [];\r\n    this.prevViewData = [];\r\n    this.gr = createNS('g');\r\n  }\r\n\r\n  function SVGTransformData(mProps, op, container) {\r\n    this.transform = {\r\n      mProps: mProps,\r\n      op: op,\r\n      container: container\r\n    };\r\n    this.elements = [];\r\n    this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\r\n  }\r\n\r\n  var buildShapeString = function buildShapeString(pathNodes, length, closed, mat) {\r\n    if (length === 0) {\r\n      return '';\r\n    }\r\n\r\n    var _o = pathNodes.o;\r\n    var _i = pathNodes.i;\r\n    var _v = pathNodes.v;\r\n    var i;\r\n    var shapeString = ' M' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n\r\n    for (i = 1; i < length; i += 1) {\r\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[i][0], _i[i][1]) + ' ' + mat.applyToPointStringified(_v[i][0], _v[i][1]);\r\n    }\r\n\r\n    if (closed && length) {\r\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[0][0], _i[0][1]) + ' ' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n      shapeString += 'z';\r\n    }\r\n\r\n    return shapeString;\r\n  };\r\n\r\n  var SVGElementsRenderer = function () {\r\n    var _identityMatrix = new Matrix();\r\n\r\n    var _matrixHelper = new Matrix();\r\n\r\n    var ob = {\r\n      createRenderFunction: createRenderFunction\r\n    };\r\n\r\n    function createRenderFunction(data) {\r\n      switch (data.ty) {\r\n        case 'fl':\r\n          return renderFill;\r\n\r\n        case 'gf':\r\n          return renderGradient;\r\n\r\n        case 'gs':\r\n          return renderGradientStroke;\r\n\r\n        case 'st':\r\n          return renderStroke;\r\n\r\n        case 'sh':\r\n        case 'el':\r\n        case 'rc':\r\n        case 'sr':\r\n          return renderPath;\r\n\r\n        case 'tr':\r\n          return renderContentTransform;\r\n\r\n        case 'no':\r\n          return renderNoop;\r\n\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n\r\n    function renderContentTransform(styleData, itemData, isFirstFrame) {\r\n      if (isFirstFrame || itemData.transform.op._mdf) {\r\n        itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\r\n      }\r\n\r\n      if (isFirstFrame || itemData.transform.mProps._mdf) {\r\n        itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\r\n      }\r\n    }\r\n\r\n    function renderNoop() {}\r\n\r\n    function renderPath(styleData, itemData, isFirstFrame) {\r\n      var j;\r\n      var jLen;\r\n      var pathStringTransformed;\r\n      var redraw;\r\n      var pathNodes;\r\n      var l;\r\n      var lLen = itemData.styles.length;\r\n      var lvl = itemData.lvl;\r\n      var paths;\r\n      var mat;\r\n      var props;\r\n      var iterations;\r\n      var k;\r\n\r\n      for (l = 0; l < lLen; l += 1) {\r\n        redraw = itemData.sh._mdf || isFirstFrame;\r\n\r\n        if (itemData.styles[l].lvl < lvl) {\r\n          mat = _matrixHelper.reset();\r\n          iterations = lvl - itemData.styles[l].lvl;\r\n          k = itemData.transformers.length - 1;\r\n\r\n          while (!redraw && iterations > 0) {\r\n            redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n            iterations -= 1;\r\n            k -= 1;\r\n          }\r\n\r\n          if (redraw) {\r\n            iterations = lvl - itemData.styles[l].lvl;\r\n            k = itemData.transformers.length - 1;\r\n\r\n            while (iterations > 0) {\r\n              props = itemData.transformers[k].mProps.v.props;\r\n              mat.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\r\n              iterations -= 1;\r\n              k -= 1;\r\n            }\r\n          }\r\n        } else {\r\n          mat = _identityMatrix;\r\n        }\r\n\r\n        paths = itemData.sh.paths;\r\n        jLen = paths._length;\r\n\r\n        if (redraw) {\r\n          pathStringTransformed = '';\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            pathNodes = paths.shapes[j];\r\n\r\n            if (pathNodes && pathNodes._length) {\r\n              pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n            }\r\n          }\r\n\r\n          itemData.caches[l] = pathStringTransformed;\r\n        } else {\r\n          pathStringTransformed = itemData.caches[l];\r\n        }\r\n\r\n        itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\r\n        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n      }\r\n    }\r\n\r\n    function renderFill(styleData, itemData, isFirstFrame) {\r\n      var styleElem = itemData.style;\r\n\r\n      if (itemData.c._mdf || isFirstFrame) {\r\n        styleElem.pElem.setAttribute('fill', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n      }\r\n\r\n      if (itemData.o._mdf || isFirstFrame) {\r\n        styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\r\n      }\r\n    }\r\n\r\n    function renderGradientStroke(styleData, itemData, isFirstFrame) {\r\n      renderGradient(styleData, itemData, isFirstFrame);\r\n      renderStroke(styleData, itemData, isFirstFrame);\r\n    }\r\n\r\n    function renderGradient(styleData, itemData, isFirstFrame) {\r\n      var gfill = itemData.gf;\r\n      var hasOpacity = itemData.g._hasOpacity;\r\n      var pt1 = itemData.s.v;\r\n      var pt2 = itemData.e.v;\r\n\r\n      if (itemData.o._mdf || isFirstFrame) {\r\n        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n        itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n      }\r\n\r\n      if (itemData.s._mdf || isFirstFrame) {\r\n        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n        gfill.setAttribute(attr1, pt1[0]);\r\n        gfill.setAttribute(attr2, pt1[1]);\r\n\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute(attr1, pt1[0]);\r\n          itemData.of.setAttribute(attr2, pt1[1]);\r\n        }\r\n      }\r\n\r\n      var stops;\r\n      var i;\r\n      var len;\r\n      var stop;\r\n\r\n      if (itemData.g._cmdf || isFirstFrame) {\r\n        stops = itemData.cst;\r\n        var cValues = itemData.g.c;\r\n        len = stops.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          stop = stops[i];\r\n          stop.setAttribute('offset', cValues[i * 4] + '%');\r\n          stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\r\n        }\r\n      }\r\n\r\n      if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\r\n        var oValues = itemData.g.o;\r\n\r\n        if (itemData.g._collapsable) {\r\n          stops = itemData.cst;\r\n        } else {\r\n          stops = itemData.ost;\r\n        }\r\n\r\n        len = stops.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          stop = stops[i];\r\n\r\n          if (!itemData.g._collapsable) {\r\n            stop.setAttribute('offset', oValues[i * 2] + '%');\r\n          }\r\n\r\n          stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n        }\r\n      }\r\n\r\n      if (styleData.t === 1) {\r\n        if (itemData.e._mdf || isFirstFrame) {\r\n          gfill.setAttribute('x2', pt2[0]);\r\n          gfill.setAttribute('y2', pt2[1]);\r\n\r\n          if (hasOpacity && !itemData.g._collapsable) {\r\n            itemData.of.setAttribute('x2', pt2[0]);\r\n            itemData.of.setAttribute('y2', pt2[1]);\r\n          }\r\n        }\r\n      } else {\r\n        var rad;\r\n\r\n        if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\r\n          rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n          gfill.setAttribute('r', rad);\r\n\r\n          if (hasOpacity && !itemData.g._collapsable) {\r\n            itemData.of.setAttribute('r', rad);\r\n          }\r\n        }\r\n\r\n        if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\r\n          if (!rad) {\r\n            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n          }\r\n\r\n          var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n          var percent = itemData.h.v;\r\n\r\n          if (percent >= 1) {\r\n            percent = 0.99;\r\n          } else if (percent <= -1) {\r\n            percent = -0.99;\r\n          }\r\n\r\n          var dist = rad * percent;\r\n          var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n          var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n          gfill.setAttribute('fx', x);\r\n          gfill.setAttribute('fy', y);\r\n\r\n          if (hasOpacity && !itemData.g._collapsable) {\r\n            itemData.of.setAttribute('fx', x);\r\n            itemData.of.setAttribute('fy', y);\r\n          }\r\n        } // gfill.setAttribute('fy','200');\r\n\r\n      }\r\n    }\r\n\r\n    function renderStroke(styleData, itemData, isFirstFrame) {\r\n      var styleElem = itemData.style;\r\n      var d = itemData.d;\r\n\r\n      if (d && (d._mdf || isFirstFrame) && d.dashStr) {\r\n        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n      }\r\n\r\n      if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\r\n        styleElem.pElem.setAttribute('stroke', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n      }\r\n\r\n      if (itemData.o._mdf || isFirstFrame) {\r\n        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n      }\r\n\r\n      if (itemData.w._mdf || isFirstFrame) {\r\n        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n\r\n        if (styleElem.msElem) {\r\n          styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n        }\r\n      }\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  function SVGShapeElement(data, globalData, comp) {\r\n    // List of drawable elements\r\n    this.shapes = []; // Full shape data\r\n\r\n    this.shapesData = data.shapes; // List of styles that will be applied to shapes\r\n\r\n    this.stylesList = []; // List of modifiers that will be applied to shapes\r\n\r\n    this.shapeModifiers = []; // List of items in shape tree\r\n\r\n    this.itemsData = []; // List of items in previous shape tree\r\n\r\n    this.processedElements = []; // List of animated components\r\n\r\n    this.animatedContents = [];\r\n    this.initElement(data, globalData, comp); // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n\r\n    this.prevViewData = []; // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\r\n\r\n  SVGShapeElement.prototype.initSecondaryElement = function () {};\r\n\r\n  SVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\n  SVGShapeElement.prototype.buildExpressionInterface = function () {};\r\n\r\n  SVGShapeElement.prototype.createContent = function () {\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n  };\r\n  /*\r\n  This method searches for multiple shapes that affect a single element and one of them is animated\r\n  */\r\n\r\n\r\n  SVGShapeElement.prototype.filterUniqueShapes = function () {\r\n    var i;\r\n    var len = this.shapes.length;\r\n    var shape;\r\n    var j;\r\n    var jLen = this.stylesList.length;\r\n    var style;\r\n    var tempShapes = [];\r\n    var areAnimated = false;\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      style = this.stylesList[j];\r\n      areAnimated = false;\r\n      tempShapes.length = 0;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        shape = this.shapes[i];\r\n\r\n        if (shape.styles.indexOf(style) !== -1) {\r\n          tempShapes.push(shape);\r\n          areAnimated = shape._isAnimated || areAnimated;\r\n        }\r\n      }\r\n\r\n      if (tempShapes.length > 1 && areAnimated) {\r\n        this.setShapesAsAnimated(tempShapes);\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\r\n    var i;\r\n    var len = shapes.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      shapes[i].setAsAnimated();\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.createStyleElement = function (data, level) {\r\n    // TODO: prevent drawing of hidden styles\r\n    var elementData;\r\n    var styleOb = new SVGStyleData(data, level);\r\n    var pathElement = styleOb.pElem;\r\n\r\n    if (data.ty === 'st') {\r\n      elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n    } else if (data.ty === 'fl') {\r\n      elementData = new SVGFillStyleData(this, data, styleOb);\r\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n      var GradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n      elementData = new GradientConstructor(this, data, styleOb);\r\n      this.globalData.defs.appendChild(elementData.gf);\r\n\r\n      if (elementData.maskId) {\r\n        this.globalData.defs.appendChild(elementData.ms);\r\n        this.globalData.defs.appendChild(elementData.of);\r\n        pathElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + elementData.maskId + ')');\r\n      }\r\n    } else if (data.ty === 'no') {\r\n      elementData = new SVGNoStyleData(this, data, styleOb);\r\n    }\r\n\r\n    if (data.ty === 'st' || data.ty === 'gs') {\r\n      pathElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\r\n      pathElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\r\n      pathElement.setAttribute('fill-opacity', '0');\r\n\r\n      if (data.lj === 1) {\r\n        pathElement.setAttribute('stroke-miterlimit', data.ml);\r\n      }\r\n    }\r\n\r\n    if (data.r === 2) {\r\n      pathElement.setAttribute('fill-rule', 'evenodd');\r\n    }\r\n\r\n    if (data.ln) {\r\n      pathElement.setAttribute('id', data.ln);\r\n    }\r\n\r\n    if (data.cl) {\r\n      pathElement.setAttribute('class', data.cl);\r\n    }\r\n\r\n    if (data.bm) {\r\n      pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n\r\n    this.stylesList.push(styleOb);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n  };\r\n\r\n  SVGShapeElement.prototype.createGroupElement = function (data) {\r\n    var elementData = new ShapeGroupData();\r\n\r\n    if (data.ln) {\r\n      elementData.gr.setAttribute('id', data.ln);\r\n    }\r\n\r\n    if (data.cl) {\r\n      elementData.gr.setAttribute('class', data.cl);\r\n    }\r\n\r\n    if (data.bm) {\r\n      elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n\r\n    return elementData;\r\n  };\r\n\r\n  SVGShapeElement.prototype.createTransformElement = function (data, container) {\r\n    var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\r\n    var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n  };\r\n\r\n  SVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\r\n    var ty = 4;\r\n\r\n    if (data.ty === 'rc') {\r\n      ty = 5;\r\n    } else if (data.ty === 'el') {\r\n      ty = 6;\r\n    } else if (data.ty === 'sr') {\r\n      ty = 7;\r\n    }\r\n\r\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\r\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n  };\r\n\r\n  SVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\r\n    var i = 0;\r\n    var len = this.animatedContents.length;\r\n\r\n    while (i < len) {\r\n      if (this.animatedContents[i].element === element) {\r\n        return;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    this.animatedContents.push({\r\n      fn: SVGElementsRenderer.createRenderFunction(data),\r\n      element: element,\r\n      data: data\r\n    });\r\n  };\r\n\r\n  SVGShapeElement.prototype.setElementStyles = function (elementData) {\r\n    var arr = elementData.styles;\r\n    var j;\r\n    var jLen = this.stylesList.length;\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      if (!this.stylesList[j].closed) {\r\n        arr.push(this.stylesList[j]);\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.reloadShapes = function () {\r\n    this._isFirstFrame = true;\r\n    var i;\r\n    var len = this.itemsData.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n    len = this.dynamicProperties.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.dynamicProperties[i].getValue();\r\n    }\r\n\r\n    this.renderModifiers();\r\n  };\r\n\r\n  SVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\r\n    var ownTransformers = [].concat(transformers);\r\n    var i;\r\n    var len = arr.length - 1;\r\n    var j;\r\n    var jLen;\r\n    var ownStyles = [];\r\n    var ownModifiers = [];\r\n    var currentTransform;\r\n    var modifier;\r\n    var processedPos;\r\n\r\n    for (i = len; i >= 0; i -= 1) {\r\n      processedPos = this.searchProcessedElement(arr[i]);\r\n\r\n      if (!processedPos) {\r\n        arr[i]._render = render;\r\n      } else {\r\n        itemsData[i] = prevViewData[processedPos - 1];\r\n      }\r\n\r\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs' || arr[i].ty === 'no') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createStyleElement(arr[i], level);\r\n        } else {\r\n          itemsData[i].style.closed = false;\r\n        }\r\n\r\n        if (arr[i]._render) {\r\n          if (itemsData[i].style.pElem.parentNode !== container) {\r\n            container.appendChild(itemsData[i].style.pElem);\r\n          }\r\n        }\r\n\r\n        ownStyles.push(itemsData[i].style);\r\n      } else if (arr[i].ty === 'gr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createGroupElement(arr[i]);\r\n        } else {\r\n          jLen = itemsData[i].it.length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n          }\r\n        }\r\n\r\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\r\n\r\n        if (arr[i]._render) {\r\n          if (itemsData[i].gr.parentNode !== container) {\r\n            container.appendChild(itemsData[i].gr);\r\n          }\r\n        }\r\n      } else if (arr[i].ty === 'tr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createTransformElement(arr[i], container);\r\n        }\r\n\r\n        currentTransform = itemsData[i].transform;\r\n        ownTransformers.push(currentTransform);\r\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n        }\r\n\r\n        this.setElementStyles(itemsData[i]);\r\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'ms' || arr[i].ty === 'pb' || arr[i].ty === 'zz' || arr[i].ty === 'op') {\r\n        if (!processedPos) {\r\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n          modifier.init(this, arr[i]);\r\n          itemsData[i] = modifier;\r\n          this.shapeModifiers.push(modifier);\r\n        } else {\r\n          modifier = itemsData[i];\r\n          modifier.closed = false;\r\n        }\r\n\r\n        ownModifiers.push(modifier);\r\n      } else if (arr[i].ty === 'rp') {\r\n        if (!processedPos) {\r\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n          itemsData[i] = modifier;\r\n          modifier.init(this, arr, i, itemsData);\r\n          this.shapeModifiers.push(modifier);\r\n          render = false;\r\n        } else {\r\n          modifier = itemsData[i];\r\n          modifier.closed = true;\r\n        }\r\n\r\n        ownModifiers.push(modifier);\r\n      }\r\n\r\n      this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n\r\n    len = ownStyles.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      ownStyles[i].closed = true;\r\n    }\r\n\r\n    len = ownModifiers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      ownModifiers[i].closed = true;\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.renderInnerContent = function () {\r\n    this.renderModifiers();\r\n    var i;\r\n    var len = this.stylesList.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.stylesList[i].reset();\r\n    }\r\n\r\n    this.renderShape();\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n        if (this.stylesList[i].msElem) {\r\n          this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d); // Adding M0 0 fixes same mask bug on all browsers\r\n\r\n          this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n        }\r\n\r\n        this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.renderShape = function () {\r\n    var i;\r\n    var len = this.animatedContents.length;\r\n    var animatedContent;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      animatedContent = this.animatedContents[i];\r\n\r\n      if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\r\n        animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGShapeElement.prototype.destroy = function () {\r\n    this.destroyBaseElement();\r\n    this.shapesData = null;\r\n    this.itemsData = null;\r\n  };\r\n\r\n  function LetterProps(o, sw, sc, fc, m, p) {\r\n    this.o = o;\r\n    this.sw = sw;\r\n    this.sc = sc;\r\n    this.fc = fc;\r\n    this.m = m;\r\n    this.p = p;\r\n    this._mdf = {\r\n      o: true,\r\n      sw: !!sw,\r\n      sc: !!sc,\r\n      fc: !!fc,\r\n      m: true,\r\n      p: true\r\n    };\r\n  }\r\n\r\n  LetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\r\n    this._mdf.o = false;\r\n    this._mdf.sw = false;\r\n    this._mdf.sc = false;\r\n    this._mdf.fc = false;\r\n    this._mdf.m = false;\r\n    this._mdf.p = false;\r\n    var updated = false;\r\n\r\n    if (this.o !== o) {\r\n      this.o = o;\r\n      this._mdf.o = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (this.sw !== sw) {\r\n      this.sw = sw;\r\n      this._mdf.sw = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (this.sc !== sc) {\r\n      this.sc = sc;\r\n      this._mdf.sc = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (this.fc !== fc) {\r\n      this.fc = fc;\r\n      this._mdf.fc = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (this.m !== m) {\r\n      this.m = m;\r\n      this._mdf.m = true;\r\n      updated = true;\r\n    }\r\n\r\n    if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n      this.p = p;\r\n      this._mdf.p = true;\r\n      updated = true;\r\n    }\r\n\r\n    return updated;\r\n  };\r\n\r\n  function TextProperty(elem, data) {\r\n    this._frameId = initialDefaultFrame;\r\n    this.pv = '';\r\n    this.v = '';\r\n    this.kf = false;\r\n    this._isFirstFrame = true;\r\n    this._mdf = false;\r\n    this.data = data;\r\n    this.elem = elem;\r\n    this.comp = this.elem.comp;\r\n    this.keysIndex = 0;\r\n    this.canResize = false;\r\n    this.minimumFontSize = 1;\r\n    this.effectsSequence = [];\r\n    this.currentData = {\r\n      ascent: 0,\r\n      boxWidth: this.defaultBoxWidth,\r\n      f: '',\r\n      fStyle: '',\r\n      fWeight: '',\r\n      fc: '',\r\n      j: '',\r\n      justifyOffset: '',\r\n      l: [],\r\n      lh: 0,\r\n      lineWidths: [],\r\n      ls: '',\r\n      of: '',\r\n      s: '',\r\n      sc: '',\r\n      sw: 0,\r\n      t: 0,\r\n      tr: 0,\r\n      sz: 0,\r\n      ps: null,\r\n      fillColorAnim: false,\r\n      strokeColorAnim: false,\r\n      strokeWidthAnim: false,\r\n      yOffset: 0,\r\n      finalSize: 0,\r\n      finalText: [],\r\n      finalLineHeight: 0,\r\n      __complete: false\r\n    };\r\n    this.copyData(this.currentData, this.data.d.k[0].s);\r\n\r\n    if (!this.searchProperty()) {\r\n      this.completeTextData(this.currentData);\r\n    }\r\n  }\r\n\r\n  TextProperty.prototype.defaultBoxWidth = [0, 0];\r\n\r\n  TextProperty.prototype.copyData = function (obj, data) {\r\n    for (var s in data) {\r\n      if (Object.prototype.hasOwnProperty.call(data, s)) {\r\n        obj[s] = data[s];\r\n      }\r\n    }\r\n\r\n    return obj;\r\n  };\r\n\r\n  TextProperty.prototype.setCurrentData = function (data) {\r\n    if (!data.__complete) {\r\n      this.completeTextData(data);\r\n    }\r\n\r\n    this.currentData = data;\r\n    this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n    this._mdf = true;\r\n  };\r\n\r\n  TextProperty.prototype.searchProperty = function () {\r\n    return this.searchKeyframes();\r\n  };\r\n\r\n  TextProperty.prototype.searchKeyframes = function () {\r\n    this.kf = this.data.d.k.length > 1;\r\n\r\n    if (this.kf) {\r\n      this.addEffect(this.getKeyframeValue.bind(this));\r\n    }\r\n\r\n    return this.kf;\r\n  };\r\n\r\n  TextProperty.prototype.addEffect = function (effectFunction) {\r\n    this.effectsSequence.push(effectFunction);\r\n    this.elem.addDynamicProperty(this);\r\n  };\r\n\r\n  TextProperty.prototype.getValue = function (_finalValue) {\r\n    if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n      return;\r\n    }\r\n\r\n    this.currentData.t = this.data.d.k[this.keysIndex].s.t;\r\n    var currentValue = this.currentData;\r\n    var currentIndex = this.keysIndex;\r\n\r\n    if (this.lock) {\r\n      this.setCurrentData(this.currentData);\r\n      return;\r\n    }\r\n\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var i;\r\n    var len = this.effectsSequence.length;\r\n    var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      // Checking if index changed to prevent creating a new object every time the expression updates.\r\n      if (currentIndex !== this.keysIndex) {\r\n        finalValue = this.effectsSequence[i](finalValue, finalValue.t);\r\n      } else {\r\n        finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\r\n      }\r\n    }\r\n\r\n    if (currentValue !== finalValue) {\r\n      this.setCurrentData(finalValue);\r\n    }\r\n\r\n    this.v = this.currentData;\r\n    this.pv = this.v;\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n  };\r\n\r\n  TextProperty.prototype.getKeyframeValue = function () {\r\n    var textKeys = this.data.d.k;\r\n    var frameNum = this.elem.comp.renderedFrame;\r\n    var i = 0;\r\n    var len = textKeys.length;\r\n\r\n    while (i <= len - 1) {\r\n      if (i === len - 1 || textKeys[i + 1].t > frameNum) {\r\n        break;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    if (this.keysIndex !== i) {\r\n      this.keysIndex = i;\r\n    }\r\n\r\n    return this.data.d.k[this.keysIndex].s;\r\n  };\r\n\r\n  TextProperty.prototype.buildFinalText = function (text) {\r\n    var charactersArray = [];\r\n    var i = 0;\r\n    var len = text.length;\r\n    var charCode;\r\n    var secondCharCode;\r\n    var shouldCombine = false;\r\n\r\n    while (i < len) {\r\n      charCode = text.charCodeAt(i);\r\n\r\n      if (FontManager.isCombinedCharacter(charCode)) {\r\n        charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n      } else if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n        secondCharCode = text.charCodeAt(i + 1);\r\n\r\n        if (secondCharCode >= 0xDC00 && secondCharCode <= 0xDFFF) {\r\n          if (shouldCombine || FontManager.isModifier(charCode, secondCharCode)) {\r\n            charactersArray[charactersArray.length - 1] += text.substr(i, 2);\r\n            shouldCombine = false;\r\n          } else {\r\n            charactersArray.push(text.substr(i, 2));\r\n          }\r\n\r\n          i += 1;\r\n        } else {\r\n          charactersArray.push(text.charAt(i));\r\n        }\r\n      } else if (charCode > 0xDBFF) {\r\n        secondCharCode = text.charCodeAt(i + 1);\r\n\r\n        if (FontManager.isZeroWidthJoiner(charCode, secondCharCode)) {\r\n          shouldCombine = true;\r\n          charactersArray[charactersArray.length - 1] += text.substr(i, 2);\r\n          i += 1;\r\n        } else {\r\n          charactersArray.push(text.charAt(i));\r\n        }\r\n      } else if (FontManager.isZeroWidthJoiner(charCode)) {\r\n        charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n        shouldCombine = true;\r\n      } else {\r\n        charactersArray.push(text.charAt(i));\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return charactersArray;\r\n  };\r\n\r\n  TextProperty.prototype.completeTextData = function (documentData) {\r\n    documentData.__complete = true;\r\n    var fontManager = this.elem.globalData.fontManager;\r\n    var data = this.data;\r\n    var letters = [];\r\n    var i;\r\n    var len;\r\n    var newLineFlag;\r\n    var index = 0;\r\n    var val;\r\n    var anchorGrouping = data.m.g;\r\n    var currentSize = 0;\r\n    var currentPos = 0;\r\n    var currentLine = 0;\r\n    var lineWidths = [];\r\n    var lineWidth = 0;\r\n    var maxLineWidth = 0;\r\n    var j;\r\n    var jLen;\r\n    var fontData = fontManager.getFontByName(documentData.f);\r\n    var charData;\r\n    var cLength = 0;\r\n    var fontProps = getFontProperties(fontData);\r\n    documentData.fWeight = fontProps.weight;\r\n    documentData.fStyle = fontProps.style;\r\n    documentData.finalSize = documentData.s;\r\n    documentData.finalText = this.buildFinalText(documentData.t);\r\n    len = documentData.finalText.length;\r\n    documentData.finalLineHeight = documentData.lh;\r\n    var trackingOffset = documentData.tr / 1000 * documentData.finalSize;\r\n    var charCode;\r\n\r\n    if (documentData.sz) {\r\n      var flag = true;\r\n      var boxWidth = documentData.sz[0];\r\n      var boxHeight = documentData.sz[1];\r\n      var currentHeight;\r\n      var finalText;\r\n\r\n      while (flag) {\r\n        finalText = this.buildFinalText(documentData.t);\r\n        currentHeight = 0;\r\n        lineWidth = 0;\r\n        len = finalText.length;\r\n        trackingOffset = documentData.tr / 1000 * documentData.finalSize;\r\n        var lastSpaceIndex = -1;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          charCode = finalText[i].charCodeAt(0);\r\n          newLineFlag = false;\r\n\r\n          if (finalText[i] === ' ') {\r\n            lastSpaceIndex = i;\r\n          } else if (charCode === 13 || charCode === 3) {\r\n            lineWidth = 0;\r\n            newLineFlag = true;\r\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n          }\r\n\r\n          if (fontManager.chars) {\r\n            charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n            cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\r\n          } else {\r\n            // tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n            cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n          }\r\n\r\n          if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\r\n            if (lastSpaceIndex === -1) {\r\n              len += 1;\r\n            } else {\r\n              i = lastSpaceIndex;\r\n            }\r\n\r\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n            finalText.splice(i, lastSpaceIndex === i ? 1 : 0, '\\r'); // finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n\r\n            lastSpaceIndex = -1;\r\n            lineWidth = 0;\r\n          } else {\r\n            lineWidth += cLength;\r\n            lineWidth += trackingOffset;\r\n          }\r\n        }\r\n\r\n        currentHeight += fontData.ascent * documentData.finalSize / 100;\r\n\r\n        if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n          documentData.finalSize -= 1;\r\n          documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\r\n        } else {\r\n          documentData.finalText = finalText;\r\n          len = documentData.finalText.length;\r\n          flag = false;\r\n        }\r\n      }\r\n    }\r\n\r\n    lineWidth = -trackingOffset;\r\n    cLength = 0;\r\n    var uncollapsedSpaces = 0;\r\n    var currentChar;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      newLineFlag = false;\r\n      currentChar = documentData.finalText[i];\r\n      charCode = currentChar.charCodeAt(0);\r\n\r\n      if (charCode === 13 || charCode === 3) {\r\n        uncollapsedSpaces = 0;\r\n        lineWidths.push(lineWidth);\r\n        maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n        lineWidth = -2 * trackingOffset;\r\n        val = '';\r\n        newLineFlag = true;\r\n        currentLine += 1;\r\n      } else {\r\n        val = currentChar;\r\n      }\r\n\r\n      if (fontManager.chars) {\r\n        charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n        cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\r\n      } else {\r\n        // var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n        // tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n        cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n      } //\r\n\r\n\r\n      if (currentChar === ' ') {\r\n        uncollapsedSpaces += cLength + trackingOffset;\r\n      } else {\r\n        lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n        uncollapsedSpaces = 0;\r\n      }\r\n\r\n      letters.push({\r\n        l: cLength,\r\n        an: cLength,\r\n        add: currentSize,\r\n        n: newLineFlag,\r\n        anIndexes: [],\r\n        val: val,\r\n        line: currentLine,\r\n        animatorJustifyOffset: 0\r\n      });\r\n\r\n      if (anchorGrouping == 2) {\r\n        // eslint-disable-line eqeqeq\r\n        currentSize += cLength;\r\n\r\n        if (val === '' || val === ' ' || i === len - 1) {\r\n          if (val === '' || val === ' ') {\r\n            currentSize -= cLength;\r\n          }\r\n\r\n          while (currentPos <= i) {\r\n            letters[currentPos].an = currentSize;\r\n            letters[currentPos].ind = index;\r\n            letters[currentPos].extra = cLength;\r\n            currentPos += 1;\r\n          }\r\n\r\n          index += 1;\r\n          currentSize = 0;\r\n        }\r\n      } else if (anchorGrouping == 3) {\r\n        // eslint-disable-line eqeqeq\r\n        currentSize += cLength;\r\n\r\n        if (val === '' || i === len - 1) {\r\n          if (val === '') {\r\n            currentSize -= cLength;\r\n          }\r\n\r\n          while (currentPos <= i) {\r\n            letters[currentPos].an = currentSize;\r\n            letters[currentPos].ind = index;\r\n            letters[currentPos].extra = cLength;\r\n            currentPos += 1;\r\n          }\r\n\r\n          currentSize = 0;\r\n          index += 1;\r\n        }\r\n      } else {\r\n        letters[index].ind = index;\r\n        letters[index].extra = 0;\r\n        index += 1;\r\n      }\r\n    }\r\n\r\n    documentData.l = letters;\r\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n    lineWidths.push(lineWidth);\r\n\r\n    if (documentData.sz) {\r\n      documentData.boxWidth = documentData.sz[0];\r\n      documentData.justifyOffset = 0;\r\n    } else {\r\n      documentData.boxWidth = maxLineWidth;\r\n\r\n      switch (documentData.j) {\r\n        case 1:\r\n          documentData.justifyOffset = -documentData.boxWidth;\r\n          break;\r\n\r\n        case 2:\r\n          documentData.justifyOffset = -documentData.boxWidth / 2;\r\n          break;\r\n\r\n        default:\r\n          documentData.justifyOffset = 0;\r\n      }\r\n    }\r\n\r\n    documentData.lineWidths = lineWidths;\r\n    var animators = data.a;\r\n    var animatorData;\r\n    var letterData;\r\n    jLen = animators.length;\r\n    var based;\r\n    var ind;\r\n    var indexes = [];\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      animatorData = animators[j];\r\n\r\n      if (animatorData.a.sc) {\r\n        documentData.strokeColorAnim = true;\r\n      }\r\n\r\n      if (animatorData.a.sw) {\r\n        documentData.strokeWidthAnim = true;\r\n      }\r\n\r\n      if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\r\n        documentData.fillColorAnim = true;\r\n      }\r\n\r\n      ind = 0;\r\n      based = animatorData.s.b;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        letterData = letters[i];\r\n        letterData.anIndexes[j] = ind;\r\n\r\n        if (based == 1 && letterData.val !== '' || based == 2 && letterData.val !== '' && letterData.val !== ' ' || based == 3 && (letterData.n || letterData.val == ' ' || i == len - 1) || based == 4 && (letterData.n || i == len - 1)) {\r\n          // eslint-disable-line eqeqeq\r\n          if (animatorData.s.rn === 1) {\r\n            indexes.push(ind);\r\n          }\r\n\r\n          ind += 1;\r\n        }\r\n      }\r\n\r\n      data.a[j].s.totalChars = ind;\r\n      var currentInd = -1;\r\n      var newInd;\r\n\r\n      if (animatorData.s.rn === 1) {\r\n        for (i = 0; i < len; i += 1) {\r\n          letterData = letters[i];\r\n\r\n          if (currentInd != letterData.anIndexes[j]) {\r\n            // eslint-disable-line eqeqeq\r\n            currentInd = letterData.anIndexes[j];\r\n            newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\r\n          }\r\n\r\n          letterData.anIndexes[j] = newInd;\r\n        }\r\n      }\r\n    }\r\n\r\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n    documentData.ls = documentData.ls || 0;\r\n    documentData.ascent = fontData.ascent * documentData.finalSize / 100;\r\n  };\r\n\r\n  TextProperty.prototype.updateDocumentData = function (newData, index) {\r\n    index = index === undefined ? this.keysIndex : index;\r\n    var dData = this.copyData({}, this.data.d.k[index].s);\r\n    dData = this.copyData(dData, newData);\r\n    this.data.d.k[index].s = dData;\r\n    this.recalculate(index);\r\n    this.elem.addDynamicProperty(this);\r\n  };\r\n\r\n  TextProperty.prototype.recalculate = function (index) {\r\n    var dData = this.data.d.k[index].s;\r\n    dData.__complete = false;\r\n    this.keysIndex = 0;\r\n    this._isFirstFrame = true;\r\n    this.getValue(dData);\r\n  };\r\n\r\n  TextProperty.prototype.canResizeFont = function (_canResize) {\r\n    this.canResize = _canResize;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n  };\r\n\r\n  TextProperty.prototype.setMinimumFontSize = function (_fontValue) {\r\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n  };\r\n\r\n  var TextSelectorProp = function () {\r\n    var max = Math.max;\r\n    var min = Math.min;\r\n    var floor = Math.floor;\r\n\r\n    function TextSelectorPropFactory(elem, data) {\r\n      this._currentTextLength = -1;\r\n      this.k = false;\r\n      this.data = data;\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.finalS = 0;\r\n      this.finalE = 0;\r\n      this.initDynamicPropertyContainer(elem);\r\n      this.s = PropertyFactory.getProp(elem, data.s || {\r\n        k: 0\r\n      }, 0, 0, this);\r\n\r\n      if ('e' in data) {\r\n        this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\r\n      } else {\r\n        this.e = {\r\n          v: 100\r\n        };\r\n      }\r\n\r\n      this.o = PropertyFactory.getProp(elem, data.o || {\r\n        k: 0\r\n      }, 0, 0, this);\r\n      this.xe = PropertyFactory.getProp(elem, data.xe || {\r\n        k: 0\r\n      }, 0, 0, this);\r\n      this.ne = PropertyFactory.getProp(elem, data.ne || {\r\n        k: 0\r\n      }, 0, 0, this);\r\n      this.sm = PropertyFactory.getProp(elem, data.sm || {\r\n        k: 100\r\n      }, 0, 0, this);\r\n      this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\r\n\r\n      if (!this.dynamicProperties.length) {\r\n        this.getValue();\r\n      }\r\n    }\r\n\r\n    TextSelectorPropFactory.prototype = {\r\n      getMult: function getMult(ind) {\r\n        if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n          this.getValue();\r\n        }\r\n\r\n        var x1 = 0;\r\n        var y1 = 0;\r\n        var x2 = 1;\r\n        var y2 = 1;\r\n\r\n        if (this.ne.v > 0) {\r\n          x1 = this.ne.v / 100.0;\r\n        } else {\r\n          y1 = -this.ne.v / 100.0;\r\n        }\r\n\r\n        if (this.xe.v > 0) {\r\n          x2 = 1.0 - this.xe.v / 100.0;\r\n        } else {\r\n          y2 = 1.0 + this.xe.v / 100.0;\r\n        }\r\n\r\n        var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\r\n        var mult = 0;\r\n        var s = this.finalS;\r\n        var e = this.finalE;\r\n        var type = this.data.sh;\r\n\r\n        if (type === 2) {\r\n          if (e === s) {\r\n            mult = ind >= e ? 1 : 0;\r\n          } else {\r\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else if (type === 3) {\r\n          if (e === s) {\r\n            mult = ind >= e ? 0 : 1;\r\n          } else {\r\n            mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else if (type === 4) {\r\n          if (e === s) {\r\n            mult = 0;\r\n          } else {\r\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n\r\n            if (mult < 0.5) {\r\n              mult *= 2;\r\n            } else {\r\n              mult = 1 - 2 * (mult - 0.5);\r\n            }\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else if (type === 5) {\r\n          if (e === s) {\r\n            mult = 0;\r\n          } else {\r\n            var tot = e - s;\r\n            /* ind += 0.5;\r\n                      mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind; */\r\n\r\n            ind = min(max(0, ind + 0.5 - s), e - s);\r\n            var x = -tot / 2 + ind;\r\n            var a = tot / 2;\r\n            mult = Math.sqrt(1 - x * x / (a * a));\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else if (type === 6) {\r\n          if (e === s) {\r\n            mult = 0;\r\n          } else {\r\n            ind = min(max(0, ind + 0.5 - s), e - s);\r\n            mult = (1 + Math.cos(Math.PI + Math.PI * 2 * ind / (e - s))) / 2; // eslint-disable-line\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } else {\r\n          if (ind >= floor(s)) {\r\n            if (ind - s < 0) {\r\n              mult = max(0, min(min(e, 1) - (s - ind), 1));\r\n            } else {\r\n              mult = max(0, min(e - ind, 1));\r\n            }\r\n          }\r\n\r\n          mult = easer(mult);\r\n        } // Smoothness implementation.\r\n        // The smoothness represents a reduced range of the original [0; 1] range.\r\n        // if smoothness is 25%, the new range will be [0.375; 0.625]\r\n        // Steps are:\r\n        // - find the lower value of the new range (threshold)\r\n        // - if multiplier is smaller than that value, floor it to 0\r\n        // - if it is larger,\r\n        //     - subtract the threshold\r\n        //     - divide it by the smoothness (this will return the range to [0; 1])\r\n        // Note: If it doesn't work on some scenarios, consider applying it before the easer.\r\n\r\n\r\n        if (this.sm.v !== 100) {\r\n          var smoothness = this.sm.v * 0.01;\r\n\r\n          if (smoothness === 0) {\r\n            smoothness = 0.00000001;\r\n          }\r\n\r\n          var threshold = 0.5 - smoothness * 0.5;\r\n\r\n          if (mult < threshold) {\r\n            mult = 0;\r\n          } else {\r\n            mult = (mult - threshold) / smoothness;\r\n\r\n            if (mult > 1) {\r\n              mult = 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        return mult * this.a.v;\r\n      },\r\n      getValue: function getValue(newCharsFlag) {\r\n        this.iterateDynamicProperties();\r\n        this._mdf = newCharsFlag || this._mdf;\r\n        this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n\r\n        if (newCharsFlag && this.data.r === 2) {\r\n          this.e.v = this._currentTextLength;\r\n        }\r\n\r\n        var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\r\n        var o = this.o.v / divisor;\r\n        var s = this.s.v / divisor + o;\r\n        var e = this.e.v / divisor + o;\r\n\r\n        if (s > e) {\r\n          var _s = s;\r\n          s = e;\r\n          e = _s;\r\n        }\r\n\r\n        this.finalS = s;\r\n        this.finalE = e;\r\n      }\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], TextSelectorPropFactory);\r\n\r\n    function getTextSelectorProp(elem, data, arr) {\r\n      return new TextSelectorPropFactory(elem, data, arr);\r\n    }\r\n\r\n    return {\r\n      getTextSelectorProp: getTextSelectorProp\r\n    };\r\n  }();\r\n\r\n  function TextAnimatorDataProperty(elem, animatorProps, container) {\r\n    var defaultData = {\r\n      propType: false\r\n    };\r\n    var getProp = PropertyFactory.getProp;\r\n    var textAnimatorAnimatables = animatorProps.a;\r\n    this.a = {\r\n      r: textAnimatorAnimatables.r ? getProp(elem, textAnimatorAnimatables.r, 0, degToRads, container) : defaultData,\r\n      rx: textAnimatorAnimatables.rx ? getProp(elem, textAnimatorAnimatables.rx, 0, degToRads, container) : defaultData,\r\n      ry: textAnimatorAnimatables.ry ? getProp(elem, textAnimatorAnimatables.ry, 0, degToRads, container) : defaultData,\r\n      sk: textAnimatorAnimatables.sk ? getProp(elem, textAnimatorAnimatables.sk, 0, degToRads, container) : defaultData,\r\n      sa: textAnimatorAnimatables.sa ? getProp(elem, textAnimatorAnimatables.sa, 0, degToRads, container) : defaultData,\r\n      s: textAnimatorAnimatables.s ? getProp(elem, textAnimatorAnimatables.s, 1, 0.01, container) : defaultData,\r\n      a: textAnimatorAnimatables.a ? getProp(elem, textAnimatorAnimatables.a, 1, 0, container) : defaultData,\r\n      o: textAnimatorAnimatables.o ? getProp(elem, textAnimatorAnimatables.o, 0, 0.01, container) : defaultData,\r\n      p: textAnimatorAnimatables.p ? getProp(elem, textAnimatorAnimatables.p, 1, 0, container) : defaultData,\r\n      sw: textAnimatorAnimatables.sw ? getProp(elem, textAnimatorAnimatables.sw, 0, 0, container) : defaultData,\r\n      sc: textAnimatorAnimatables.sc ? getProp(elem, textAnimatorAnimatables.sc, 1, 0, container) : defaultData,\r\n      fc: textAnimatorAnimatables.fc ? getProp(elem, textAnimatorAnimatables.fc, 1, 0, container) : defaultData,\r\n      fh: textAnimatorAnimatables.fh ? getProp(elem, textAnimatorAnimatables.fh, 0, 0, container) : defaultData,\r\n      fs: textAnimatorAnimatables.fs ? getProp(elem, textAnimatorAnimatables.fs, 0, 0.01, container) : defaultData,\r\n      fb: textAnimatorAnimatables.fb ? getProp(elem, textAnimatorAnimatables.fb, 0, 0.01, container) : defaultData,\r\n      t: textAnimatorAnimatables.t ? getProp(elem, textAnimatorAnimatables.t, 0, 0, container) : defaultData\r\n    };\r\n    this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\r\n    this.s.t = animatorProps.s.t;\r\n  }\r\n\r\n  function TextAnimatorProperty(textData, renderType, elem) {\r\n    this._isFirstFrame = true;\r\n    this._hasMaskedPath = false;\r\n    this._frameId = -1;\r\n    this._textData = textData;\r\n    this._renderType = renderType;\r\n    this._elem = elem;\r\n    this._animatorsData = createSizedArray(this._textData.a.length);\r\n    this._pathData = {};\r\n    this._moreOptions = {\r\n      alignment: {}\r\n    };\r\n    this.renderedLetters = [];\r\n    this.lettersChangedFlag = false;\r\n    this.initDynamicPropertyContainer(elem);\r\n  }\r\n\r\n  TextAnimatorProperty.prototype.searchProperties = function () {\r\n    var i;\r\n    var len = this._textData.a.length;\r\n    var animatorProps;\r\n    var getProp = PropertyFactory.getProp;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      animatorProps = this._textData.a[i];\r\n      this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n    }\r\n\r\n    if (this._textData.p && 'm' in this._textData.p) {\r\n      this._pathData = {\r\n        a: getProp(this._elem, this._textData.p.a, 0, 0, this),\r\n        f: getProp(this._elem, this._textData.p.f, 0, 0, this),\r\n        l: getProp(this._elem, this._textData.p.l, 0, 0, this),\r\n        r: getProp(this._elem, this._textData.p.r, 0, 0, this),\r\n        p: getProp(this._elem, this._textData.p.p, 0, 0, this),\r\n        m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\r\n      };\r\n      this._hasMaskedPath = true;\r\n    } else {\r\n      this._hasMaskedPath = false;\r\n    }\r\n\r\n    this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\r\n  };\r\n\r\n  TextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\r\n    this.lettersChangedFlag = lettersChangedFlag;\r\n\r\n    if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n      return;\r\n    }\r\n\r\n    this._isFirstFrame = false;\r\n    var alignment = this._moreOptions.alignment.v;\r\n    var animators = this._animatorsData;\r\n    var textData = this._textData;\r\n    var matrixHelper = this.mHelper;\r\n    var renderType = this._renderType;\r\n    var renderedLettersCount = this.renderedLetters.length;\r\n    var xPos;\r\n    var yPos;\r\n    var i;\r\n    var len;\r\n    var letters = documentData.l;\r\n    var pathInfo;\r\n    var currentLength;\r\n    var currentPoint;\r\n    var segmentLength;\r\n    var flag;\r\n    var pointInd;\r\n    var segmentInd;\r\n    var prevPoint;\r\n    var points;\r\n    var segments;\r\n    var partialLength;\r\n    var totalLength;\r\n    var perc;\r\n    var tanAngle;\r\n    var mask;\r\n\r\n    if (this._hasMaskedPath) {\r\n      mask = this._pathData.m;\r\n\r\n      if (!this._pathData.n || this._pathData._mdf) {\r\n        var paths = mask.v;\r\n\r\n        if (this._pathData.r.v) {\r\n          paths = paths.reverse();\r\n        } // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n\r\n\r\n        pathInfo = {\r\n          tLength: 0,\r\n          segments: []\r\n        };\r\n        len = paths._length - 1;\r\n        var bezierData;\r\n        totalLength = 0;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[i + 1], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\r\n          pathInfo.tLength += bezierData.segmentLength;\r\n          pathInfo.segments.push(bezierData);\r\n          totalLength += bezierData.segmentLength;\r\n        }\r\n\r\n        i = len;\r\n\r\n        if (mask.v.c) {\r\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[0], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\r\n          pathInfo.tLength += bezierData.segmentLength;\r\n          pathInfo.segments.push(bezierData);\r\n          totalLength += bezierData.segmentLength;\r\n        }\r\n\r\n        this._pathData.pi = pathInfo;\r\n      }\r\n\r\n      pathInfo = this._pathData.pi;\r\n      currentLength = this._pathData.f.v;\r\n      segmentInd = 0;\r\n      pointInd = 1;\r\n      segmentLength = 0;\r\n      flag = true;\r\n      segments = pathInfo.segments;\r\n\r\n      if (currentLength < 0 && mask.v.c) {\r\n        if (pathInfo.tLength < Math.abs(currentLength)) {\r\n          currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n        }\r\n\r\n        segmentInd = segments.length - 1;\r\n        points = segments[segmentInd].points;\r\n        pointInd = points.length - 1;\r\n\r\n        while (currentLength < 0) {\r\n          currentLength += points[pointInd].partialLength;\r\n          pointInd -= 1;\r\n\r\n          if (pointInd < 0) {\r\n            segmentInd -= 1;\r\n            points = segments[segmentInd].points;\r\n            pointInd = points.length - 1;\r\n          }\r\n        }\r\n      }\r\n\r\n      points = segments[segmentInd].points;\r\n      prevPoint = points[pointInd - 1];\r\n      currentPoint = points[pointInd];\r\n      partialLength = currentPoint.partialLength;\r\n    }\r\n\r\n    len = letters.length;\r\n    xPos = 0;\r\n    yPos = 0;\r\n    var yOff = documentData.finalSize * 1.2 * 0.714;\r\n    var firstLine = true;\r\n    var animatorProps;\r\n    var animatorSelector;\r\n    var j;\r\n    var jLen;\r\n    var letterValue;\r\n    jLen = animators.length;\r\n    var mult;\r\n    var ind = -1;\r\n    var offf;\r\n    var xPathPos;\r\n    var yPathPos;\r\n    var initPathPos = currentLength;\r\n    var initSegmentInd = segmentInd;\r\n    var initPointInd = pointInd;\r\n    var currentLine = -1;\r\n    var elemOpacity;\r\n    var sc;\r\n    var sw;\r\n    var fc;\r\n    var k;\r\n    var letterSw;\r\n    var letterSc;\r\n    var letterFc;\r\n    var letterM = '';\r\n    var letterP = this.defaultPropsArray;\r\n    var letterO; //\r\n\r\n    if (documentData.j === 2 || documentData.j === 1) {\r\n      var animatorJustifyOffset = 0;\r\n      var animatorFirstCharOffset = 0;\r\n      var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n      var lastIndex = 0;\r\n      var isNewLine = true;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (letters[i].n) {\r\n          if (animatorJustifyOffset) {\r\n            animatorJustifyOffset += animatorFirstCharOffset;\r\n          }\r\n\r\n          while (lastIndex < i) {\r\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n            lastIndex += 1;\r\n          }\r\n\r\n          animatorJustifyOffset = 0;\r\n          isNewLine = true;\r\n        } else {\r\n          for (j = 0; j < jLen; j += 1) {\r\n            animatorProps = animators[j].a;\r\n\r\n            if (animatorProps.t.propType) {\r\n              if (isNewLine && documentData.j === 2) {\r\n                animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n              }\r\n\r\n              animatorSelector = animators[j].s;\r\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n              if (mult.length) {\r\n                animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\r\n              } else {\r\n                animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\r\n              }\r\n            }\r\n          }\r\n\r\n          isNewLine = false;\r\n        }\r\n      }\r\n\r\n      if (animatorJustifyOffset) {\r\n        animatorJustifyOffset += animatorFirstCharOffset;\r\n      }\r\n\r\n      while (lastIndex < i) {\r\n        letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n        lastIndex += 1;\r\n      }\r\n    } //\r\n\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      matrixHelper.reset();\r\n      elemOpacity = 1;\r\n\r\n      if (letters[i].n) {\r\n        xPos = 0;\r\n        yPos += documentData.yOffset;\r\n        yPos += firstLine ? 1 : 0;\r\n        currentLength = initPathPos;\r\n        firstLine = false;\r\n\r\n        if (this._hasMaskedPath) {\r\n          segmentInd = initSegmentInd;\r\n          pointInd = initPointInd;\r\n          points = segments[segmentInd].points;\r\n          prevPoint = points[pointInd - 1];\r\n          currentPoint = points[pointInd];\r\n          partialLength = currentPoint.partialLength;\r\n          segmentLength = 0;\r\n        }\r\n\r\n        letterM = '';\r\n        letterFc = '';\r\n        letterSw = '';\r\n        letterO = '';\r\n        letterP = this.defaultPropsArray;\r\n      } else {\r\n        if (this._hasMaskedPath) {\r\n          if (currentLine !== letters[i].line) {\r\n            switch (documentData.j) {\r\n              case 1:\r\n                currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n                break;\r\n\r\n              case 2:\r\n                currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\r\n                break;\r\n\r\n              default:\r\n                break;\r\n            }\r\n\r\n            currentLine = letters[i].line;\r\n          }\r\n\r\n          if (ind !== letters[i].ind) {\r\n            if (letters[ind]) {\r\n              currentLength += letters[ind].extra;\r\n            }\r\n\r\n            currentLength += letters[i].an / 2;\r\n            ind = letters[i].ind;\r\n          }\r\n\r\n          currentLength += alignment[0] * letters[i].an * 0.005;\r\n          var animatorOffset = 0;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            animatorProps = animators[j].a;\r\n\r\n            if (animatorProps.p.propType) {\r\n              animatorSelector = animators[j].s;\r\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n              if (mult.length) {\r\n                animatorOffset += animatorProps.p.v[0] * mult[0];\r\n              } else {\r\n                animatorOffset += animatorProps.p.v[0] * mult;\r\n              }\r\n            }\r\n\r\n            if (animatorProps.a.propType) {\r\n              animatorSelector = animators[j].s;\r\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n              if (mult.length) {\r\n                animatorOffset += animatorProps.a.v[0] * mult[0];\r\n              } else {\r\n                animatorOffset += animatorProps.a.v[0] * mult;\r\n              }\r\n            }\r\n          }\r\n\r\n          flag = true; // Force alignment only works with a single line for now\r\n\r\n          if (this._pathData.a.v) {\r\n            currentLength = letters[0].an * 0.5 + (totalLength - this._pathData.f.v - letters[0].an * 0.5 - letters[letters.length - 1].an * 0.5) * ind / (len - 1);\r\n            currentLength += this._pathData.f.v;\r\n          }\r\n\r\n          while (flag) {\r\n            if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n              perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n              xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n              yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n              matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -(alignment[1] * yOff) * 0.01);\r\n              flag = false;\r\n            } else if (points) {\r\n              segmentLength += currentPoint.partialLength;\r\n              pointInd += 1;\r\n\r\n              if (pointInd >= points.length) {\r\n                pointInd = 0;\r\n                segmentInd += 1;\r\n\r\n                if (!segments[segmentInd]) {\r\n                  if (mask.v.c) {\r\n                    pointInd = 0;\r\n                    segmentInd = 0;\r\n                    points = segments[segmentInd].points;\r\n                  } else {\r\n                    segmentLength -= currentPoint.partialLength;\r\n                    points = null;\r\n                  }\r\n                } else {\r\n                  points = segments[segmentInd].points;\r\n                }\r\n              }\r\n\r\n              if (points) {\r\n                prevPoint = currentPoint;\r\n                currentPoint = points[pointInd];\r\n                partialLength = currentPoint.partialLength;\r\n              }\r\n            }\r\n          }\r\n\r\n          offf = letters[i].an / 2 - letters[i].add;\r\n          matrixHelper.translate(-offf, 0, 0);\r\n        } else {\r\n          offf = letters[i].an / 2 - letters[i].add;\r\n          matrixHelper.translate(-offf, 0, 0); // Grouping alignment\r\n\r\n          matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -alignment[1] * yOff * 0.01, 0);\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n\r\n          if (animatorProps.t.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars); // This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n\r\n            if (xPos !== 0 || documentData.j !== 0) {\r\n              if (this._hasMaskedPath) {\r\n                if (mult.length) {\r\n                  currentLength += animatorProps.t.v * mult[0];\r\n                } else {\r\n                  currentLength += animatorProps.t.v * mult;\r\n                }\r\n              } else if (mult.length) {\r\n                xPos += animatorProps.t.v * mult[0];\r\n              } else {\r\n                xPos += animatorProps.t.v * mult;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        if (documentData.strokeWidthAnim) {\r\n          sw = documentData.sw || 0;\r\n        }\r\n\r\n        if (documentData.strokeColorAnim) {\r\n          if (documentData.sc) {\r\n            sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n          } else {\r\n            sc = [0, 0, 0];\r\n          }\r\n        }\r\n\r\n        if (documentData.fillColorAnim && documentData.fc) {\r\n          fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n\r\n          if (animatorProps.a.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n            if (mult.length) {\r\n              matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\r\n            } else {\r\n              matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\r\n            }\r\n          }\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n\r\n          if (animatorProps.s.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n            if (mult.length) {\r\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult[0], 1 + (animatorProps.s.v[1] - 1) * mult[1], 1);\r\n            } else {\r\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult, 1 + (animatorProps.s.v[1] - 1) * mult, 1);\r\n            }\r\n          }\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n          if (animatorProps.sk.propType) {\r\n            if (mult.length) {\r\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n            } else {\r\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n            }\r\n          }\r\n\r\n          if (animatorProps.r.propType) {\r\n            if (mult.length) {\r\n              matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n            } else {\r\n              matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n            }\r\n          }\r\n\r\n          if (animatorProps.ry.propType) {\r\n            if (mult.length) {\r\n              matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\r\n            } else {\r\n              matrixHelper.rotateY(animatorProps.ry.v * mult);\r\n            }\r\n          }\r\n\r\n          if (animatorProps.rx.propType) {\r\n            if (mult.length) {\r\n              matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\r\n            } else {\r\n              matrixHelper.rotateX(animatorProps.rx.v * mult);\r\n            }\r\n          }\r\n\r\n          if (animatorProps.o.propType) {\r\n            if (mult.length) {\r\n              elemOpacity += (animatorProps.o.v * mult[0] - elemOpacity) * mult[0];\r\n            } else {\r\n              elemOpacity += (animatorProps.o.v * mult - elemOpacity) * mult;\r\n            }\r\n          }\r\n\r\n          if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n            if (mult.length) {\r\n              sw += animatorProps.sw.v * mult[0];\r\n            } else {\r\n              sw += animatorProps.sw.v * mult;\r\n            }\r\n          }\r\n\r\n          if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n            for (k = 0; k < 3; k += 1) {\r\n              if (mult.length) {\r\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult[0];\r\n              } else {\r\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult;\r\n              }\r\n            }\r\n          }\r\n\r\n          if (documentData.fillColorAnim && documentData.fc) {\r\n            if (animatorProps.fc.propType) {\r\n              for (k = 0; k < 3; k += 1) {\r\n                if (mult.length) {\r\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult[0];\r\n                } else {\r\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult;\r\n                }\r\n              }\r\n            }\r\n\r\n            if (animatorProps.fh.propType) {\r\n              if (mult.length) {\r\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\r\n              } else {\r\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult);\r\n              }\r\n            }\r\n\r\n            if (animatorProps.fs.propType) {\r\n              if (mult.length) {\r\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\r\n              } else {\r\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\r\n              }\r\n            }\r\n\r\n            if (animatorProps.fb.propType) {\r\n              if (mult.length) {\r\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\r\n              } else {\r\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n\r\n          if (animatorProps.p.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n            if (this._hasMaskedPath) {\r\n              if (mult.length) {\r\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n              } else {\r\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n              }\r\n            } else if (mult.length) {\r\n              matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n            } else {\r\n              matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (documentData.strokeWidthAnim) {\r\n          letterSw = sw < 0 ? 0 : sw;\r\n        }\r\n\r\n        if (documentData.strokeColorAnim) {\r\n          letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\r\n        }\r\n\r\n        if (documentData.fillColorAnim && documentData.fc) {\r\n          letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\r\n        }\r\n\r\n        if (this._hasMaskedPath) {\r\n          matrixHelper.translate(0, -documentData.ls);\r\n          matrixHelper.translate(0, alignment[1] * yOff * 0.01 + yPos, 0);\r\n\r\n          if (this._pathData.p.v) {\r\n            tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n            var rot = Math.atan(tanAngle) * 180 / Math.PI;\r\n\r\n            if (currentPoint.point[0] < prevPoint.point[0]) {\r\n              rot += 180;\r\n            }\r\n\r\n            matrixHelper.rotate(-rot * Math.PI / 180);\r\n          }\r\n\r\n          matrixHelper.translate(xPathPos, yPathPos, 0);\r\n          currentLength -= alignment[0] * letters[i].an * 0.005;\r\n\r\n          if (letters[i + 1] && ind !== letters[i + 1].ind) {\r\n            currentLength += letters[i].an / 2;\r\n            currentLength += documentData.tr * 0.001 * documentData.finalSize;\r\n          }\r\n        } else {\r\n          matrixHelper.translate(xPos, yPos, 0);\r\n\r\n          if (documentData.ps) {\r\n            // matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n            matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n          }\r\n\r\n          switch (documentData.j) {\r\n            case 1:\r\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\r\n              break;\r\n\r\n            case 2:\r\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\r\n              break;\r\n\r\n            default:\r\n              break;\r\n          }\r\n\r\n          matrixHelper.translate(0, -documentData.ls);\r\n          matrixHelper.translate(offf, 0, 0);\r\n          matrixHelper.translate(alignment[0] * letters[i].an * 0.005, alignment[1] * yOff * 0.01, 0);\r\n          xPos += letters[i].l + documentData.tr * 0.001 * documentData.finalSize;\r\n        }\r\n\r\n        if (renderType === 'html') {\r\n          letterM = matrixHelper.toCSS();\r\n        } else if (renderType === 'svg') {\r\n          letterM = matrixHelper.to2dCSS();\r\n        } else {\r\n          letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\r\n        }\r\n\r\n        letterO = elemOpacity;\r\n      }\r\n\r\n      if (renderedLettersCount <= i) {\r\n        letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\r\n        this.renderedLetters.push(letterValue);\r\n        renderedLettersCount += 1;\r\n        this.lettersChangedFlag = true;\r\n      } else {\r\n        letterValue = this.renderedLetters[i];\r\n        this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n      }\r\n    }\r\n  };\r\n\r\n  TextAnimatorProperty.prototype.getValue = function () {\r\n    if (this._elem.globalData.frameId === this._frameId) {\r\n      return;\r\n    }\r\n\r\n    this._frameId = this._elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n  };\r\n\r\n  TextAnimatorProperty.prototype.mHelper = new Matrix();\r\n  TextAnimatorProperty.prototype.defaultPropsArray = [];\r\n  extendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\r\n\r\n  function ITextElement() {}\r\n\r\n  ITextElement.prototype.initElement = function (data, globalData, comp) {\r\n    this.lettersChangedFlag = true;\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n    this.initRenderable();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n    this.createContent();\r\n    this.hide();\r\n    this.textAnimator.searchProperties(this.dynamicProperties);\r\n  };\r\n\r\n  ITextElement.prototype.prepareFrame = function (num) {\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n\r\n    if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n      this.buildNewText();\r\n      this.textProperty._isFirstFrame = false;\r\n      this.textProperty._mdf = false;\r\n    }\r\n  };\r\n\r\n  ITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\r\n    var j;\r\n    var jLen = shapes.length;\r\n    var pathNodes;\r\n    var shapeStr = '';\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      if (shapes[j].ty === 'sh') {\r\n        pathNodes = shapes[j].ks.k;\r\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n      }\r\n    }\r\n\r\n    return shapeStr;\r\n  };\r\n\r\n  ITextElement.prototype.updateDocumentData = function (newData, index) {\r\n    this.textProperty.updateDocumentData(newData, index);\r\n  };\r\n\r\n  ITextElement.prototype.canResizeFont = function (_canResize) {\r\n    this.textProperty.canResizeFont(_canResize);\r\n  };\r\n\r\n  ITextElement.prototype.setMinimumFontSize = function (_fontSize) {\r\n    this.textProperty.setMinimumFontSize(_fontSize);\r\n  };\r\n\r\n  ITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n    if (documentData.ps) {\r\n      matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n    }\r\n\r\n    matrixHelper.translate(0, -documentData.ls, 0);\r\n\r\n    switch (documentData.j) {\r\n      case 1:\r\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\r\n        break;\r\n\r\n      case 2:\r\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    matrixHelper.translate(xPos, yPos, 0);\r\n  };\r\n\r\n  ITextElement.prototype.buildColor = function (colorData) {\r\n    return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\r\n  };\r\n\r\n  ITextElement.prototype.emptyProp = new LetterProps();\r\n\r\n  ITextElement.prototype.destroy = function () {};\r\n\r\n  var emptyShapeData = {\r\n    shapes: []\r\n  };\r\n\r\n  function SVGTextLottieElement(data, globalData, comp) {\r\n    this.textSpans = [];\r\n    this.renderType = 'svg';\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement);\r\n\r\n  SVGTextLottieElement.prototype.createContent = function () {\r\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n      this.textContainer = createNS('text');\r\n    }\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.buildTextContents = function (textArray) {\r\n    var i = 0;\r\n    var len = textArray.length;\r\n    var textContents = [];\r\n    var currentTextContent = '';\r\n\r\n    while (i < len) {\r\n      if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\r\n        textContents.push(currentTextContent);\r\n        currentTextContent = '';\r\n      } else {\r\n        currentTextContent += textArray[i];\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    textContents.push(currentTextContent);\r\n    return textContents;\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.buildShapeData = function (data, scale) {\r\n    // data should probably be cloned to apply scale separately to each instance of a text on different layers\r\n    // but since text internal content gets only rendered once and then it's never rerendered,\r\n    // it's probably safe not to clone data and reuse always the same instance even if the object is mutated.\r\n    // Avoiding cloning is preferred since cloning each character shape data is expensive\r\n    if (data.shapes && data.shapes.length) {\r\n      var shape = data.shapes[0];\r\n\r\n      if (shape.it) {\r\n        var shapeItem = shape.it[shape.it.length - 1];\r\n\r\n        if (shapeItem.s) {\r\n          shapeItem.s.k[0] = scale;\r\n          shapeItem.s.k[1] = scale;\r\n        }\r\n      }\r\n    }\r\n\r\n    return data;\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.buildNewText = function () {\r\n    this.addDynamicProperty(this);\r\n    var i;\r\n    var len;\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n\r\n    if (documentData.fc) {\r\n      this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n    } else {\r\n      this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n    }\r\n\r\n    if (documentData.sc) {\r\n      this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n      this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n    }\r\n\r\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n\r\n    if (fontData.fClass) {\r\n      this.layerElement.setAttribute('class', fontData.fClass);\r\n    } else {\r\n      this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n      var fWeight = documentData.fWeight;\r\n      var fStyle = documentData.fStyle;\r\n      this.layerElement.setAttribute('font-style', fStyle);\r\n      this.layerElement.setAttribute('font-weight', fWeight);\r\n    }\r\n\r\n    this.layerElement.setAttribute('aria-label', documentData.t);\r\n    var letters = documentData.l || [];\r\n    var usesGlyphs = !!this.globalData.fontManager.chars;\r\n    len = letters.length;\r\n    var tSpan;\r\n    var matrixHelper = this.mHelper;\r\n    var shapeStr = '';\r\n    var singleShape = this.data.singleShape;\r\n    var xPos = 0;\r\n    var yPos = 0;\r\n    var firstLine = true;\r\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n\r\n    if (singleShape && !usesGlyphs && !documentData.sz) {\r\n      var tElement = this.textContainer;\r\n      var justify = 'start';\r\n\r\n      switch (documentData.j) {\r\n        case 1:\r\n          justify = 'end';\r\n          break;\r\n\r\n        case 2:\r\n          justify = 'middle';\r\n          break;\r\n\r\n        default:\r\n          justify = 'start';\r\n          break;\r\n      }\r\n\r\n      tElement.setAttribute('text-anchor', justify);\r\n      tElement.setAttribute('letter-spacing', trackingOffset);\r\n      var textContent = this.buildTextContents(documentData.finalText);\r\n      len = textContent.length;\r\n      yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        tSpan = this.textSpans[i].span || createNS('tspan');\r\n        tSpan.textContent = textContent[i];\r\n        tSpan.setAttribute('x', 0);\r\n        tSpan.setAttribute('y', yPos);\r\n        tSpan.style.display = 'inherit';\r\n        tElement.appendChild(tSpan);\r\n\r\n        if (!this.textSpans[i]) {\r\n          this.textSpans[i] = {\r\n            span: null,\r\n            glyph: null\r\n          };\r\n        }\r\n\r\n        this.textSpans[i].span = tSpan;\r\n        yPos += documentData.finalLineHeight;\r\n      }\r\n\r\n      this.layerElement.appendChild(tElement);\r\n    } else {\r\n      var cachedSpansLength = this.textSpans.length;\r\n      var charData;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (!this.textSpans[i]) {\r\n          this.textSpans[i] = {\r\n            span: null,\r\n            childSpan: null,\r\n            glyph: null\r\n          };\r\n        }\r\n\r\n        if (!usesGlyphs || !singleShape || i === 0) {\r\n          tSpan = cachedSpansLength > i ? this.textSpans[i].span : createNS(usesGlyphs ? 'g' : 'text');\r\n\r\n          if (cachedSpansLength <= i) {\r\n            tSpan.setAttribute('stroke-linecap', 'butt');\r\n            tSpan.setAttribute('stroke-linejoin', 'round');\r\n            tSpan.setAttribute('stroke-miterlimit', '4');\r\n            this.textSpans[i].span = tSpan;\r\n\r\n            if (usesGlyphs) {\r\n              var childSpan = createNS('g');\r\n              tSpan.appendChild(childSpan);\r\n              this.textSpans[i].childSpan = childSpan;\r\n            }\r\n\r\n            this.textSpans[i].span = tSpan;\r\n            this.layerElement.appendChild(tSpan);\r\n          }\r\n\r\n          tSpan.style.display = 'inherit';\r\n        }\r\n\r\n        matrixHelper.reset();\r\n\r\n        if (singleShape) {\r\n          if (letters[i].n) {\r\n            xPos = -trackingOffset;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            firstLine = false;\r\n          }\r\n\r\n          this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n          xPos += letters[i].l || 0; // xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n\r\n          xPos += trackingOffset;\r\n        }\r\n\r\n        if (usesGlyphs) {\r\n          charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n          var glyphElement; // t === 1 means the character has been replaced with an animated shaped\r\n\r\n          if (charData.t === 1) {\r\n            glyphElement = new SVGCompElement(charData.data, this.globalData, this);\r\n          } else {\r\n            var data = emptyShapeData;\r\n\r\n            if (charData.data && charData.data.shapes) {\r\n              data = this.buildShapeData(charData.data, documentData.finalSize);\r\n            }\r\n\r\n            glyphElement = new SVGShapeElement(data, this.globalData, this);\r\n          }\r\n\r\n          if (this.textSpans[i].glyph) {\r\n            var glyph = this.textSpans[i].glyph;\r\n            this.textSpans[i].childSpan.removeChild(glyph.layerElement);\r\n            glyph.destroy();\r\n          }\r\n\r\n          this.textSpans[i].glyph = glyphElement;\r\n          glyphElement._debug = true;\r\n          glyphElement.prepareFrame(0);\r\n          glyphElement.renderFrame();\r\n          this.textSpans[i].childSpan.appendChild(glyphElement.layerElement); // when using animated shapes, the layer will be scaled instead of replacing the internal scale\r\n          // this might have issues with strokes and might need a different solution\r\n\r\n          if (charData.t === 1) {\r\n            this.textSpans[i].childSpan.setAttribute('transform', 'scale(' + documentData.finalSize / 100 + ',' + documentData.finalSize / 100 + ')');\r\n          }\r\n        } else {\r\n          if (singleShape) {\r\n            tSpan.setAttribute('transform', 'translate(' + matrixHelper.props[12] + ',' + matrixHelper.props[13] + ')');\r\n          }\r\n\r\n          tSpan.textContent = letters[i].val;\r\n          tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n        } //\r\n\r\n      }\r\n\r\n      if (singleShape && tSpan) {\r\n        tSpan.setAttribute('d', shapeStr);\r\n      }\r\n    }\r\n\r\n    while (i < this.textSpans.length) {\r\n      this.textSpans[i].span.style.display = 'none';\r\n      i += 1;\r\n    }\r\n\r\n    this._sizeChanged = true;\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.sourceRectAtTime = function () {\r\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n    this.renderInnerContent();\r\n\r\n    if (this._sizeChanged) {\r\n      this._sizeChanged = false;\r\n      var textBox = this.layerElement.getBBox();\r\n      this.bbox = {\r\n        top: textBox.y,\r\n        left: textBox.x,\r\n        width: textBox.width,\r\n        height: textBox.height\r\n      };\r\n    }\r\n\r\n    return this.bbox;\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.getValue = function () {\r\n    var i;\r\n    var len = this.textSpans.length;\r\n    var glyphElement;\r\n    this.renderedFrame = this.comp.renderedFrame;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      glyphElement = this.textSpans[i].glyph;\r\n\r\n      if (glyphElement) {\r\n        glyphElement.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n\r\n        if (glyphElement._mdf) {\r\n          this._mdf = true;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGTextLottieElement.prototype.renderInnerContent = function () {\r\n    if (!this.data.singleShape || this._mdf) {\r\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n\r\n      if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\r\n        this._sizeChanged = true;\r\n        var i;\r\n        var len;\r\n        var renderedLetters = this.textAnimator.renderedLetters;\r\n        var letters = this.textProperty.currentData.l;\r\n        len = letters.length;\r\n        var renderedLetter;\r\n        var textSpan;\r\n        var glyphElement;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          if (!letters[i].n) {\r\n            renderedLetter = renderedLetters[i];\r\n            textSpan = this.textSpans[i].span;\r\n            glyphElement = this.textSpans[i].glyph;\r\n\r\n            if (glyphElement) {\r\n              glyphElement.renderFrame();\r\n            }\r\n\r\n            if (renderedLetter._mdf.m) {\r\n              textSpan.setAttribute('transform', renderedLetter.m);\r\n            }\r\n\r\n            if (renderedLetter._mdf.o) {\r\n              textSpan.setAttribute('opacity', renderedLetter.o);\r\n            }\r\n\r\n            if (renderedLetter._mdf.sw) {\r\n              textSpan.setAttribute('stroke-width', renderedLetter.sw);\r\n            }\r\n\r\n            if (renderedLetter._mdf.sc) {\r\n              textSpan.setAttribute('stroke', renderedLetter.sc);\r\n            }\r\n\r\n            if (renderedLetter._mdf.fc) {\r\n              textSpan.setAttribute('fill', renderedLetter.fc);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  function ISolidElement(data, globalData, comp) {\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([IImageElement], ISolidElement);\r\n\r\n  ISolidElement.prototype.createContent = function () {\r\n    var rect = createNS('rect'); /// /rect.style.width = this.data.sw;\r\n    /// /rect.style.height = this.data.sh;\r\n    /// /rect.style.fill = this.data.sc;\r\n\r\n    rect.setAttribute('width', this.data.sw);\r\n    rect.setAttribute('height', this.data.sh);\r\n    rect.setAttribute('fill', this.data.sc);\r\n    this.layerElement.appendChild(rect);\r\n  };\r\n\r\n  function NullElement(data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initFrame();\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n  }\r\n\r\n  NullElement.prototype.prepareFrame = function (num) {\r\n    this.prepareProperties(num, true);\r\n  };\r\n\r\n  NullElement.prototype.renderFrame = function () {};\r\n\r\n  NullElement.prototype.getBaseElement = function () {\r\n    return null;\r\n  };\r\n\r\n  NullElement.prototype.destroy = function () {};\r\n\r\n  NullElement.prototype.sourceRectAtTime = function () {};\r\n\r\n  NullElement.prototype.hide = function () {};\r\n\r\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\r\n\r\n  function SVGRendererBase() {}\r\n\r\n  extendPrototype([BaseRenderer], SVGRendererBase);\r\n\r\n  SVGRendererBase.prototype.createNull = function (data) {\r\n    return new NullElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.createShape = function (data) {\r\n    return new SVGShapeElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.createText = function (data) {\r\n    return new SVGTextLottieElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.createImage = function (data) {\r\n    return new IImageElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.createSolid = function (data) {\r\n    return new ISolidElement(data, this.globalData, this);\r\n  };\r\n\r\n  SVGRendererBase.prototype.configAnimation = function (animData) {\r\n    this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n    this.svgElement.setAttribute('xmlns:xlink', 'http://www.w3.org/1999/xlink');\r\n\r\n    if (this.renderConfig.viewBoxSize) {\r\n      this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\r\n    } else {\r\n      this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\r\n    }\r\n\r\n    if (!this.renderConfig.viewBoxOnly) {\r\n      this.svgElement.setAttribute('width', animData.w);\r\n      this.svgElement.setAttribute('height', animData.h);\r\n      this.svgElement.style.width = '100%';\r\n      this.svgElement.style.height = '100%';\r\n      this.svgElement.style.transform = 'translate3d(0,0,0)';\r\n      this.svgElement.style.contentVisibility = this.renderConfig.contentVisibility;\r\n    }\r\n\r\n    if (this.renderConfig.width) {\r\n      this.svgElement.setAttribute('width', this.renderConfig.width);\r\n    }\r\n\r\n    if (this.renderConfig.height) {\r\n      this.svgElement.setAttribute('height', this.renderConfig.height);\r\n    }\r\n\r\n    if (this.renderConfig.className) {\r\n      this.svgElement.setAttribute('class', this.renderConfig.className);\r\n    }\r\n\r\n    if (this.renderConfig.id) {\r\n      this.svgElement.setAttribute('id', this.renderConfig.id);\r\n    }\r\n\r\n    if (this.renderConfig.focusable !== undefined) {\r\n      this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\r\n    }\r\n\r\n    this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio); // this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n    // this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n\r\n    this.animationItem.wrapper.appendChild(this.svgElement); // Mask animation\r\n\r\n    var defs = this.globalData.defs;\r\n    this.setupGlobalData(animData, defs);\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.data = animData;\r\n    var maskElement = createNS('clipPath');\r\n    var rect = createNS('rect');\r\n    rect.setAttribute('width', animData.w);\r\n    rect.setAttribute('height', animData.h);\r\n    rect.setAttribute('x', 0);\r\n    rect.setAttribute('y', 0);\r\n    var maskId = createElementID();\r\n    maskElement.setAttribute('id', maskId);\r\n    maskElement.appendChild(rect);\r\n    this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + maskId + ')');\r\n    defs.appendChild(maskElement);\r\n    this.layers = animData.layers;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n  };\r\n\r\n  SVGRendererBase.prototype.destroy = function () {\r\n    if (this.animationItem.wrapper) {\r\n      this.animationItem.wrapper.innerText = '';\r\n    }\r\n\r\n    this.layerElement = null;\r\n    this.globalData.defs = null;\r\n    var i;\r\n    var len = this.layers ? this.layers.length : 0;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.elements[i]) {\r\n        this.elements[i].destroy();\r\n      }\r\n    }\r\n\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n  };\r\n\r\n  SVGRendererBase.prototype.updateContainerSize = function () {};\r\n\r\n  SVGRendererBase.prototype.findIndexByInd = function (ind) {\r\n    var i = 0;\r\n    var len = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.layers[i].ind === ind) {\r\n        return i;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  };\r\n\r\n  SVGRendererBase.prototype.buildItem = function (pos) {\r\n    var elements = this.elements;\r\n\r\n    if (elements[pos] || this.layers[pos].ty === 99) {\r\n      return;\r\n    }\r\n\r\n    elements[pos] = true;\r\n    var element = this.createItem(this.layers[pos]);\r\n    elements[pos] = element;\r\n\r\n    if (getExpressionsPlugin()) {\r\n      if (this.layers[pos].ty === 0) {\r\n        this.globalData.projectInterface.registerComposition(element);\r\n      }\r\n\r\n      element.initExpressions();\r\n    }\r\n\r\n    this.appendElementInPos(element, pos);\r\n\r\n    if (this.layers[pos].tt) {\r\n      var elementIndex = 'tp' in this.layers[pos] ? this.findIndexByInd(this.layers[pos].tp) : pos - 1;\r\n\r\n      if (elementIndex === -1) {\r\n        return;\r\n      }\r\n\r\n      if (!this.elements[elementIndex] || this.elements[elementIndex] === true) {\r\n        this.buildItem(elementIndex);\r\n        this.addPendingElement(element);\r\n      } else {\r\n        var matteElement = elements[elementIndex];\r\n        var matteMask = matteElement.getMatte(this.layers[pos].tt);\r\n        element.setMatte(matteMask);\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGRendererBase.prototype.checkPendingElements = function () {\r\n    while (this.pendingElements.length) {\r\n      var element = this.pendingElements.pop();\r\n      element.checkParenting();\r\n\r\n      if (element.data.tt) {\r\n        var i = 0;\r\n        var len = this.elements.length;\r\n\r\n        while (i < len) {\r\n          if (this.elements[i] === element) {\r\n            var elementIndex = 'tp' in element.data ? this.findIndexByInd(element.data.tp) : i - 1;\r\n            var matteElement = this.elements[elementIndex];\r\n            var matteMask = matteElement.getMatte(this.layers[i].tt);\r\n            element.setMatte(matteMask);\r\n            break;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGRendererBase.prototype.renderFrame = function (num) {\r\n    if (this.renderedFrame === num || this.destroyed) {\r\n      return;\r\n    }\r\n\r\n    if (num === null) {\r\n      num = this.renderedFrame;\r\n    } else {\r\n      this.renderedFrame = num;\r\n    } // console.log('-------');\r\n    // console.log('FRAME ',num);\r\n\r\n\r\n    this.globalData.frameNum = num;\r\n    this.globalData.frameId += 1;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n    this.globalData._mdf = false;\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    if (!this.completeLayers) {\r\n      this.checkLayers(num);\r\n    }\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].prepareFrame(num - this.layers[i].st);\r\n      }\r\n    }\r\n\r\n    if (this.globalData._mdf) {\r\n      for (i = 0; i < len; i += 1) {\r\n        if (this.completeLayers || this.elements[i]) {\r\n          this.elements[i].renderFrame();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  SVGRendererBase.prototype.appendElementInPos = function (element, pos) {\r\n    var newElement = element.getBaseElement();\r\n\r\n    if (!newElement) {\r\n      return;\r\n    }\r\n\r\n    var i = 0;\r\n    var nextElement;\r\n\r\n    while (i < pos) {\r\n      if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\r\n        nextElement = this.elements[i].getBaseElement();\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    if (nextElement) {\r\n      this.layerElement.insertBefore(newElement, nextElement);\r\n    } else {\r\n      this.layerElement.appendChild(newElement);\r\n    }\r\n  };\r\n\r\n  SVGRendererBase.prototype.hide = function () {\r\n    this.layerElement.style.display = 'none';\r\n  };\r\n\r\n  SVGRendererBase.prototype.show = function () {\r\n    this.layerElement.style.display = 'block';\r\n  };\r\n\r\n  function ICompElement() {}\r\n\r\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\n  ICompElement.prototype.initElement = function (data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initRenderable();\r\n    this.initHierarchy();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n\r\n    if (this.data.xt || !globalData.progressiveLoad) {\r\n      this.buildAllItems();\r\n    }\r\n\r\n    this.hide();\r\n  };\r\n  /* ICompElement.prototype.hide = function(){\r\n      if(!this.hidden){\r\n          this.hideElement();\r\n          var i,len = this.elements.length;\r\n          for( i = 0; i < len; i+=1 ){\r\n              if(this.elements[i]){\r\n                  this.elements[i].hide();\r\n              }\r\n          }\r\n      }\r\n  }; */\r\n\r\n\r\n  ICompElement.prototype.prepareFrame = function (num) {\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n\r\n    if (!this.isInRange && !this.data.xt) {\r\n      return;\r\n    }\r\n\r\n    if (!this.tm._placeholder) {\r\n      var timeRemapped = this.tm.v;\r\n\r\n      if (timeRemapped === this.data.op) {\r\n        timeRemapped = this.data.op - 1;\r\n      }\r\n\r\n      this.renderedFrame = timeRemapped;\r\n    } else {\r\n      this.renderedFrame = num / this.data.sr;\r\n    }\r\n\r\n    var i;\r\n    var len = this.elements.length;\r\n\r\n    if (!this.completeLayers) {\r\n      this.checkLayers(this.renderedFrame);\r\n    } // This iteration needs to be backwards because of how expressions connect between each other\r\n\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n\r\n        if (this.elements[i]._mdf) {\r\n          this._mdf = true;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  ICompElement.prototype.renderInnerContent = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n  };\r\n\r\n  ICompElement.prototype.setElements = function (elems) {\r\n    this.elements = elems;\r\n  };\r\n\r\n  ICompElement.prototype.getElements = function () {\r\n    return this.elements;\r\n  };\r\n\r\n  ICompElement.prototype.destroyElements = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.elements[i]) {\r\n        this.elements[i].destroy();\r\n      }\r\n    }\r\n  };\r\n\r\n  ICompElement.prototype.destroy = function () {\r\n    this.destroyElements();\r\n    this.destroyBaseElement();\r\n  };\r\n\r\n  function SVGCompElement(data, globalData, comp) {\r\n    this.layers = data.layers;\r\n    this.supports3d = true;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\r\n      _placeholder: true\r\n    };\r\n  }\r\n\r\n  extendPrototype([SVGRendererBase, ICompElement, SVGBaseElement], SVGCompElement);\r\n\r\n  SVGCompElement.prototype.createComp = function (data) {\r\n    return new SVGCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function SVGRenderer(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.svgElement = createNS('svg');\r\n    var ariaLabel = '';\r\n\r\n    if (config && config.title) {\r\n      var titleElement = createNS('title');\r\n      var titleId = createElementID();\r\n      titleElement.setAttribute('id', titleId);\r\n      titleElement.textContent = config.title;\r\n      this.svgElement.appendChild(titleElement);\r\n      ariaLabel += titleId;\r\n    }\r\n\r\n    if (config && config.description) {\r\n      var descElement = createNS('desc');\r\n      var descId = createElementID();\r\n      descElement.setAttribute('id', descId);\r\n      descElement.textContent = config.description;\r\n      this.svgElement.appendChild(descElement);\r\n      ariaLabel += ' ' + descId;\r\n    }\r\n\r\n    if (ariaLabel) {\r\n      this.svgElement.setAttribute('aria-labelledby', ariaLabel);\r\n    }\r\n\r\n    var defs = createNS('defs');\r\n    this.svgElement.appendChild(defs);\r\n    var maskElement = createNS('g');\r\n    this.svgElement.appendChild(maskElement);\r\n    this.layerElement = maskElement;\r\n    this.renderConfig = {\r\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      contentVisibility: config && config.contentVisibility || 'visible',\r\n      progressiveLoad: config && config.progressiveLoad || false,\r\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n      viewBoxOnly: config && config.viewBoxOnly || false,\r\n      viewBoxSize: config && config.viewBoxSize || false,\r\n      className: config && config.className || '',\r\n      id: config && config.id || '',\r\n      focusable: config && config.focusable,\r\n      filterSize: {\r\n        width: config && config.filterSize && config.filterSize.width || '100%',\r\n        height: config && config.filterSize && config.filterSize.height || '100%',\r\n        x: config && config.filterSize && config.filterSize.x || '0%',\r\n        y: config && config.filterSize && config.filterSize.y || '0%'\r\n      },\r\n      width: config && config.width,\r\n      height: config && config.height,\r\n      runExpressions: !config || config.runExpressions === undefined || config.runExpressions\r\n    };\r\n    this.globalData = {\r\n      _mdf: false,\r\n      frameNum: -1,\r\n      defs: defs,\r\n      renderConfig: this.renderConfig\r\n    };\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.destroyed = false;\r\n    this.rendererType = 'svg';\r\n  }\r\n\r\n  extendPrototype([SVGRendererBase], SVGRenderer);\r\n\r\n  SVGRenderer.prototype.createComp = function (data) {\r\n    return new SVGCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function CVContextData() {\r\n    this.saved = [];\r\n    this.cArrPos = 0;\r\n    this.cTr = new Matrix();\r\n    this.cO = 1;\r\n    var i;\r\n    var len = 15;\r\n    this.savedOp = createTypedArray('float32', len);\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n\r\n    this._length = len;\r\n  }\r\n\r\n  CVContextData.prototype.duplicate = function () {\r\n    var newLength = this._length * 2;\r\n    var currentSavedOp = this.savedOp;\r\n    this.savedOp = createTypedArray('float32', newLength);\r\n    this.savedOp.set(currentSavedOp);\r\n    var i = 0;\r\n\r\n    for (i = this._length; i < newLength; i += 1) {\r\n      this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n\r\n    this._length = newLength;\r\n  };\r\n\r\n  CVContextData.prototype.reset = function () {\r\n    this.cArrPos = 0;\r\n    this.cTr.reset();\r\n    this.cO = 1;\r\n  };\r\n\r\n  CVContextData.prototype.popTransform = function () {\r\n    var popped = this.saved[this.cArrPos];\r\n    var i;\r\n    var arr = this.cTr.props;\r\n\r\n    for (i = 0; i < 16; i += 1) {\r\n      arr[i] = popped[i];\r\n    }\r\n\r\n    return popped;\r\n  };\r\n\r\n  CVContextData.prototype.popOpacity = function () {\r\n    var popped = this.savedOp[this.cArrPos];\r\n    this.cO = popped;\r\n    return popped;\r\n  };\r\n\r\n  CVContextData.prototype.pop = function () {\r\n    this.cArrPos -= 1;\r\n    var transform = this.popTransform();\r\n    var opacity = this.popOpacity();\r\n    return {\r\n      transform: transform,\r\n      opacity: opacity\r\n    };\r\n  };\r\n\r\n  CVContextData.prototype.push = function () {\r\n    var props = this.cTr.props;\r\n\r\n    if (this._length <= this.cArrPos) {\r\n      this.duplicate();\r\n    }\r\n\r\n    var i;\r\n    var arr = this.saved[this.cArrPos];\r\n\r\n    for (i = 0; i < 16; i += 1) {\r\n      arr[i] = props[i];\r\n    }\r\n\r\n    this.savedOp[this.cArrPos] = this.cO;\r\n    this.cArrPos += 1;\r\n  };\r\n\r\n  CVContextData.prototype.getTransform = function () {\r\n    return this.cTr;\r\n  };\r\n\r\n  CVContextData.prototype.getOpacity = function () {\r\n    return this.cO;\r\n  };\r\n\r\n  CVContextData.prototype.setOpacity = function (value) {\r\n    this.cO = value;\r\n  };\r\n\r\n  function ShapeTransformManager() {\r\n    this.sequences = {};\r\n    this.sequenceList = [];\r\n    this.transform_key_count = 0;\r\n  }\r\n\r\n  ShapeTransformManager.prototype = {\r\n    addTransformSequence: function addTransformSequence(transforms) {\r\n      var i;\r\n      var len = transforms.length;\r\n      var key = '_';\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        key += transforms[i].transform.key + '_';\r\n      }\r\n\r\n      var sequence = this.sequences[key];\r\n\r\n      if (!sequence) {\r\n        sequence = {\r\n          transforms: [].concat(transforms),\r\n          finalTransform: new Matrix(),\r\n          _mdf: false\r\n        };\r\n        this.sequences[key] = sequence;\r\n        this.sequenceList.push(sequence);\r\n      }\r\n\r\n      return sequence;\r\n    },\r\n    processSequence: function processSequence(sequence, isFirstFrame) {\r\n      var i = 0;\r\n      var len = sequence.transforms.length;\r\n      var _mdf = isFirstFrame;\r\n\r\n      while (i < len && !isFirstFrame) {\r\n        if (sequence.transforms[i].transform.mProps._mdf) {\r\n          _mdf = true;\r\n          break;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      if (_mdf) {\r\n        var props;\r\n        sequence.finalTransform.reset();\r\n\r\n        for (i = len - 1; i >= 0; i -= 1) {\r\n          props = sequence.transforms[i].transform.mProps.v.props;\r\n          sequence.finalTransform.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\r\n        }\r\n      }\r\n\r\n      sequence._mdf = _mdf;\r\n    },\r\n    processSequences: function processSequences(isFirstFrame) {\r\n      var i;\r\n      var len = this.sequenceList.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.processSequence(this.sequenceList[i], isFirstFrame);\r\n      }\r\n    },\r\n    getNewKey: function getNewKey() {\r\n      this.transform_key_count += 1;\r\n      return '_' + this.transform_key_count;\r\n    }\r\n  };\r\n\r\n  var lumaLoader = function lumaLoader() {\r\n    var id = '__lottie_element_luma_buffer';\r\n    var lumaBuffer = null;\r\n    var lumaBufferCtx = null;\r\n    var svg = null; // This alternate solution has a slight delay before the filter is applied, resulting in a flicker on the first frame.\r\n    // Keeping this here for reference, and in the future, if offscreen canvas supports url filters, this can be used.\r\n    // For now, neither of them work for offscreen canvas, so canvas workers can't support the luma track matte mask.\r\n    // Naming it solution 2 to mark the extra comment lines.\r\n\r\n    /*\r\n    var svgString = [\r\n      '<svg xmlns=\"http://www.w3.org/2000/svg\">',\r\n      '<filter id=\"' + id + '\">',\r\n      '<feColorMatrix type=\"matrix\" color-interpolation-filters=\"sRGB\" values=\"',\r\n      '0.3, 0.3, 0.3, 0, 0, ',\r\n      '0.3, 0.3, 0.3, 0, 0, ',\r\n      '0.3, 0.3, 0.3, 0, 0, ',\r\n      '0.3, 0.3, 0.3, 0, 0',\r\n      '\"/>',\r\n      '</filter>',\r\n      '</svg>',\r\n    ].join('');\r\n    var blob = new Blob([svgString], { type: 'image/svg+xml' });\r\n    var url = URL.createObjectURL(blob);\r\n    */\r\n\r\n    function createLumaSvgFilter() {\r\n      var _svg = createNS('svg');\r\n\r\n      var fil = createNS('filter');\r\n      var matrix = createNS('feColorMatrix');\r\n      fil.setAttribute('id', id);\r\n      matrix.setAttribute('type', 'matrix');\r\n      matrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n      matrix.setAttribute('values', '0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0');\r\n      fil.appendChild(matrix);\r\n\r\n      _svg.appendChild(fil);\r\n\r\n      _svg.setAttribute('id', id + '_svg');\r\n\r\n      if (featureSupport.svgLumaHidden) {\r\n        _svg.style.display = 'none';\r\n      }\r\n\r\n      return _svg;\r\n    }\r\n\r\n    function loadLuma() {\r\n      if (!lumaBuffer) {\r\n        svg = createLumaSvgFilter();\r\n        document.body.appendChild(svg);\r\n        lumaBuffer = createTag('canvas');\r\n        lumaBufferCtx = lumaBuffer.getContext('2d'); // lumaBufferCtx.filter = `url('${url}#__lottie_element_luma_buffer')`; // part of solution 2\r\n\r\n        lumaBufferCtx.filter = 'url(#' + id + ')';\r\n        lumaBufferCtx.fillStyle = 'rgba(0,0,0,0)';\r\n        lumaBufferCtx.fillRect(0, 0, 1, 1);\r\n      }\r\n    }\r\n\r\n    function getLuma(canvas) {\r\n      if (!lumaBuffer) {\r\n        loadLuma();\r\n      }\r\n\r\n      lumaBuffer.width = canvas.width;\r\n      lumaBuffer.height = canvas.height; // lumaBufferCtx.filter = `url('${url}#__lottie_element_luma_buffer')`; // part of solution 2\r\n\r\n      lumaBufferCtx.filter = 'url(#' + id + ')';\r\n      return lumaBuffer;\r\n    }\r\n\r\n    return {\r\n      load: loadLuma,\r\n      get: getLuma\r\n    };\r\n  };\r\n\r\n  function createCanvas(width, height) {\r\n    if (featureSupport.offscreenCanvas) {\r\n      return new OffscreenCanvas(width, height);\r\n    }\r\n\r\n    var canvas = createTag('canvas');\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    return canvas;\r\n  }\r\n\r\n  var assetLoader = function () {\r\n    return {\r\n      loadLumaCanvas: lumaLoader.load,\r\n      getLumaCanvas: lumaLoader.get,\r\n      createCanvas: createCanvas\r\n    };\r\n  }();\r\n\r\n  function CVEffects() {}\r\n\r\n  CVEffects.prototype.renderFrame = function () {};\r\n\r\n  function CVMaskElement(data, element) {\r\n    this.data = data;\r\n    this.element = element;\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.viewData = createSizedArray(this.masksProperties.length);\r\n    var i;\r\n    var len = this.masksProperties.length;\r\n    var hasMasks = false;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.masksProperties[i].mode !== 'n') {\r\n        hasMasks = true;\r\n      }\r\n\r\n      this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\r\n    }\r\n\r\n    this.hasMasks = hasMasks;\r\n\r\n    if (hasMasks) {\r\n      this.element.addRenderableComponent(this);\r\n    }\r\n  }\r\n\r\n  CVMaskElement.prototype.renderFrame = function () {\r\n    if (!this.hasMasks) {\r\n      return;\r\n    }\r\n\r\n    var transform = this.element.finalTransform.mat;\r\n    var ctx = this.element.canvasContext;\r\n    var i;\r\n    var len = this.masksProperties.length;\r\n    var pt;\r\n    var pts;\r\n    var data;\r\n    ctx.beginPath();\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.masksProperties[i].mode !== 'n') {\r\n        if (this.masksProperties[i].inv) {\r\n          ctx.moveTo(0, 0);\r\n          ctx.lineTo(this.element.globalData.compSize.w, 0);\r\n          ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\r\n          ctx.lineTo(0, this.element.globalData.compSize.h);\r\n          ctx.lineTo(0, 0);\r\n        }\r\n\r\n        data = this.viewData[i].v;\r\n        pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\r\n        ctx.moveTo(pt[0], pt[1]);\r\n        var j;\r\n        var jLen = data._length;\r\n\r\n        for (j = 1; j < jLen; j += 1) {\r\n          pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\r\n          ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n        }\r\n\r\n        pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\r\n        ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n      }\r\n    }\r\n\r\n    this.element.globalData.renderer.save(true);\r\n    ctx.clip();\r\n  };\r\n\r\n  CVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\n  CVMaskElement.prototype.destroy = function () {\r\n    this.element = null;\r\n  };\r\n\r\n  function CVBaseElement() {}\r\n\r\n  var operationsMap = {\r\n    1: 'source-in',\r\n    2: 'source-out',\r\n    3: 'source-in',\r\n    4: 'source-out'\r\n  };\r\n  CVBaseElement.prototype = {\r\n    createElements: function createElements() {},\r\n    initRendererElement: function initRendererElement() {},\r\n    createContainerElements: function createContainerElements() {\r\n      // If the layer is masked we will use two buffers to store each different states of the drawing\r\n      // This solution is not ideal for several reason. But unfortunately, because of the recursive\r\n      // nature of the render tree, it's the only simple way to make sure one inner mask doesn't override an outer mask.\r\n      // TODO: try to reduce the size of these buffers to the size of the composition contaning the layer\r\n      // It might be challenging because the layer most likely is transformed in some way\r\n      if (this.data.tt >= 1) {\r\n        this.buffers = [];\r\n        var canvasContext = this.globalData.canvasContext;\r\n        var bufferCanvas = assetLoader.createCanvas(canvasContext.canvas.width, canvasContext.canvas.height);\r\n        this.buffers.push(bufferCanvas);\r\n        var bufferCanvas2 = assetLoader.createCanvas(canvasContext.canvas.width, canvasContext.canvas.height);\r\n        this.buffers.push(bufferCanvas2);\r\n\r\n        if (this.data.tt >= 3 && !document._isProxy) {\r\n          assetLoader.loadLumaCanvas();\r\n        }\r\n      }\r\n\r\n      this.canvasContext = this.globalData.canvasContext;\r\n      this.transformCanvas = this.globalData.transformCanvas;\r\n      this.renderableEffectsManager = new CVEffects(this);\r\n    },\r\n    createContent: function createContent() {},\r\n    setBlendMode: function setBlendMode() {\r\n      var globalData = this.globalData;\r\n\r\n      if (globalData.blendMode !== this.data.bm) {\r\n        globalData.blendMode = this.data.bm;\r\n        var blendModeValue = getBlendMode(this.data.bm);\r\n        globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n      }\r\n    },\r\n    createRenderableComponents: function createRenderableComponents() {\r\n      this.maskManager = new CVMaskElement(this.data, this);\r\n    },\r\n    hideElement: function hideElement() {\r\n      if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n        this.hidden = true;\r\n      }\r\n    },\r\n    showElement: function showElement() {\r\n      if (this.isInRange && !this.isTransparent) {\r\n        this.hidden = false;\r\n        this._isFirstFrame = true;\r\n        this.maskManager._isFirstFrame = true;\r\n      }\r\n    },\r\n    clearCanvas: function clearCanvas(canvasContext) {\r\n      canvasContext.clearRect(this.transformCanvas.tx, this.transformCanvas.ty, this.transformCanvas.w * this.transformCanvas.sx, this.transformCanvas.h * this.transformCanvas.sy);\r\n    },\r\n    prepareLayer: function prepareLayer() {\r\n      if (this.data.tt >= 1) {\r\n        var buffer = this.buffers[0];\r\n        var bufferCtx = buffer.getContext('2d');\r\n        this.clearCanvas(bufferCtx); // on the first buffer we store the current state of the global drawing\r\n\r\n        bufferCtx.drawImage(this.canvasContext.canvas, 0, 0); // The next four lines are to clear the canvas\r\n        // TODO: Check if there is a way to clear the canvas without resetting the transform\r\n\r\n        this.currentTransform = this.canvasContext.getTransform();\r\n        this.canvasContext.setTransform(1, 0, 0, 1, 0, 0);\r\n        this.clearCanvas(this.canvasContext);\r\n        this.canvasContext.setTransform(this.currentTransform);\r\n      }\r\n    },\r\n    exitLayer: function exitLayer() {\r\n      if (this.data.tt >= 1) {\r\n        var buffer = this.buffers[1]; // On the second buffer we store the current state of the global drawing\r\n        // that only contains the content of this layer\r\n        // (if it is a composition, it also includes the nested layers)\r\n\r\n        var bufferCtx = buffer.getContext('2d');\r\n        this.clearCanvas(bufferCtx);\r\n        bufferCtx.drawImage(this.canvasContext.canvas, 0, 0); // We clear the canvas again\r\n\r\n        this.canvasContext.setTransform(1, 0, 0, 1, 0, 0);\r\n        this.clearCanvas(this.canvasContext);\r\n        this.canvasContext.setTransform(this.currentTransform); // We draw the mask\r\n\r\n        var mask = this.comp.getElementById('tp' in this.data ? this.data.tp : this.data.ind - 1);\r\n        mask.renderFrame(true); // We draw the second buffer (that contains the content of this layer)\r\n\r\n        this.canvasContext.setTransform(1, 0, 0, 1, 0, 0); // If the mask is a Luma matte, we need to do two extra painting operations\r\n        // the _isProxy check is to avoid drawing a fake canvas in workers that will throw an error\r\n\r\n        if (this.data.tt >= 3 && !document._isProxy) {\r\n          // We copy the painted mask to a buffer that has a color matrix filter applied to it\r\n          // that applies the rgb values to the alpha channel\r\n          var lumaBuffer = assetLoader.getLumaCanvas(this.canvasContext.canvas);\r\n          var lumaBufferCtx = lumaBuffer.getContext('2d');\r\n          lumaBufferCtx.drawImage(this.canvasContext.canvas, 0, 0);\r\n          this.clearCanvas(this.canvasContext); // we repaint the context with the mask applied to it\r\n\r\n          this.canvasContext.drawImage(lumaBuffer, 0, 0);\r\n        }\r\n\r\n        this.canvasContext.globalCompositeOperation = operationsMap[this.data.tt];\r\n        this.canvasContext.drawImage(buffer, 0, 0); // We finally draw the first buffer (that contains the content of the global drawing)\r\n        // We use destination-over to draw the global drawing below the current layer\r\n\r\n        this.canvasContext.globalCompositeOperation = 'destination-over';\r\n        this.canvasContext.drawImage(this.buffers[0], 0, 0);\r\n        this.canvasContext.setTransform(this.currentTransform); // We reset the globalCompositeOperation to source-over, the standard type of operation\r\n\r\n        this.canvasContext.globalCompositeOperation = 'source-over';\r\n      }\r\n    },\r\n    renderFrame: function renderFrame(forceRender) {\r\n      if (this.hidden || this.data.hd) {\r\n        return;\r\n      }\r\n\r\n      if (this.data.td === 1 && !forceRender) {\r\n        return;\r\n      }\r\n\r\n      this.renderTransform();\r\n      this.renderRenderable();\r\n      this.setBlendMode();\r\n      var forceRealStack = this.data.ty === 0;\r\n      this.prepareLayer();\r\n      this.globalData.renderer.save(forceRealStack);\r\n      this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n      this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\r\n      this.renderInnerContent();\r\n      this.globalData.renderer.restore(forceRealStack);\r\n      this.exitLayer();\r\n\r\n      if (this.maskManager.hasMasks) {\r\n        this.globalData.renderer.restore(true);\r\n      }\r\n\r\n      if (this._isFirstFrame) {\r\n        this._isFirstFrame = false;\r\n      }\r\n    },\r\n    destroy: function destroy() {\r\n      this.canvasContext = null;\r\n      this.data = null;\r\n      this.globalData = null;\r\n      this.maskManager.destroy();\r\n    },\r\n    mHelper: new Matrix()\r\n  };\r\n  CVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\r\n  CVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\r\n\r\n  function CVShapeData(element, data, styles, transformsManager) {\r\n    this.styledShapes = [];\r\n    this.tr = [0, 0, 0, 0, 0, 0];\r\n    var ty = 4;\r\n\r\n    if (data.ty === 'rc') {\r\n      ty = 5;\r\n    } else if (data.ty === 'el') {\r\n      ty = 6;\r\n    } else if (data.ty === 'sr') {\r\n      ty = 7;\r\n    }\r\n\r\n    this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\r\n    var i;\r\n    var len = styles.length;\r\n    var styledShape;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!styles[i].closed) {\r\n        styledShape = {\r\n          transforms: transformsManager.addTransformSequence(styles[i].transforms),\r\n          trNodes: []\r\n        };\r\n        this.styledShapes.push(styledShape);\r\n        styles[i].elements.push(styledShape);\r\n      }\r\n    }\r\n  }\r\n\r\n  CVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\r\n\r\n  function CVShapeElement(data, globalData, comp) {\r\n    this.shapes = [];\r\n    this.shapesData = data.shapes;\r\n    this.stylesList = [];\r\n    this.itemsData = [];\r\n    this.prevViewData = [];\r\n    this.shapeModifiers = [];\r\n    this.processedElements = [];\r\n    this.transformsManager = new ShapeTransformManager();\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\r\n  CVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\r\n  CVShapeElement.prototype.transformHelper = {\r\n    opacity: 1,\r\n    _opMdf: false\r\n  };\r\n  CVShapeElement.prototype.dashResetter = [];\r\n\r\n  CVShapeElement.prototype.createContent = function () {\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n  };\r\n\r\n  CVShapeElement.prototype.createStyleElement = function (data, transforms) {\r\n    var styleElem = {\r\n      data: data,\r\n      type: data.ty,\r\n      preTransforms: this.transformsManager.addTransformSequence(transforms),\r\n      transforms: [],\r\n      elements: [],\r\n      closed: data.hd === true\r\n    };\r\n    var elementData = {};\r\n\r\n    if (data.ty === 'fl' || data.ty === 'st') {\r\n      elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\r\n\r\n      if (!elementData.c.k) {\r\n        styleElem.co = 'rgb(' + bmFloor(elementData.c.v[0]) + ',' + bmFloor(elementData.c.v[1]) + ',' + bmFloor(elementData.c.v[2]) + ')';\r\n      }\r\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n      elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\r\n      elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\r\n      elementData.h = PropertyFactory.getProp(this, data.h || {\r\n        k: 0\r\n      }, 0, 0.01, this);\r\n      elementData.a = PropertyFactory.getProp(this, data.a || {\r\n        k: 0\r\n      }, 0, degToRads, this);\r\n      elementData.g = new GradientProperty(this, data.g, this);\r\n    }\r\n\r\n    elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\r\n\r\n    if (data.ty === 'st' || data.ty === 'gs') {\r\n      styleElem.lc = lineCapEnum[data.lc || 2];\r\n      styleElem.lj = lineJoinEnum[data.lj || 2];\r\n\r\n      if (data.lj == 1) {\r\n        // eslint-disable-line eqeqeq\r\n        styleElem.ml = data.ml;\r\n      }\r\n\r\n      elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\r\n\r\n      if (!elementData.w.k) {\r\n        styleElem.wi = elementData.w.v;\r\n      }\r\n\r\n      if (data.d) {\r\n        var d = new DashProperty(this, data.d, 'canvas', this);\r\n        elementData.d = d;\r\n\r\n        if (!elementData.d.k) {\r\n          styleElem.da = elementData.d.dashArray;\r\n          styleElem[\"do\"] = elementData.d.dashoffset[0];\r\n        }\r\n      }\r\n    } else {\r\n      styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n    }\r\n\r\n    this.stylesList.push(styleElem);\r\n    elementData.style = styleElem;\r\n    return elementData;\r\n  };\r\n\r\n  CVShapeElement.prototype.createGroupElement = function () {\r\n    var elementData = {\r\n      it: [],\r\n      prevViewData: []\r\n    };\r\n    return elementData;\r\n  };\r\n\r\n  CVShapeElement.prototype.createTransformElement = function (data) {\r\n    var elementData = {\r\n      transform: {\r\n        opacity: 1,\r\n        _opMdf: false,\r\n        key: this.transformsManager.getNewKey(),\r\n        op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\r\n        mProps: TransformPropertyFactory.getTransformProperty(this, data, this)\r\n      }\r\n    };\r\n    return elementData;\r\n  };\r\n\r\n  CVShapeElement.prototype.createShapeElement = function (data) {\r\n    var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    return elementData;\r\n  };\r\n\r\n  CVShapeElement.prototype.reloadShapes = function () {\r\n    this._isFirstFrame = true;\r\n    var i;\r\n    var len = this.itemsData.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n    len = this.dynamicProperties.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.dynamicProperties[i].getValue();\r\n    }\r\n\r\n    this.renderModifiers();\r\n    this.transformsManager.processSequences(this._isFirstFrame);\r\n  };\r\n\r\n  CVShapeElement.prototype.addTransformToStyleList = function (transform) {\r\n    var i;\r\n    var len = this.stylesList.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!this.stylesList[i].closed) {\r\n        this.stylesList[i].transforms.push(transform);\r\n      }\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.removeTransformFromStyleList = function () {\r\n    var i;\r\n    var len = this.stylesList.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!this.stylesList[i].closed) {\r\n        this.stylesList[i].transforms.pop();\r\n      }\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.closeStyles = function (styles) {\r\n    var i;\r\n    var len = styles.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      styles[i].closed = true;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\r\n    var i;\r\n    var len = arr.length - 1;\r\n    var j;\r\n    var jLen;\r\n    var ownStyles = [];\r\n    var ownModifiers = [];\r\n    var processedPos;\r\n    var modifier;\r\n    var currentTransform;\r\n    var ownTransforms = [].concat(transforms);\r\n\r\n    for (i = len; i >= 0; i -= 1) {\r\n      processedPos = this.searchProcessedElement(arr[i]);\r\n\r\n      if (!processedPos) {\r\n        arr[i]._shouldRender = shouldRender;\r\n      } else {\r\n        itemsData[i] = prevViewData[processedPos - 1];\r\n      }\r\n\r\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\r\n        } else {\r\n          itemsData[i].style.closed = false;\r\n        }\r\n\r\n        ownStyles.push(itemsData[i].style);\r\n      } else if (arr[i].ty === 'gr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createGroupElement(arr[i]);\r\n        } else {\r\n          jLen = itemsData[i].it.length;\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n          }\r\n        }\r\n\r\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\r\n      } else if (arr[i].ty === 'tr') {\r\n        if (!processedPos) {\r\n          currentTransform = this.createTransformElement(arr[i]);\r\n          itemsData[i] = currentTransform;\r\n        }\r\n\r\n        ownTransforms.push(itemsData[i]);\r\n        this.addTransformToStyleList(itemsData[i]);\r\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n        if (!processedPos) {\r\n          itemsData[i] = this.createShapeElement(arr[i]);\r\n        }\r\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'pb' || arr[i].ty === 'zz' || arr[i].ty === 'op') {\r\n        if (!processedPos) {\r\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n          modifier.init(this, arr[i]);\r\n          itemsData[i] = modifier;\r\n          this.shapeModifiers.push(modifier);\r\n        } else {\r\n          modifier = itemsData[i];\r\n          modifier.closed = false;\r\n        }\r\n\r\n        ownModifiers.push(modifier);\r\n      } else if (arr[i].ty === 'rp') {\r\n        if (!processedPos) {\r\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n          itemsData[i] = modifier;\r\n          modifier.init(this, arr, i, itemsData);\r\n          this.shapeModifiers.push(modifier);\r\n          shouldRender = false;\r\n        } else {\r\n          modifier = itemsData[i];\r\n          modifier.closed = true;\r\n        }\r\n\r\n        ownModifiers.push(modifier);\r\n      }\r\n\r\n      this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n\r\n    this.removeTransformFromStyleList();\r\n    this.closeStyles(ownStyles);\r\n    len = ownModifiers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      ownModifiers[i].closed = true;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderInnerContent = function () {\r\n    this.transformHelper.opacity = 1;\r\n    this.transformHelper._opMdf = false;\r\n    this.renderModifiers();\r\n    this.transformsManager.processSequences(this._isFirstFrame);\r\n    this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\r\n  };\r\n\r\n  CVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\r\n    if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\r\n      groupTransform.opacity = parentTransform.opacity;\r\n      groupTransform.opacity *= groupTransform.op.v;\r\n      groupTransform._opMdf = true;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.drawLayer = function () {\r\n    var i;\r\n    var len = this.stylesList.length;\r\n    var j;\r\n    var jLen;\r\n    var k;\r\n    var kLen;\r\n    var elems;\r\n    var nodes;\r\n    var renderer = this.globalData.renderer;\r\n    var ctx = this.globalData.canvasContext;\r\n    var type;\r\n    var currentStyle;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      currentStyle = this.stylesList[i];\r\n      type = currentStyle.type; // Skipping style when\r\n      // Stroke width equals 0\r\n      // style should not be rendered (extra unused repeaters)\r\n      // current opacity equals 0\r\n      // global opacity equals 0\r\n\r\n      if (!((type === 'st' || type === 'gs') && currentStyle.wi === 0 || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0)) {\r\n        renderer.save();\r\n        elems = currentStyle.elements;\r\n\r\n        if (type === 'st' || type === 'gs') {\r\n          ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\r\n          ctx.lineWidth = currentStyle.wi;\r\n          ctx.lineCap = currentStyle.lc;\r\n          ctx.lineJoin = currentStyle.lj;\r\n          ctx.miterLimit = currentStyle.ml || 0;\r\n        } else {\r\n          ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\r\n        }\r\n\r\n        renderer.ctxOpacity(currentStyle.coOp);\r\n\r\n        if (type !== 'st' && type !== 'gs') {\r\n          ctx.beginPath();\r\n        }\r\n\r\n        renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\r\n        jLen = elems.length;\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          if (type === 'st' || type === 'gs') {\r\n            ctx.beginPath();\r\n\r\n            if (currentStyle.da) {\r\n              ctx.setLineDash(currentStyle.da);\r\n              ctx.lineDashOffset = currentStyle[\"do\"];\r\n            }\r\n          }\r\n\r\n          nodes = elems[j].trNodes;\r\n          kLen = nodes.length;\r\n\r\n          for (k = 0; k < kLen; k += 1) {\r\n            if (nodes[k].t === 'm') {\r\n              ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\r\n            } else if (nodes[k].t === 'c') {\r\n              ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\r\n            } else {\r\n              ctx.closePath();\r\n            }\r\n          }\r\n\r\n          if (type === 'st' || type === 'gs') {\r\n            ctx.stroke();\r\n\r\n            if (currentStyle.da) {\r\n              ctx.setLineDash(this.dashResetter);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (type !== 'st' && type !== 'gs') {\r\n          ctx.fill(currentStyle.r);\r\n        }\r\n\r\n        renderer.restore();\r\n      }\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\r\n    var i;\r\n    var len = items.length - 1;\r\n    var groupTransform;\r\n    groupTransform = parentTransform;\r\n\r\n    for (i = len; i >= 0; i -= 1) {\r\n      if (items[i].ty === 'tr') {\r\n        groupTransform = data[i].transform;\r\n        this.renderShapeTransform(parentTransform, groupTransform);\r\n      } else if (items[i].ty === 'sh' || items[i].ty === 'el' || items[i].ty === 'rc' || items[i].ty === 'sr') {\r\n        this.renderPath(items[i], data[i]);\r\n      } else if (items[i].ty === 'fl') {\r\n        this.renderFill(items[i], data[i], groupTransform);\r\n      } else if (items[i].ty === 'st') {\r\n        this.renderStroke(items[i], data[i], groupTransform);\r\n      } else if (items[i].ty === 'gf' || items[i].ty === 'gs') {\r\n        this.renderGradientFill(items[i], data[i], groupTransform);\r\n      } else if (items[i].ty === 'gr') {\r\n        this.renderShape(groupTransform, items[i].it, data[i].it);\r\n      } else if (items[i].ty === 'tm') {//\r\n      }\r\n    }\r\n\r\n    if (isMain) {\r\n      this.drawLayer();\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\r\n    if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\r\n      var shapeNodes = styledShape.trNodes;\r\n      var paths = shape.paths;\r\n      var i;\r\n      var len;\r\n      var j;\r\n      var jLen = paths._length;\r\n      shapeNodes.length = 0;\r\n      var groupTransformMat = styledShape.transforms.finalTransform;\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        var pathNodes = paths.shapes[j];\r\n\r\n        if (pathNodes && pathNodes.v) {\r\n          len = pathNodes._length;\r\n\r\n          for (i = 1; i < len; i += 1) {\r\n            if (i === 1) {\r\n              shapeNodes.push({\r\n                t: 'm',\r\n                p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n              });\r\n            }\r\n\r\n            shapeNodes.push({\r\n              t: 'c',\r\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\r\n            });\r\n          }\r\n\r\n          if (len === 1) {\r\n            shapeNodes.push({\r\n              t: 'm',\r\n              p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n            });\r\n          }\r\n\r\n          if (pathNodes.c && len) {\r\n            shapeNodes.push({\r\n              t: 'c',\r\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\r\n            });\r\n            shapeNodes.push({\r\n              t: 'z'\r\n            });\r\n          }\r\n        }\r\n      }\r\n\r\n      styledShape.trNodes = shapeNodes;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderPath = function (pathData, itemData) {\r\n    if (pathData.hd !== true && pathData._shouldRender) {\r\n      var i;\r\n      var len = itemData.styledShapes.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\r\n      }\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\r\n    var styleElem = itemData.style;\r\n\r\n    if (itemData.c._mdf || this._isFirstFrame) {\r\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\r\n    }\r\n\r\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\r\n    var styleElem = itemData.style;\r\n    var grd;\r\n\r\n    if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf)) {\r\n      var ctx = this.globalData.canvasContext;\r\n      var pt1 = itemData.s.v;\r\n      var pt2 = itemData.e.v;\r\n\r\n      if (styleData.t === 1) {\r\n        grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\r\n      } else {\r\n        var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n        var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n        var percent = itemData.h.v;\r\n\r\n        if (percent >= 1) {\r\n          percent = 0.99;\r\n        } else if (percent <= -1) {\r\n          percent = -0.99;\r\n        }\r\n\r\n        var dist = rad * percent;\r\n        var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n        var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n        grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\r\n      }\r\n\r\n      var i;\r\n      var len = styleData.g.p;\r\n      var cValues = itemData.g.c;\r\n      var opacity = 1;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (itemData.g._hasOpacity && itemData.g._collapsable) {\r\n          opacity = itemData.g.o[i * 2 + 1];\r\n        }\r\n\r\n        grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\r\n      }\r\n\r\n      styleElem.grd = grd;\r\n    }\r\n\r\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n  };\r\n\r\n  CVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n\r\n    if (d && (d._mdf || this._isFirstFrame)) {\r\n      styleElem.da = d.dashArray;\r\n      styleElem[\"do\"] = d.dashoffset[0];\r\n    }\r\n\r\n    if (itemData.c._mdf || this._isFirstFrame) {\r\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\r\n    }\r\n\r\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n    }\r\n\r\n    if (itemData.w._mdf || this._isFirstFrame) {\r\n      styleElem.wi = itemData.w.v;\r\n    }\r\n  };\r\n\r\n  CVShapeElement.prototype.destroy = function () {\r\n    this.shapesData = null;\r\n    this.globalData = null;\r\n    this.canvasContext = null;\r\n    this.stylesList.length = 0;\r\n    this.itemsData.length = 0;\r\n  };\r\n\r\n  function CVTextElement(data, globalData, comp) {\r\n    this.textSpans = [];\r\n    this.yOffset = 0;\r\n    this.fillColorAnim = false;\r\n    this.strokeColorAnim = false;\r\n    this.strokeWidthAnim = false;\r\n    this.stroke = false;\r\n    this.fill = false;\r\n    this.justifyOffset = 0;\r\n    this.currentRender = null;\r\n    this.renderType = 'canvas';\r\n    this.values = {\r\n      fill: 'rgba(0,0,0,0)',\r\n      stroke: 'rgba(0,0,0,0)',\r\n      sWidth: 0,\r\n      fValue: ''\r\n    };\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\r\n  CVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\r\n\r\n  CVTextElement.prototype.buildNewText = function () {\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n    var hasFill = false;\r\n\r\n    if (documentData.fc) {\r\n      hasFill = true;\r\n      this.values.fill = this.buildColor(documentData.fc);\r\n    } else {\r\n      this.values.fill = 'rgba(0,0,0,0)';\r\n    }\r\n\r\n    this.fill = hasFill;\r\n    var hasStroke = false;\r\n\r\n    if (documentData.sc) {\r\n      hasStroke = true;\r\n      this.values.stroke = this.buildColor(documentData.sc);\r\n      this.values.sWidth = documentData.sw;\r\n    }\r\n\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    var i;\r\n    var len;\r\n    var letters = documentData.l;\r\n    var matrixHelper = this.mHelper;\r\n    this.stroke = hasStroke;\r\n    this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n    len = documentData.finalText.length; // this.tHelper.font = this.values.fValue;\r\n\r\n    var charData;\r\n    var shapeData;\r\n    var k;\r\n    var kLen;\r\n    var shapes;\r\n    var j;\r\n    var jLen;\r\n    var pathNodes;\r\n    var commands;\r\n    var pathArr;\r\n    var singleShape = this.data.singleShape;\r\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n    var xPos = 0;\r\n    var yPos = 0;\r\n    var firstLine = true;\r\n    var cnt = 0;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n      shapeData = charData && charData.data || {};\r\n      matrixHelper.reset();\r\n\r\n      if (singleShape && letters[i].n) {\r\n        xPos = -trackingOffset;\r\n        yPos += documentData.yOffset;\r\n        yPos += firstLine ? 1 : 0;\r\n        firstLine = false;\r\n      }\r\n\r\n      shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n      jLen = shapes.length;\r\n      matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n\r\n      if (singleShape) {\r\n        this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n      }\r\n\r\n      commands = createSizedArray(jLen - 1);\r\n      var commandsCounter = 0;\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        if (shapes[j].ty === 'sh') {\r\n          kLen = shapes[j].ks.k.i.length;\r\n          pathNodes = shapes[j].ks.k;\r\n          pathArr = [];\r\n\r\n          for (k = 1; k < kLen; k += 1) {\r\n            if (k === 1) {\r\n              pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n            }\r\n\r\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\r\n          }\r\n\r\n          pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n          commands[commandsCounter] = pathArr;\r\n          commandsCounter += 1;\r\n        }\r\n      }\r\n\r\n      if (singleShape) {\r\n        xPos += letters[i].l;\r\n        xPos += trackingOffset;\r\n      }\r\n\r\n      if (this.textSpans[cnt]) {\r\n        this.textSpans[cnt].elem = commands;\r\n      } else {\r\n        this.textSpans[cnt] = {\r\n          elem: commands\r\n        };\r\n      }\r\n\r\n      cnt += 1;\r\n    }\r\n  };\r\n\r\n  CVTextElement.prototype.renderInnerContent = function () {\r\n    var ctx = this.canvasContext;\r\n    ctx.font = this.values.fValue;\r\n    ctx.lineCap = 'butt';\r\n    ctx.lineJoin = 'miter';\r\n    ctx.miterLimit = 4;\r\n\r\n    if (!this.data.singleShape) {\r\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    }\r\n\r\n    var i;\r\n    var len;\r\n    var j;\r\n    var jLen;\r\n    var k;\r\n    var kLen;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n    var letters = this.textProperty.currentData.l;\r\n    len = letters.length;\r\n    var renderedLetter;\r\n    var lastFill = null;\r\n    var lastStroke = null;\r\n    var lastStrokeW = null;\r\n    var commands;\r\n    var pathArr;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!letters[i].n) {\r\n        renderedLetter = renderedLetters[i];\r\n\r\n        if (renderedLetter) {\r\n          this.globalData.renderer.save();\r\n          this.globalData.renderer.ctxTransform(renderedLetter.p);\r\n          this.globalData.renderer.ctxOpacity(renderedLetter.o);\r\n        }\r\n\r\n        if (this.fill) {\r\n          if (renderedLetter && renderedLetter.fc) {\r\n            if (lastFill !== renderedLetter.fc) {\r\n              lastFill = renderedLetter.fc;\r\n              ctx.fillStyle = renderedLetter.fc;\r\n            }\r\n          } else if (lastFill !== this.values.fill) {\r\n            lastFill = this.values.fill;\r\n            ctx.fillStyle = this.values.fill;\r\n          }\r\n\r\n          commands = this.textSpans[i].elem;\r\n          jLen = commands.length;\r\n          this.globalData.canvasContext.beginPath();\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            pathArr = commands[j];\r\n            kLen = pathArr.length;\r\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n\r\n            for (k = 2; k < kLen; k += 6) {\r\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n            }\r\n          }\r\n\r\n          this.globalData.canvasContext.closePath();\r\n          this.globalData.canvasContext.fill(); /// ctx.fillText(this.textSpans[i].val,0,0);\r\n        }\r\n\r\n        if (this.stroke) {\r\n          if (renderedLetter && renderedLetter.sw) {\r\n            if (lastStrokeW !== renderedLetter.sw) {\r\n              lastStrokeW = renderedLetter.sw;\r\n              ctx.lineWidth = renderedLetter.sw;\r\n            }\r\n          } else if (lastStrokeW !== this.values.sWidth) {\r\n            lastStrokeW = this.values.sWidth;\r\n            ctx.lineWidth = this.values.sWidth;\r\n          }\r\n\r\n          if (renderedLetter && renderedLetter.sc) {\r\n            if (lastStroke !== renderedLetter.sc) {\r\n              lastStroke = renderedLetter.sc;\r\n              ctx.strokeStyle = renderedLetter.sc;\r\n            }\r\n          } else if (lastStroke !== this.values.stroke) {\r\n            lastStroke = this.values.stroke;\r\n            ctx.strokeStyle = this.values.stroke;\r\n          }\r\n\r\n          commands = this.textSpans[i].elem;\r\n          jLen = commands.length;\r\n          this.globalData.canvasContext.beginPath();\r\n\r\n          for (j = 0; j < jLen; j += 1) {\r\n            pathArr = commands[j];\r\n            kLen = pathArr.length;\r\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n\r\n            for (k = 2; k < kLen; k += 6) {\r\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n            }\r\n          }\r\n\r\n          this.globalData.canvasContext.closePath();\r\n          this.globalData.canvasContext.stroke(); /// ctx.strokeText(letters[i].val,0,0);\r\n        }\r\n\r\n        if (renderedLetter) {\r\n          this.globalData.renderer.restore();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  function CVImageElement(data, globalData, comp) {\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.img = globalData.imageLoader.getAsset(this.assetData);\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\r\n  CVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\n  CVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\n  CVImageElement.prototype.createContent = function () {\r\n    if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\r\n      var canvas = createTag('canvas');\r\n      canvas.width = this.assetData.w;\r\n      canvas.height = this.assetData.h;\r\n      var ctx = canvas.getContext('2d');\r\n      var imgW = this.img.width;\r\n      var imgH = this.img.height;\r\n      var imgRel = imgW / imgH;\r\n      var canvasRel = this.assetData.w / this.assetData.h;\r\n      var widthCrop;\r\n      var heightCrop;\r\n      var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\r\n\r\n      if (imgRel > canvasRel && par === 'xMidYMid slice' || imgRel < canvasRel && par !== 'xMidYMid slice') {\r\n        heightCrop = imgH;\r\n        widthCrop = heightCrop * canvasRel;\r\n      } else {\r\n        widthCrop = imgW;\r\n        heightCrop = widthCrop / canvasRel;\r\n      }\r\n\r\n      ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\r\n      this.img = canvas;\r\n    }\r\n  };\r\n\r\n  CVImageElement.prototype.renderInnerContent = function () {\r\n    this.canvasContext.drawImage(this.img, 0, 0);\r\n  };\r\n\r\n  CVImageElement.prototype.destroy = function () {\r\n    this.img = null;\r\n  };\r\n\r\n  function CVSolidElement(data, globalData, comp) {\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\r\n  CVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\n  CVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\n  CVSolidElement.prototype.renderInnerContent = function () {\r\n    var ctx = this.canvasContext;\r\n    ctx.fillStyle = this.data.sc;\r\n    ctx.fillRect(0, 0, this.data.sw, this.data.sh); //\r\n  };\r\n\r\n  function CanvasRendererBase(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.renderConfig = {\r\n      clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\r\n      context: config && config.context || null,\r\n      progressiveLoad: config && config.progressiveLoad || false,\r\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      contentVisibility: config && config.contentVisibility || 'visible',\r\n      className: config && config.className || '',\r\n      id: config && config.id || ''\r\n    };\r\n    this.renderConfig.dpr = config && config.dpr || 1;\r\n\r\n    if (this.animationItem.wrapper) {\r\n      this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\r\n    }\r\n\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n      frameNum: -1,\r\n      _mdf: false,\r\n      renderConfig: this.renderConfig,\r\n      currentGlobalAlpha: -1\r\n    };\r\n    this.contextData = new CVContextData();\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.transformMat = new Matrix();\r\n    this.completeLayers = false;\r\n    this.rendererType = 'canvas';\r\n  }\r\n\r\n  extendPrototype([BaseRenderer], CanvasRendererBase);\r\n\r\n  CanvasRendererBase.prototype.createShape = function (data) {\r\n    return new CVShapeElement(data, this.globalData, this);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.createText = function (data) {\r\n    return new CVTextElement(data, this.globalData, this);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.createImage = function (data) {\r\n    return new CVImageElement(data, this.globalData, this);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.createSolid = function (data) {\r\n    return new CVSolidElement(data, this.globalData, this);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\n  CanvasRendererBase.prototype.ctxTransform = function (props) {\r\n    if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\r\n      return;\r\n    }\r\n\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\r\n      return;\r\n    } // Resetting the canvas transform matrix to the new transform\r\n\r\n\r\n    this.transformMat.cloneFromProps(props); // Taking the last transform value from the stored stack of transforms\r\n\r\n    var currentTransform = this.contextData.getTransform();\r\n    var cProps = currentTransform.props; // Applying the last transform value after the new transform to respect the order of transformations\r\n\r\n    this.transformMat.transform(cProps[0], cProps[1], cProps[2], cProps[3], cProps[4], cProps[5], cProps[6], cProps[7], cProps[8], cProps[9], cProps[10], cProps[11], cProps[12], cProps[13], cProps[14], cProps[15]); // Storing the new transformed value in the stored transform\r\n\r\n    currentTransform.cloneFromProps(this.transformMat.props);\r\n    var trProps = currentTransform.props; // Applying the new transform to the canvas\r\n\r\n    this.canvasContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.ctxOpacity = function (op) {\r\n    /* if(op === 1){\r\n          return;\r\n      } */\r\n    var currentOpacity = this.contextData.getOpacity();\r\n\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n      this.globalData.currentGlobalAlpha = currentOpacity;\r\n      return;\r\n    }\r\n\r\n    currentOpacity *= op < 0 ? 0 : op;\r\n    this.contextData.setOpacity(currentOpacity);\r\n\r\n    if (this.globalData.currentGlobalAlpha !== currentOpacity) {\r\n      this.canvasContext.globalAlpha = currentOpacity;\r\n      this.globalData.currentGlobalAlpha = currentOpacity;\r\n    }\r\n  };\r\n\r\n  CanvasRendererBase.prototype.reset = function () {\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.restore();\r\n      return;\r\n    }\r\n\r\n    this.contextData.reset();\r\n  };\r\n\r\n  CanvasRendererBase.prototype.save = function (actionFlag) {\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.save();\r\n      return;\r\n    }\r\n\r\n    if (actionFlag) {\r\n      this.canvasContext.save();\r\n    }\r\n\r\n    this.contextData.push();\r\n  };\r\n\r\n  CanvasRendererBase.prototype.restore = function (actionFlag) {\r\n    if (!this.renderConfig.clearCanvas) {\r\n      this.canvasContext.restore();\r\n      return;\r\n    }\r\n\r\n    if (actionFlag) {\r\n      this.canvasContext.restore();\r\n      this.globalData.blendMode = 'source-over';\r\n    }\r\n\r\n    var popped = this.contextData.pop();\r\n    var transform = popped.transform;\r\n    var opacity = popped.opacity;\r\n    this.canvasContext.setTransform(transform[0], transform[1], transform[4], transform[5], transform[12], transform[13]);\r\n\r\n    if (this.globalData.currentGlobalAlpha !== opacity) {\r\n      this.canvasContext.globalAlpha = opacity;\r\n      this.globalData.currentGlobalAlpha = opacity;\r\n    }\r\n  };\r\n\r\n  CanvasRendererBase.prototype.configAnimation = function (animData) {\r\n    if (this.animationItem.wrapper) {\r\n      this.animationItem.container = createTag('canvas');\r\n      var containerStyle = this.animationItem.container.style;\r\n      containerStyle.width = '100%';\r\n      containerStyle.height = '100%';\r\n      var origin = '0px 0px 0px';\r\n      containerStyle.transformOrigin = origin;\r\n      containerStyle.mozTransformOrigin = origin;\r\n      containerStyle.webkitTransformOrigin = origin;\r\n      containerStyle['-webkit-transform'] = origin;\r\n      containerStyle.contentVisibility = this.renderConfig.contentVisibility;\r\n      this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n      this.canvasContext = this.animationItem.container.getContext('2d');\r\n\r\n      if (this.renderConfig.className) {\r\n        this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n      }\r\n\r\n      if (this.renderConfig.id) {\r\n        this.animationItem.container.setAttribute('id', this.renderConfig.id);\r\n      }\r\n    } else {\r\n      this.canvasContext = this.renderConfig.context;\r\n    }\r\n\r\n    this.data = animData;\r\n    this.layers = animData.layers;\r\n    this.transformCanvas = {\r\n      w: animData.w,\r\n      h: animData.h,\r\n      sx: 0,\r\n      sy: 0,\r\n      tx: 0,\r\n      ty: 0\r\n    };\r\n    this.setupGlobalData(animData, document.body);\r\n    this.globalData.canvasContext = this.canvasContext;\r\n    this.globalData.renderer = this;\r\n    this.globalData.isDashed = false;\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.globalData.transformCanvas = this.transformCanvas;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n    this.updateContainerSize();\r\n  };\r\n\r\n  CanvasRendererBase.prototype.updateContainerSize = function (width, height) {\r\n    this.reset();\r\n    var elementWidth;\r\n    var elementHeight;\r\n\r\n    if (width) {\r\n      elementWidth = width;\r\n      elementHeight = height;\r\n      this.canvasContext.canvas.width = elementWidth;\r\n      this.canvasContext.canvas.height = elementHeight;\r\n    } else {\r\n      if (this.animationItem.wrapper && this.animationItem.container) {\r\n        elementWidth = this.animationItem.wrapper.offsetWidth;\r\n        elementHeight = this.animationItem.wrapper.offsetHeight;\r\n      } else {\r\n        elementWidth = this.canvasContext.canvas.width;\r\n        elementHeight = this.canvasContext.canvas.height;\r\n      }\r\n\r\n      this.canvasContext.canvas.width = elementWidth * this.renderConfig.dpr;\r\n      this.canvasContext.canvas.height = elementHeight * this.renderConfig.dpr;\r\n    }\r\n\r\n    var elementRel;\r\n    var animationRel;\r\n\r\n    if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\r\n      var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n      var fillType = par[1] || 'meet';\r\n      var pos = par[0] || 'xMidYMid';\r\n      var xPos = pos.substr(0, 4);\r\n      var yPos = pos.substr(4);\r\n      elementRel = elementWidth / elementHeight;\r\n      animationRel = this.transformCanvas.w / this.transformCanvas.h;\r\n\r\n      if (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice') {\r\n        this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n        this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n      } else {\r\n        this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n        this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n      }\r\n\r\n      if (xPos === 'xMid' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\r\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2 * this.renderConfig.dpr;\r\n      } else if (xPos === 'xMax' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\r\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\r\n      } else {\r\n        this.transformCanvas.tx = 0;\r\n      }\r\n\r\n      if (yPos === 'YMid' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\r\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2 * this.renderConfig.dpr;\r\n      } else if (yPos === 'YMax' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\r\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) * this.renderConfig.dpr;\r\n      } else {\r\n        this.transformCanvas.ty = 0;\r\n      }\r\n    } else if (this.renderConfig.preserveAspectRatio === 'none') {\r\n      this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n      this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n      this.transformCanvas.tx = 0;\r\n      this.transformCanvas.ty = 0;\r\n    } else {\r\n      this.transformCanvas.sx = this.renderConfig.dpr;\r\n      this.transformCanvas.sy = this.renderConfig.dpr;\r\n      this.transformCanvas.tx = 0;\r\n      this.transformCanvas.ty = 0;\r\n    }\r\n\r\n    this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\r\n    /* var i, len = this.elements.length;\r\n      for(i=0;i<len;i+=1){\r\n          if(this.elements[i] && this.elements[i].data.ty === 0){\r\n              this.elements[i].resize(this.globalData.transformCanvas);\r\n          }\r\n      } */\r\n\r\n    this.ctxTransform(this.transformCanvas.props);\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n    this.canvasContext.closePath();\r\n    this.canvasContext.clip();\r\n    this.renderFrame(this.renderedFrame, true);\r\n  };\r\n\r\n  CanvasRendererBase.prototype.destroy = function () {\r\n    if (this.renderConfig.clearCanvas && this.animationItem.wrapper) {\r\n      this.animationItem.wrapper.innerText = '';\r\n    }\r\n\r\n    var i;\r\n    var len = this.layers ? this.layers.length : 0;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.elements[i]) {\r\n        this.elements[i].destroy();\r\n      }\r\n    }\r\n\r\n    this.elements.length = 0;\r\n    this.globalData.canvasContext = null;\r\n    this.animationItem.container = null;\r\n    this.destroyed = true;\r\n  };\r\n\r\n  CanvasRendererBase.prototype.renderFrame = function (num, forceRender) {\r\n    if (this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender || this.destroyed || num === -1) {\r\n      return;\r\n    }\r\n\r\n    this.renderedFrame = num;\r\n    this.globalData.frameNum = num - this.animationItem._isFirstFrame;\r\n    this.globalData.frameId += 1;\r\n    this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\r\n    this.globalData.projectInterface.currentFrame = num; // console.log('--------');\r\n    // console.log('NEW: ',num);\r\n\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    if (!this.completeLayers) {\r\n      this.checkLayers(num);\r\n    }\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].prepareFrame(num - this.layers[i].st);\r\n      }\r\n    }\r\n\r\n    if (this.globalData._mdf) {\r\n      if (this.renderConfig.clearCanvas === true) {\r\n        this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n      } else {\r\n        this.save();\r\n      }\r\n\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        if (this.completeLayers || this.elements[i]) {\r\n          this.elements[i].renderFrame();\r\n        }\r\n      }\r\n\r\n      if (this.renderConfig.clearCanvas !== true) {\r\n        this.restore();\r\n      }\r\n    }\r\n  };\r\n\r\n  CanvasRendererBase.prototype.buildItem = function (pos) {\r\n    var elements = this.elements;\r\n\r\n    if (elements[pos] || this.layers[pos].ty === 99) {\r\n      return;\r\n    }\r\n\r\n    var element = this.createItem(this.layers[pos], this, this.globalData);\r\n    elements[pos] = element;\r\n    element.initExpressions();\r\n    /* if(this.layers[pos].ty === 0){\r\n          element.resize(this.globalData.transformCanvas);\r\n      } */\r\n  };\r\n\r\n  CanvasRendererBase.prototype.checkPendingElements = function () {\r\n    while (this.pendingElements.length) {\r\n      var element = this.pendingElements.pop();\r\n      element.checkParenting();\r\n    }\r\n  };\r\n\r\n  CanvasRendererBase.prototype.hide = function () {\r\n    this.animationItem.container.style.display = 'none';\r\n  };\r\n\r\n  CanvasRendererBase.prototype.show = function () {\r\n    this.animationItem.container.style.display = 'block';\r\n  };\r\n\r\n  function CVCompElement(data, globalData, comp) {\r\n    this.completeLayers = false;\r\n    this.layers = data.layers;\r\n    this.pendingElements = [];\r\n    this.elements = createSizedArray(this.layers.length);\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\r\n      _placeholder: true\r\n    };\r\n  }\r\n\r\n  extendPrototype([CanvasRendererBase, ICompElement, CVBaseElement], CVCompElement);\r\n\r\n  CVCompElement.prototype.renderInnerContent = function () {\r\n    var ctx = this.canvasContext;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(this.data.w, 0);\r\n    ctx.lineTo(this.data.w, this.data.h);\r\n    ctx.lineTo(0, this.data.h);\r\n    ctx.lineTo(0, 0);\r\n    ctx.clip();\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n  };\r\n\r\n  CVCompElement.prototype.destroy = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.elements[i]) {\r\n        this.elements[i].destroy();\r\n      }\r\n    }\r\n\r\n    this.layers = null;\r\n    this.elements = null;\r\n  };\r\n\r\n  CVCompElement.prototype.createComp = function (data) {\r\n    return new CVCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function CanvasRenderer(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.renderConfig = {\r\n      clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\r\n      context: config && config.context || null,\r\n      progressiveLoad: config && config.progressiveLoad || false,\r\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      contentVisibility: config && config.contentVisibility || 'visible',\r\n      className: config && config.className || '',\r\n      id: config && config.id || '',\r\n      runExpressions: !config || config.runExpressions === undefined || config.runExpressions\r\n    };\r\n    this.renderConfig.dpr = config && config.dpr || 1;\r\n\r\n    if (this.animationItem.wrapper) {\r\n      this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\r\n    }\r\n\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n      frameNum: -1,\r\n      _mdf: false,\r\n      renderConfig: this.renderConfig,\r\n      currentGlobalAlpha: -1\r\n    };\r\n    this.contextData = new CVContextData();\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.transformMat = new Matrix();\r\n    this.completeLayers = false;\r\n    this.rendererType = 'canvas';\r\n  }\r\n\r\n  extendPrototype([CanvasRendererBase], CanvasRenderer);\r\n\r\n  CanvasRenderer.prototype.createComp = function (data) {\r\n    return new CVCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function HBaseElement() {}\r\n\r\n  HBaseElement.prototype = {\r\n    checkBlendMode: function checkBlendMode() {},\r\n    initRendererElement: function initRendererElement() {\r\n      this.baseElement = createTag(this.data.tg || 'div');\r\n\r\n      if (this.data.hasMask) {\r\n        this.svgElement = createNS('svg');\r\n        this.layerElement = createNS('g');\r\n        this.maskedElement = this.layerElement;\r\n        this.svgElement.appendChild(this.layerElement);\r\n        this.baseElement.appendChild(this.svgElement);\r\n      } else {\r\n        this.layerElement = this.baseElement;\r\n      }\r\n\r\n      styleDiv(this.baseElement);\r\n    },\r\n    createContainerElements: function createContainerElements() {\r\n      this.renderableEffectsManager = new CVEffects(this);\r\n      this.transformedElement = this.baseElement;\r\n      this.maskedElement = this.layerElement;\r\n\r\n      if (this.data.ln) {\r\n        this.layerElement.setAttribute('id', this.data.ln);\r\n      }\r\n\r\n      if (this.data.cl) {\r\n        this.layerElement.setAttribute('class', this.data.cl);\r\n      }\r\n\r\n      if (this.data.bm !== 0) {\r\n        this.setBlendMode();\r\n      }\r\n    },\r\n    renderElement: function renderElement() {\r\n      var transformedElementStyle = this.transformedElement ? this.transformedElement.style : {};\r\n\r\n      if (this.finalTransform._matMdf) {\r\n        var matrixValue = this.finalTransform.mat.toCSS();\r\n        transformedElementStyle.transform = matrixValue;\r\n        transformedElementStyle.webkitTransform = matrixValue;\r\n      }\r\n\r\n      if (this.finalTransform._opMdf) {\r\n        transformedElementStyle.opacity = this.finalTransform.mProp.o.v;\r\n      }\r\n    },\r\n    renderFrame: function renderFrame() {\r\n      // If it is exported as hidden (data.hd === true) no need to render\r\n      // If it is not visible no need to render\r\n      if (this.data.hd || this.hidden) {\r\n        return;\r\n      }\r\n\r\n      this.renderTransform();\r\n      this.renderRenderable();\r\n      this.renderElement();\r\n      this.renderInnerContent();\r\n\r\n      if (this._isFirstFrame) {\r\n        this._isFirstFrame = false;\r\n      }\r\n    },\r\n    destroy: function destroy() {\r\n      this.layerElement = null;\r\n      this.transformedElement = null;\r\n\r\n      if (this.matteElement) {\r\n        this.matteElement = null;\r\n      }\r\n\r\n      if (this.maskManager) {\r\n        this.maskManager.destroy();\r\n        this.maskManager = null;\r\n      }\r\n    },\r\n    createRenderableComponents: function createRenderableComponents() {\r\n      this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    },\r\n    addEffects: function addEffects() {},\r\n    setMatte: function setMatte() {}\r\n  };\r\n  HBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\r\n  HBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\r\n  HBaseElement.prototype.buildElementParenting = BaseRenderer.prototype.buildElementParenting;\r\n\r\n  function HSolidElement(data, globalData, comp) {\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], HSolidElement);\r\n\r\n  HSolidElement.prototype.createContent = function () {\r\n    var rect;\r\n\r\n    if (this.data.hasMask) {\r\n      rect = createNS('rect');\r\n      rect.setAttribute('width', this.data.sw);\r\n      rect.setAttribute('height', this.data.sh);\r\n      rect.setAttribute('fill', this.data.sc);\r\n      this.svgElement.setAttribute('width', this.data.sw);\r\n      this.svgElement.setAttribute('height', this.data.sh);\r\n    } else {\r\n      rect = createTag('div');\r\n      rect.style.width = this.data.sw + 'px';\r\n      rect.style.height = this.data.sh + 'px';\r\n      rect.style.backgroundColor = this.data.sc;\r\n    }\r\n\r\n    this.layerElement.appendChild(rect);\r\n  };\r\n\r\n  function HShapeElement(data, globalData, comp) {\r\n    // List of drawable elements\r\n    this.shapes = []; // Full shape data\r\n\r\n    this.shapesData = data.shapes; // List of styles that will be applied to shapes\r\n\r\n    this.stylesList = []; // List of modifiers that will be applied to shapes\r\n\r\n    this.shapeModifiers = []; // List of items in shape tree\r\n\r\n    this.itemsData = []; // List of items in previous shape tree\r\n\r\n    this.processedElements = []; // List of animated components\r\n\r\n    this.animatedContents = [];\r\n    this.shapesContainer = createNS('g');\r\n    this.initElement(data, globalData, comp); // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n\r\n    this.prevViewData = [];\r\n    this.currentBBox = {\r\n      x: 999999,\r\n      y: -999999,\r\n      h: 0,\r\n      w: 0\r\n    };\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement, HierarchyElement, FrameElement, RenderableElement], HShapeElement);\r\n  HShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\r\n\r\n  HShapeElement.prototype.createContent = function () {\r\n    var cont;\r\n    this.baseElement.style.fontSize = 0;\r\n\r\n    if (this.data.hasMask) {\r\n      this.layerElement.appendChild(this.shapesContainer);\r\n      cont = this.svgElement;\r\n    } else {\r\n      cont = createNS('svg');\r\n      var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n      cont.setAttribute('width', size.w);\r\n      cont.setAttribute('height', size.h);\r\n      cont.appendChild(this.shapesContainer);\r\n      this.layerElement.appendChild(cont);\r\n    }\r\n\r\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.shapesContainer, 0, [], true);\r\n    this.filterUniqueShapes();\r\n    this.shapeCont = cont;\r\n  };\r\n\r\n  HShapeElement.prototype.getTransformedPoint = function (transformers, point) {\r\n    var i;\r\n    var len = transformers.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\r\n    }\r\n\r\n    return point;\r\n  };\r\n\r\n  HShapeElement.prototype.calculateShapeBoundingBox = function (item, boundingBox) {\r\n    var shape = item.sh.v;\r\n    var transformers = item.transformers;\r\n    var i;\r\n    var len = shape._length;\r\n    var vPoint;\r\n    var oPoint;\r\n    var nextIPoint;\r\n    var nextVPoint;\r\n\r\n    if (len <= 1) {\r\n      return;\r\n    }\r\n\r\n    for (i = 0; i < len - 1; i += 1) {\r\n      vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n      oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n      nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\r\n      nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\r\n      this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n\r\n    if (shape.c) {\r\n      vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n      oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n      nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\r\n      nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\r\n      this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n  };\r\n\r\n  HShapeElement.prototype.checkBounds = function (vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\r\n    this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\r\n    var bounds = this.shapeBoundingBox;\r\n    boundingBox.x = bmMin(bounds.left, boundingBox.x);\r\n    boundingBox.xMax = bmMax(bounds.right, boundingBox.xMax);\r\n    boundingBox.y = bmMin(bounds.top, boundingBox.y);\r\n    boundingBox.yMax = bmMax(bounds.bottom, boundingBox.yMax);\r\n  };\r\n\r\n  HShapeElement.prototype.shapeBoundingBox = {\r\n    left: 0,\r\n    right: 0,\r\n    top: 0,\r\n    bottom: 0\r\n  };\r\n  HShapeElement.prototype.tempBoundingBox = {\r\n    x: 0,\r\n    xMax: 0,\r\n    y: 0,\r\n    yMax: 0,\r\n    width: 0,\r\n    height: 0\r\n  };\r\n\r\n  HShapeElement.prototype.getBoundsOfCurve = function (p0, p1, p2, p3) {\r\n    var bounds = [[p0[0], p3[0]], [p0[1], p3[1]]];\r\n\r\n    for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) {\r\n      // eslint-disable-line no-plusplus\r\n      b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n      a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n      c = 3 * p1[i] - 3 * p0[i];\r\n      b |= 0; // eslint-disable-line no-bitwise\r\n\r\n      a |= 0; // eslint-disable-line no-bitwise\r\n\r\n      c |= 0; // eslint-disable-line no-bitwise\r\n\r\n      if (a === 0 && b === 0) {//\r\n      } else if (a === 0) {\r\n        t = -c / b;\r\n\r\n        if (t > 0 && t < 1) {\r\n          bounds[i].push(this.calculateF(t, p0, p1, p2, p3, i));\r\n        }\r\n      } else {\r\n        b2ac = b * b - 4 * c * a;\r\n\r\n        if (b2ac >= 0) {\r\n          t1 = (-b + bmSqrt(b2ac)) / (2 * a);\r\n          if (t1 > 0 && t1 < 1) bounds[i].push(this.calculateF(t1, p0, p1, p2, p3, i));\r\n          t2 = (-b - bmSqrt(b2ac)) / (2 * a);\r\n          if (t2 > 0 && t2 < 1) bounds[i].push(this.calculateF(t2, p0, p1, p2, p3, i));\r\n        }\r\n      }\r\n    }\r\n\r\n    this.shapeBoundingBox.left = bmMin.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.top = bmMin.apply(null, bounds[1]);\r\n    this.shapeBoundingBox.right = bmMax.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.bottom = bmMax.apply(null, bounds[1]);\r\n  };\r\n\r\n  HShapeElement.prototype.calculateF = function (t, p0, p1, p2, p3, i) {\r\n    return bmPow(1 - t, 3) * p0[i] + 3 * bmPow(1 - t, 2) * t * p1[i] + 3 * (1 - t) * bmPow(t, 2) * p2[i] + bmPow(t, 3) * p3[i];\r\n  };\r\n\r\n  HShapeElement.prototype.calculateBoundingBox = function (itemsData, boundingBox) {\r\n    var i;\r\n    var len = itemsData.length;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (itemsData[i] && itemsData[i].sh) {\r\n        this.calculateShapeBoundingBox(itemsData[i], boundingBox);\r\n      } else if (itemsData[i] && itemsData[i].it) {\r\n        this.calculateBoundingBox(itemsData[i].it, boundingBox);\r\n      } else if (itemsData[i] && itemsData[i].style && itemsData[i].w) {\r\n        this.expandStrokeBoundingBox(itemsData[i].w, boundingBox);\r\n      }\r\n    }\r\n  };\r\n\r\n  HShapeElement.prototype.expandStrokeBoundingBox = function (widthProperty, boundingBox) {\r\n    var width = 0;\r\n\r\n    if (widthProperty.keyframes) {\r\n      for (var i = 0; i < widthProperty.keyframes.length; i += 1) {\r\n        var kfw = widthProperty.keyframes[i].s;\r\n\r\n        if (kfw > width) {\r\n          width = kfw;\r\n        }\r\n      }\r\n\r\n      width *= widthProperty.mult;\r\n    } else {\r\n      width = widthProperty.v * widthProperty.mult;\r\n    }\r\n\r\n    boundingBox.x -= width;\r\n    boundingBox.xMax += width;\r\n    boundingBox.y -= width;\r\n    boundingBox.yMax += width;\r\n  };\r\n\r\n  HShapeElement.prototype.currentBoxContains = function (box) {\r\n    return this.currentBBox.x <= box.x && this.currentBBox.y <= box.y && this.currentBBox.width + this.currentBBox.x >= box.x + box.width && this.currentBBox.height + this.currentBBox.y >= box.y + box.height;\r\n  };\r\n\r\n  HShapeElement.prototype.renderInnerContent = function () {\r\n    this._renderShapeFrame();\r\n\r\n    if (!this.hidden && (this._isFirstFrame || this._mdf)) {\r\n      var tempBoundingBox = this.tempBoundingBox;\r\n      var max = 999999;\r\n      tempBoundingBox.x = max;\r\n      tempBoundingBox.xMax = -max;\r\n      tempBoundingBox.y = max;\r\n      tempBoundingBox.yMax = -max;\r\n      this.calculateBoundingBox(this.itemsData, tempBoundingBox);\r\n      tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\r\n      tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y; // var tempBoundingBox = this.shapeCont.getBBox();\r\n\r\n      if (this.currentBoxContains(tempBoundingBox)) {\r\n        return;\r\n      }\r\n\r\n      var changed = false;\r\n\r\n      if (this.currentBBox.w !== tempBoundingBox.width) {\r\n        this.currentBBox.w = tempBoundingBox.width;\r\n        this.shapeCont.setAttribute('width', tempBoundingBox.width);\r\n        changed = true;\r\n      }\r\n\r\n      if (this.currentBBox.h !== tempBoundingBox.height) {\r\n        this.currentBBox.h = tempBoundingBox.height;\r\n        this.shapeCont.setAttribute('height', tempBoundingBox.height);\r\n        changed = true;\r\n      }\r\n\r\n      if (changed || this.currentBBox.x !== tempBoundingBox.x || this.currentBBox.y !== tempBoundingBox.y) {\r\n        this.currentBBox.w = tempBoundingBox.width;\r\n        this.currentBBox.h = tempBoundingBox.height;\r\n        this.currentBBox.x = tempBoundingBox.x;\r\n        this.currentBBox.y = tempBoundingBox.y;\r\n        this.shapeCont.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n        var shapeStyle = this.shapeCont.style;\r\n        var shapeTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        shapeStyle.transform = shapeTransform;\r\n        shapeStyle.webkitTransform = shapeTransform;\r\n      }\r\n    }\r\n  };\r\n\r\n  function HTextElement(data, globalData, comp) {\r\n    this.textSpans = [];\r\n    this.textPaths = [];\r\n    this.currentBBox = {\r\n      x: 999999,\r\n      y: -999999,\r\n      h: 0,\r\n      w: 0\r\n    };\r\n    this.renderType = 'svg';\r\n    this.isMasked = false;\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], HTextElement);\r\n\r\n  HTextElement.prototype.createContent = function () {\r\n    this.isMasked = this.checkMasks();\r\n\r\n    if (this.isMasked) {\r\n      this.renderType = 'svg';\r\n      this.compW = this.comp.data.w;\r\n      this.compH = this.comp.data.h;\r\n      this.svgElement.setAttribute('width', this.compW);\r\n      this.svgElement.setAttribute('height', this.compH);\r\n      var g = createNS('g');\r\n      this.maskedElement.appendChild(g);\r\n      this.innerElem = g;\r\n    } else {\r\n      this.renderType = 'html';\r\n      this.innerElem = this.layerElement;\r\n    }\r\n\r\n    this.checkParenting();\r\n  };\r\n\r\n  HTextElement.prototype.buildNewText = function () {\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n    var innerElemStyle = this.innerElem.style;\r\n    var textColor = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n    innerElemStyle.fill = textColor;\r\n    innerElemStyle.color = textColor;\r\n\r\n    if (documentData.sc) {\r\n      innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n      innerElemStyle.strokeWidth = documentData.sw + 'px';\r\n    }\r\n\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n\r\n    if (!this.globalData.fontManager.chars) {\r\n      innerElemStyle.fontSize = documentData.finalSize + 'px';\r\n      innerElemStyle.lineHeight = documentData.finalSize + 'px';\r\n\r\n      if (fontData.fClass) {\r\n        this.innerElem.className = fontData.fClass;\r\n      } else {\r\n        innerElemStyle.fontFamily = fontData.fFamily;\r\n        var fWeight = documentData.fWeight;\r\n        var fStyle = documentData.fStyle;\r\n        innerElemStyle.fontStyle = fStyle;\r\n        innerElemStyle.fontWeight = fWeight;\r\n      }\r\n    }\r\n\r\n    var i;\r\n    var len;\r\n    var letters = documentData.l;\r\n    len = letters.length;\r\n    var tSpan;\r\n    var tParent;\r\n    var tCont;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes;\r\n    var shapeStr = '';\r\n    var cnt = 0;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.globalData.fontManager.chars) {\r\n        if (!this.textPaths[cnt]) {\r\n          tSpan = createNS('path');\r\n          tSpan.setAttribute('stroke-linecap', lineCapEnum[1]);\r\n          tSpan.setAttribute('stroke-linejoin', lineJoinEnum[2]);\r\n          tSpan.setAttribute('stroke-miterlimit', '4');\r\n        } else {\r\n          tSpan = this.textPaths[cnt];\r\n        }\r\n\r\n        if (!this.isMasked) {\r\n          if (this.textSpans[cnt]) {\r\n            tParent = this.textSpans[cnt];\r\n            tCont = tParent.children[0];\r\n          } else {\r\n            tParent = createTag('div');\r\n            tParent.style.lineHeight = 0;\r\n            tCont = createNS('svg');\r\n            tCont.appendChild(tSpan);\r\n            styleDiv(tParent);\r\n          }\r\n        }\r\n      } else if (!this.isMasked) {\r\n        if (this.textSpans[cnt]) {\r\n          tParent = this.textSpans[cnt];\r\n          tSpan = this.textPaths[cnt];\r\n        } else {\r\n          tParent = createTag('span');\r\n          styleDiv(tParent);\r\n          tSpan = createTag('span');\r\n          styleDiv(tSpan);\r\n          tParent.appendChild(tSpan);\r\n        }\r\n      } else {\r\n        tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\r\n      } // tSpan.setAttribute('visibility', 'hidden');\r\n\r\n\r\n      if (this.globalData.fontManager.chars) {\r\n        var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n        var shapeData;\r\n\r\n        if (charData) {\r\n          shapeData = charData.data;\r\n        } else {\r\n          shapeData = null;\r\n        }\r\n\r\n        matrixHelper.reset();\r\n\r\n        if (shapeData && shapeData.shapes && shapeData.shapes.length) {\r\n          shapes = shapeData.shapes[0].it;\r\n          matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n          shapeStr = this.createPathShape(matrixHelper, shapes);\r\n          tSpan.setAttribute('d', shapeStr);\r\n        }\r\n\r\n        if (!this.isMasked) {\r\n          this.innerElem.appendChild(tParent);\r\n\r\n          if (shapeData && shapeData.shapes) {\r\n            // document.body.appendChild is needed to get exact measure of shape\r\n            document.body.appendChild(tCont);\r\n            var boundingBox = tCont.getBBox();\r\n            tCont.setAttribute('width', boundingBox.width + 2);\r\n            tCont.setAttribute('height', boundingBox.height + 2);\r\n            tCont.setAttribute('viewBox', boundingBox.x - 1 + ' ' + (boundingBox.y - 1) + ' ' + (boundingBox.width + 2) + ' ' + (boundingBox.height + 2));\r\n            var tContStyle = tCont.style;\r\n            var tContTranslation = 'translate(' + (boundingBox.x - 1) + 'px,' + (boundingBox.y - 1) + 'px)';\r\n            tContStyle.transform = tContTranslation;\r\n            tContStyle.webkitTransform = tContTranslation;\r\n            letters[i].yOffset = boundingBox.y - 1;\r\n          } else {\r\n            tCont.setAttribute('width', 1);\r\n            tCont.setAttribute('height', 1);\r\n          }\r\n\r\n          tParent.appendChild(tCont);\r\n        } else {\r\n          this.innerElem.appendChild(tSpan);\r\n        }\r\n      } else {\r\n        tSpan.textContent = letters[i].val;\r\n        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n\r\n        if (!this.isMasked) {\r\n          this.innerElem.appendChild(tParent); //\r\n\r\n          var tStyle = tSpan.style;\r\n          var tSpanTranslation = 'translate3d(0,' + -documentData.finalSize / 1.2 + 'px,0)';\r\n          tStyle.transform = tSpanTranslation;\r\n          tStyle.webkitTransform = tSpanTranslation;\r\n        } else {\r\n          this.innerElem.appendChild(tSpan);\r\n        }\r\n      } //\r\n\r\n\r\n      if (!this.isMasked) {\r\n        this.textSpans[cnt] = tParent;\r\n      } else {\r\n        this.textSpans[cnt] = tSpan;\r\n      }\r\n\r\n      this.textSpans[cnt].style.display = 'block';\r\n      this.textPaths[cnt] = tSpan;\r\n      cnt += 1;\r\n    }\r\n\r\n    while (cnt < this.textSpans.length) {\r\n      this.textSpans[cnt].style.display = 'none';\r\n      cnt += 1;\r\n    }\r\n  };\r\n\r\n  HTextElement.prototype.renderInnerContent = function () {\r\n    var svgStyle;\r\n\r\n    if (this.data.singleShape) {\r\n      if (!this._isFirstFrame && !this.lettersChangedFlag) {\r\n        return;\r\n      }\r\n\r\n      if (this.isMasked && this.finalTransform._matMdf) {\r\n        // Todo Benchmark if using this is better than getBBox\r\n        this.svgElement.setAttribute('viewBox', -this.finalTransform.mProp.p.v[0] + ' ' + -this.finalTransform.mProp.p.v[1] + ' ' + this.compW + ' ' + this.compH);\r\n        svgStyle = this.svgElement.style;\r\n        var translation = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n        svgStyle.transform = translation;\r\n        svgStyle.webkitTransform = translation;\r\n      }\r\n    }\r\n\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n\r\n    if (!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag) {\r\n      return;\r\n    }\r\n\r\n    var i;\r\n    var len;\r\n    var count = 0;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n    var letters = this.textProperty.currentData.l;\r\n    len = letters.length;\r\n    var renderedLetter;\r\n    var textSpan;\r\n    var textPath;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (letters[i].n) {\r\n        count += 1;\r\n      } else {\r\n        textSpan = this.textSpans[i];\r\n        textPath = this.textPaths[i];\r\n        renderedLetter = renderedLetters[count];\r\n        count += 1;\r\n\r\n        if (renderedLetter._mdf.m) {\r\n          if (!this.isMasked) {\r\n            textSpan.style.webkitTransform = renderedLetter.m;\r\n            textSpan.style.transform = renderedLetter.m;\r\n          } else {\r\n            textSpan.setAttribute('transform', renderedLetter.m);\r\n          }\r\n        } /// /textSpan.setAttribute('opacity',renderedLetter.o);\r\n\r\n\r\n        textSpan.style.opacity = renderedLetter.o;\r\n\r\n        if (renderedLetter.sw && renderedLetter._mdf.sw) {\r\n          textPath.setAttribute('stroke-width', renderedLetter.sw);\r\n        }\r\n\r\n        if (renderedLetter.sc && renderedLetter._mdf.sc) {\r\n          textPath.setAttribute('stroke', renderedLetter.sc);\r\n        }\r\n\r\n        if (renderedLetter.fc && renderedLetter._mdf.fc) {\r\n          textPath.setAttribute('fill', renderedLetter.fc);\r\n          textPath.style.color = renderedLetter.fc;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)) {\r\n      var boundingBox = this.innerElem.getBBox();\r\n\r\n      if (this.currentBBox.w !== boundingBox.width) {\r\n        this.currentBBox.w = boundingBox.width;\r\n        this.svgElement.setAttribute('width', boundingBox.width);\r\n      }\r\n\r\n      if (this.currentBBox.h !== boundingBox.height) {\r\n        this.currentBBox.h = boundingBox.height;\r\n        this.svgElement.setAttribute('height', boundingBox.height);\r\n      }\r\n\r\n      var margin = 1;\r\n\r\n      if (this.currentBBox.w !== boundingBox.width + margin * 2 || this.currentBBox.h !== boundingBox.height + margin * 2 || this.currentBBox.x !== boundingBox.x - margin || this.currentBBox.y !== boundingBox.y - margin) {\r\n        this.currentBBox.w = boundingBox.width + margin * 2;\r\n        this.currentBBox.h = boundingBox.height + margin * 2;\r\n        this.currentBBox.x = boundingBox.x - margin;\r\n        this.currentBBox.y = boundingBox.y - margin;\r\n        this.svgElement.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n        svgStyle = this.svgElement.style;\r\n        var svgTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        svgStyle.transform = svgTransform;\r\n        svgStyle.webkitTransform = svgTransform;\r\n      }\r\n    }\r\n  };\r\n\r\n  function HCameraElement(data, globalData, comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initHierarchy();\r\n    var getProp = PropertyFactory.getProp;\r\n    this.pe = getProp(this, data.pe, 0, 0, this);\r\n\r\n    if (data.ks.p.s) {\r\n      this.px = getProp(this, data.ks.p.x, 1, 0, this);\r\n      this.py = getProp(this, data.ks.p.y, 1, 0, this);\r\n      this.pz = getProp(this, data.ks.p.z, 1, 0, this);\r\n    } else {\r\n      this.p = getProp(this, data.ks.p, 1, 0, this);\r\n    }\r\n\r\n    if (data.ks.a) {\r\n      this.a = getProp(this, data.ks.a, 1, 0, this);\r\n    }\r\n\r\n    if (data.ks.or.k.length && data.ks.or.k[0].to) {\r\n      var i;\r\n      var len = data.ks.or.k.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        data.ks.or.k[i].to = null;\r\n        data.ks.or.k[i].ti = null;\r\n      }\r\n    }\r\n\r\n    this.or = getProp(this, data.ks.or, 1, degToRads, this);\r\n    this.or.sh = true;\r\n    this.rx = getProp(this, data.ks.rx, 0, degToRads, this);\r\n    this.ry = getProp(this, data.ks.ry, 0, degToRads, this);\r\n    this.rz = getProp(this, data.ks.rz, 0, degToRads, this);\r\n    this.mat = new Matrix();\r\n    this._prevMat = new Matrix();\r\n    this._isFirstFrame = true; // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\r\n\r\n    this.finalTransform = {\r\n      mProp: this\r\n    };\r\n  }\r\n\r\n  extendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\r\n\r\n  HCameraElement.prototype.setup = function () {\r\n    var i;\r\n    var len = this.comp.threeDElements.length;\r\n    var comp;\r\n    var perspectiveStyle;\r\n    var containerStyle;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      // [perspectiveElem,container]\r\n      comp = this.comp.threeDElements[i];\r\n\r\n      if (comp.type === '3d') {\r\n        perspectiveStyle = comp.perspectiveElem.style;\r\n        containerStyle = comp.container.style;\r\n        var perspective = this.pe.v + 'px';\r\n        var origin = '0px 0px 0px';\r\n        var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n        perspectiveStyle.perspective = perspective;\r\n        perspectiveStyle.webkitPerspective = perspective;\r\n        containerStyle.transformOrigin = origin;\r\n        containerStyle.mozTransformOrigin = origin;\r\n        containerStyle.webkitTransformOrigin = origin;\r\n        perspectiveStyle.transform = matrix;\r\n        perspectiveStyle.webkitTransform = matrix;\r\n      }\r\n    }\r\n  };\r\n\r\n  HCameraElement.prototype.createElements = function () {};\r\n\r\n  HCameraElement.prototype.hide = function () {};\r\n\r\n  HCameraElement.prototype.renderFrame = function () {\r\n    var _mdf = this._isFirstFrame;\r\n    var i;\r\n    var len;\r\n\r\n    if (this.hierarchy) {\r\n      len = this.hierarchy.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\r\n      }\r\n    }\r\n\r\n    if (_mdf || this.pe._mdf || this.p && this.p._mdf || this.px && (this.px._mdf || this.py._mdf || this.pz._mdf) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || this.a && this.a._mdf) {\r\n      this.mat.reset();\r\n\r\n      if (this.hierarchy) {\r\n        len = this.hierarchy.length - 1;\r\n\r\n        for (i = len; i >= 0; i -= 1) {\r\n          var mTransf = this.hierarchy[i].finalTransform.mProp;\r\n          this.mat.translate(-mTransf.p.v[0], -mTransf.p.v[1], mTransf.p.v[2]);\r\n          this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\r\n          this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\r\n          this.mat.scale(1 / mTransf.s.v[0], 1 / mTransf.s.v[1], 1 / mTransf.s.v[2]);\r\n          this.mat.translate(mTransf.a.v[0], mTransf.a.v[1], mTransf.a.v[2]);\r\n        }\r\n      }\r\n\r\n      if (this.p) {\r\n        this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]);\r\n      } else {\r\n        this.mat.translate(-this.px.v, -this.py.v, this.pz.v);\r\n      }\r\n\r\n      if (this.a) {\r\n        var diffVector;\r\n\r\n        if (this.p) {\r\n          diffVector = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]];\r\n        } else {\r\n          diffVector = [this.px.v - this.a.v[0], this.py.v - this.a.v[1], this.pz.v - this.a.v[2]];\r\n        }\r\n\r\n        var mag = Math.sqrt(Math.pow(diffVector[0], 2) + Math.pow(diffVector[1], 2) + Math.pow(diffVector[2], 2)); // var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n\r\n        var lookDir = [diffVector[0] / mag, diffVector[1] / mag, diffVector[2] / mag];\r\n        var lookLengthOnXZ = Math.sqrt(lookDir[2] * lookDir[2] + lookDir[0] * lookDir[0]);\r\n        var mRotationX = Math.atan2(lookDir[1], lookLengthOnXZ);\r\n        var mRotationY = Math.atan2(lookDir[0], -lookDir[2]);\r\n        this.mat.rotateY(mRotationY).rotateX(-mRotationX);\r\n      }\r\n\r\n      this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n      this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n      this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0);\r\n      this.mat.translate(0, 0, this.pe.v);\r\n      var hasMatrixChanged = !this._prevMat.equals(this.mat);\r\n\r\n      if ((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\r\n        len = this.comp.threeDElements.length;\r\n        var comp;\r\n        var perspectiveStyle;\r\n        var containerStyle;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          comp = this.comp.threeDElements[i];\r\n\r\n          if (comp.type === '3d') {\r\n            if (hasMatrixChanged) {\r\n              var matValue = this.mat.toCSS();\r\n              containerStyle = comp.container.style;\r\n              containerStyle.transform = matValue;\r\n              containerStyle.webkitTransform = matValue;\r\n            }\r\n\r\n            if (this.pe._mdf) {\r\n              perspectiveStyle = comp.perspectiveElem.style;\r\n              perspectiveStyle.perspective = this.pe.v + 'px';\r\n              perspectiveStyle.webkitPerspective = this.pe.v + 'px';\r\n            }\r\n          }\r\n        }\r\n\r\n        this.mat.clone(this._prevMat);\r\n      }\r\n    }\r\n\r\n    this._isFirstFrame = false;\r\n  };\r\n\r\n  HCameraElement.prototype.prepareFrame = function (num) {\r\n    this.prepareProperties(num, true);\r\n  };\r\n\r\n  HCameraElement.prototype.destroy = function () {};\r\n\r\n  HCameraElement.prototype.getBaseElement = function () {\r\n    return null;\r\n  };\r\n\r\n  function HImageElement(data, globalData, comp) {\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data, globalData, comp);\r\n  }\r\n\r\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement, FrameElement, RenderableElement], HImageElement);\r\n\r\n  HImageElement.prototype.createContent = function () {\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    var img = new Image();\r\n\r\n    if (this.data.hasMask) {\r\n      this.imageElem = createNS('image');\r\n      this.imageElem.setAttribute('width', this.assetData.w + 'px');\r\n      this.imageElem.setAttribute('height', this.assetData.h + 'px');\r\n      this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n      this.layerElement.appendChild(this.imageElem);\r\n      this.baseElement.setAttribute('width', this.assetData.w);\r\n      this.baseElement.setAttribute('height', this.assetData.h);\r\n    } else {\r\n      this.layerElement.appendChild(img);\r\n    }\r\n\r\n    img.crossOrigin = 'anonymous';\r\n    img.src = assetPath;\r\n\r\n    if (this.data.ln) {\r\n      this.baseElement.setAttribute('id', this.data.ln);\r\n    }\r\n  };\r\n\r\n  function HybridRendererBase(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.renderConfig = {\r\n      className: config && config.className || '',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n      filterSize: {\r\n        width: config && config.filterSize && config.filterSize.width || '400%',\r\n        height: config && config.filterSize && config.filterSize.height || '400%',\r\n        x: config && config.filterSize && config.filterSize.x || '-100%',\r\n        y: config && config.filterSize && config.filterSize.y || '-100%'\r\n      }\r\n    };\r\n    this.globalData = {\r\n      _mdf: false,\r\n      frameNum: -1,\r\n      renderConfig: this.renderConfig\r\n    };\r\n    this.pendingElements = [];\r\n    this.elements = [];\r\n    this.threeDElements = [];\r\n    this.destroyed = false;\r\n    this.camera = null;\r\n    this.supports3d = true;\r\n    this.rendererType = 'html';\r\n  }\r\n\r\n  extendPrototype([BaseRenderer], HybridRendererBase);\r\n  HybridRendererBase.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\n  HybridRendererBase.prototype.checkPendingElements = function () {\r\n    while (this.pendingElements.length) {\r\n      var element = this.pendingElements.pop();\r\n      element.checkParenting();\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.appendElementInPos = function (element, pos) {\r\n    var newDOMElement = element.getBaseElement();\r\n\r\n    if (!newDOMElement) {\r\n      return;\r\n    }\r\n\r\n    var layer = this.layers[pos];\r\n\r\n    if (!layer.ddd || !this.supports3d) {\r\n      if (this.threeDElements) {\r\n        this.addTo3dContainer(newDOMElement, pos);\r\n      } else {\r\n        var i = 0;\r\n        var nextDOMElement;\r\n        var nextLayer;\r\n        var tmpDOMElement;\r\n\r\n        while (i < pos) {\r\n          if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement) {\r\n            nextLayer = this.elements[i];\r\n            tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n            nextDOMElement = tmpDOMElement || nextDOMElement;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        if (nextDOMElement) {\r\n          if (!layer.ddd || !this.supports3d) {\r\n            this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n          }\r\n        } else if (!layer.ddd || !this.supports3d) {\r\n          this.layerElement.appendChild(newDOMElement);\r\n        }\r\n      }\r\n    } else {\r\n      this.addTo3dContainer(newDOMElement, pos);\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.createShape = function (data) {\r\n    if (!this.supports3d) {\r\n      return new SVGShapeElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HShapeElement(data, this.globalData, this);\r\n  };\r\n\r\n  HybridRendererBase.prototype.createText = function (data) {\r\n    if (!this.supports3d) {\r\n      return new SVGTextLottieElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HTextElement(data, this.globalData, this);\r\n  };\r\n\r\n  HybridRendererBase.prototype.createCamera = function (data) {\r\n    this.camera = new HCameraElement(data, this.globalData, this);\r\n    return this.camera;\r\n  };\r\n\r\n  HybridRendererBase.prototype.createImage = function (data) {\r\n    if (!this.supports3d) {\r\n      return new IImageElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HImageElement(data, this.globalData, this);\r\n  };\r\n\r\n  HybridRendererBase.prototype.createSolid = function (data) {\r\n    if (!this.supports3d) {\r\n      return new ISolidElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HSolidElement(data, this.globalData, this);\r\n  };\r\n\r\n  HybridRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\n  HybridRendererBase.prototype.getThreeDContainerByPos = function (pos) {\r\n    var i = 0;\r\n    var len = this.threeDElements.length;\r\n\r\n    while (i < len) {\r\n      if (this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n        return this.threeDElements[i].perspectiveElem;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  HybridRendererBase.prototype.createThreeDContainer = function (pos, type) {\r\n    var perspectiveElem = createTag('div');\r\n    var style;\r\n    var containerStyle;\r\n    styleDiv(perspectiveElem);\r\n    var container = createTag('div');\r\n    styleDiv(container);\r\n\r\n    if (type === '3d') {\r\n      style = perspectiveElem.style;\r\n      style.width = this.globalData.compSize.w + 'px';\r\n      style.height = this.globalData.compSize.h + 'px';\r\n      var center = '50% 50%';\r\n      style.webkitTransformOrigin = center;\r\n      style.mozTransformOrigin = center;\r\n      style.transformOrigin = center;\r\n      containerStyle = container.style;\r\n      var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n      containerStyle.transform = matrix;\r\n      containerStyle.webkitTransform = matrix;\r\n    }\r\n\r\n    perspectiveElem.appendChild(container); // this.resizerElem.appendChild(perspectiveElem);\r\n\r\n    var threeDContainerData = {\r\n      container: container,\r\n      perspectiveElem: perspectiveElem,\r\n      startPos: pos,\r\n      endPos: pos,\r\n      type: type\r\n    };\r\n    this.threeDElements.push(threeDContainerData);\r\n    return threeDContainerData;\r\n  };\r\n\r\n  HybridRendererBase.prototype.build3dContainers = function () {\r\n    var i;\r\n    var len = this.layers.length;\r\n    var lastThreeDContainerData;\r\n    var currentContainer = '';\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.layers[i].ddd && this.layers[i].ty !== 3) {\r\n        if (currentContainer !== '3d') {\r\n          currentContainer = '3d';\r\n          lastThreeDContainerData = this.createThreeDContainer(i, '3d');\r\n        }\r\n\r\n        lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n      } else {\r\n        if (currentContainer !== '2d') {\r\n          currentContainer = '2d';\r\n          lastThreeDContainerData = this.createThreeDContainer(i, '2d');\r\n        }\r\n\r\n        lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n      }\r\n    }\r\n\r\n    len = this.threeDElements.length;\r\n\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.addTo3dContainer = function (elem, pos) {\r\n    var i = 0;\r\n    var len = this.threeDElements.length;\r\n\r\n    while (i < len) {\r\n      if (pos <= this.threeDElements[i].endPos) {\r\n        var j = this.threeDElements[i].startPos;\r\n        var nextElement;\r\n\r\n        while (j < pos) {\r\n          if (this.elements[j] && this.elements[j].getBaseElement) {\r\n            nextElement = this.elements[j].getBaseElement();\r\n          }\r\n\r\n          j += 1;\r\n        }\r\n\r\n        if (nextElement) {\r\n          this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n        } else {\r\n          this.threeDElements[i].container.appendChild(elem);\r\n        }\r\n\r\n        break;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.configAnimation = function (animData) {\r\n    var resizerElem = createTag('div');\r\n    var wrapper = this.animationItem.wrapper;\r\n    var style = resizerElem.style;\r\n    style.width = animData.w + 'px';\r\n    style.height = animData.h + 'px';\r\n    this.resizerElem = resizerElem;\r\n    styleDiv(resizerElem);\r\n    style.transformStyle = 'flat';\r\n    style.mozTransformStyle = 'flat';\r\n    style.webkitTransformStyle = 'flat';\r\n\r\n    if (this.renderConfig.className) {\r\n      resizerElem.setAttribute('class', this.renderConfig.className);\r\n    }\r\n\r\n    wrapper.appendChild(resizerElem);\r\n    style.overflow = 'hidden';\r\n    var svg = createNS('svg');\r\n    svg.setAttribute('width', '1');\r\n    svg.setAttribute('height', '1');\r\n    styleDiv(svg);\r\n    this.resizerElem.appendChild(svg);\r\n    var defs = createNS('defs');\r\n    svg.appendChild(defs);\r\n    this.data = animData; // Mask animation\r\n\r\n    this.setupGlobalData(animData, svg);\r\n    this.globalData.defs = defs;\r\n    this.layers = animData.layers;\r\n    this.layerElement = this.resizerElem;\r\n    this.build3dContainers();\r\n    this.updateContainerSize();\r\n  };\r\n\r\n  HybridRendererBase.prototype.destroy = function () {\r\n    if (this.animationItem.wrapper) {\r\n      this.animationItem.wrapper.innerText = '';\r\n    }\r\n\r\n    this.animationItem.container = null;\r\n    this.globalData.defs = null;\r\n    var i;\r\n    var len = this.layers ? this.layers.length : 0;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      this.elements[i].destroy();\r\n    }\r\n\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n  };\r\n\r\n  HybridRendererBase.prototype.updateContainerSize = function () {\r\n    var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n    var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    var elementRel = elementWidth / elementHeight;\r\n    var animationRel = this.globalData.compSize.w / this.globalData.compSize.h;\r\n    var sx;\r\n    var sy;\r\n    var tx;\r\n    var ty;\r\n\r\n    if (animationRel > elementRel) {\r\n      sx = elementWidth / this.globalData.compSize.w;\r\n      sy = elementWidth / this.globalData.compSize.w;\r\n      tx = 0;\r\n      ty = (elementHeight - this.globalData.compSize.h * (elementWidth / this.globalData.compSize.w)) / 2;\r\n    } else {\r\n      sx = elementHeight / this.globalData.compSize.h;\r\n      sy = elementHeight / this.globalData.compSize.h;\r\n      tx = (elementWidth - this.globalData.compSize.w * (elementHeight / this.globalData.compSize.h)) / 2;\r\n      ty = 0;\r\n    }\r\n\r\n    var style = this.resizerElem.style;\r\n    style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,' + sy + ',0,0,0,0,1,0,' + tx + ',' + ty + ',0,1)';\r\n    style.transform = style.webkitTransform;\r\n  };\r\n\r\n  HybridRendererBase.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\n  HybridRendererBase.prototype.hide = function () {\r\n    this.resizerElem.style.display = 'none';\r\n  };\r\n\r\n  HybridRendererBase.prototype.show = function () {\r\n    this.resizerElem.style.display = 'block';\r\n  };\r\n\r\n  HybridRendererBase.prototype.initItems = function () {\r\n    this.buildAllItems();\r\n\r\n    if (this.camera) {\r\n      this.camera.setup();\r\n    } else {\r\n      var cWidth = this.globalData.compSize.w;\r\n      var cHeight = this.globalData.compSize.h;\r\n      var i;\r\n      var len = this.threeDElements.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        var style = this.threeDElements[i].perspectiveElem.style;\r\n        style.webkitPerspective = Math.sqrt(Math.pow(cWidth, 2) + Math.pow(cHeight, 2)) + 'px';\r\n        style.perspective = style.webkitPerspective;\r\n      }\r\n    }\r\n  };\r\n\r\n  HybridRendererBase.prototype.searchExtraCompositions = function (assets) {\r\n    var i;\r\n    var len = assets.length;\r\n    var floatingContainer = createTag('div');\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (assets[i].xt) {\r\n        var comp = this.createComp(assets[i], floatingContainer, this.globalData.comp, null);\r\n        comp.initExpressions();\r\n        this.globalData.projectInterface.registerComposition(comp);\r\n      }\r\n    }\r\n  };\r\n\r\n  function HCompElement(data, globalData, comp) {\r\n    this.layers = data.layers;\r\n    this.supports3d = !data.hasMask;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\r\n      _placeholder: true\r\n    };\r\n  }\r\n\r\n  extendPrototype([HybridRendererBase, ICompElement, HBaseElement], HCompElement);\r\n  HCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\r\n\r\n  HCompElement.prototype.createContainerElements = function () {\r\n    this._createBaseContainerElements(); // divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n\r\n\r\n    if (this.data.hasMask) {\r\n      this.svgElement.setAttribute('width', this.data.w);\r\n      this.svgElement.setAttribute('height', this.data.h);\r\n      this.transformedElement = this.baseElement;\r\n    } else {\r\n      this.transformedElement = this.layerElement;\r\n    }\r\n  };\r\n\r\n  HCompElement.prototype.addTo3dContainer = function (elem, pos) {\r\n    var j = 0;\r\n    var nextElement;\r\n\r\n    while (j < pos) {\r\n      if (this.elements[j] && this.elements[j].getBaseElement) {\r\n        nextElement = this.elements[j].getBaseElement();\r\n      }\r\n\r\n      j += 1;\r\n    }\r\n\r\n    if (nextElement) {\r\n      this.layerElement.insertBefore(elem, nextElement);\r\n    } else {\r\n      this.layerElement.appendChild(elem);\r\n    }\r\n  };\r\n\r\n  HCompElement.prototype.createComp = function (data) {\r\n    if (!this.supports3d) {\r\n      return new SVGCompElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  function HybridRenderer(animationItem, config) {\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.renderConfig = {\r\n      className: config && config.className || '',\r\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\r\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n      filterSize: {\r\n        width: config && config.filterSize && config.filterSize.width || '400%',\r\n        height: config && config.filterSize && config.filterSize.height || '400%',\r\n        x: config && config.filterSize && config.filterSize.x || '-100%',\r\n        y: config && config.filterSize && config.filterSize.y || '-100%'\r\n      },\r\n      runExpressions: !config || config.runExpressions === undefined || config.runExpressions\r\n    };\r\n    this.globalData = {\r\n      _mdf: false,\r\n      frameNum: -1,\r\n      renderConfig: this.renderConfig\r\n    };\r\n    this.pendingElements = [];\r\n    this.elements = [];\r\n    this.threeDElements = [];\r\n    this.destroyed = false;\r\n    this.camera = null;\r\n    this.supports3d = true;\r\n    this.rendererType = 'html';\r\n  }\r\n\r\n  extendPrototype([HybridRendererBase], HybridRenderer);\r\n\r\n  HybridRenderer.prototype.createComp = function (data) {\r\n    if (!this.supports3d) {\r\n      return new SVGCompElement(data, this.globalData, this);\r\n    }\r\n\r\n    return new HCompElement(data, this.globalData, this);\r\n  };\r\n\r\n  var CompExpressionInterface = function () {\r\n    return function (comp) {\r\n      function _thisLayerFunction(name) {\r\n        var i = 0;\r\n        var len = comp.layers.length;\r\n\r\n        while (i < len) {\r\n          if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\r\n            return comp.elements[i].layerInterface;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return null; // return {active:false};\r\n      }\r\n\r\n      Object.defineProperty(_thisLayerFunction, '_name', {\r\n        value: comp.data.nm\r\n      });\r\n      _thisLayerFunction.layer = _thisLayerFunction;\r\n      _thisLayerFunction.pixelAspect = 1;\r\n      _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\r\n      _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\r\n      _thisLayerFunction.pixelAspect = 1;\r\n      _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\r\n      _thisLayerFunction.displayStartTime = 0;\r\n      _thisLayerFunction.numLayers = comp.layers.length;\r\n      return _thisLayerFunction;\r\n    };\r\n  }();\r\n\r\n  var Expressions = function () {\r\n    var ob = {};\r\n    ob.initExpressions = initExpressions;\r\n\r\n    function initExpressions(animation) {\r\n      var stackCount = 0;\r\n      var registers = [];\r\n\r\n      function pushExpression() {\r\n        stackCount += 1;\r\n      }\r\n\r\n      function popExpression() {\r\n        stackCount -= 1;\r\n\r\n        if (stackCount === 0) {\r\n          releaseInstances();\r\n        }\r\n      }\r\n\r\n      function registerExpressionProperty(expression) {\r\n        if (registers.indexOf(expression) === -1) {\r\n          registers.push(expression);\r\n        }\r\n      }\r\n\r\n      function releaseInstances() {\r\n        var i;\r\n        var len = registers.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          registers[i].release();\r\n        }\r\n\r\n        registers.length = 0;\r\n      }\r\n\r\n      animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n      animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n      animation.renderer.globalData.pushExpression = pushExpression;\r\n      animation.renderer.globalData.popExpression = popExpression;\r\n      animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var MaskManagerInterface = function () {\r\n    function MaskInterface(mask, data) {\r\n      this._mask = mask;\r\n      this._data = data;\r\n    }\r\n\r\n    Object.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n      get: function get() {\r\n        if (this._mask.prop.k) {\r\n          this._mask.prop.getValue();\r\n        }\r\n\r\n        return this._mask.prop;\r\n      }\r\n    });\r\n    Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\r\n      get: function get() {\r\n        if (this._mask.op.k) {\r\n          this._mask.op.getValue();\r\n        }\r\n\r\n        return this._mask.op.v * 100;\r\n      }\r\n    });\r\n\r\n    var MaskManager = function MaskManager(maskManager) {\r\n      var _masksInterfaces = createSizedArray(maskManager.viewData.length);\r\n\r\n      var i;\r\n      var len = maskManager.viewData.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n      }\r\n\r\n      var maskFunction = function maskFunction(name) {\r\n        i = 0;\r\n\r\n        while (i < len) {\r\n          if (maskManager.masksProperties[i].nm === name) {\r\n            return _masksInterfaces[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return null;\r\n      };\r\n\r\n      return maskFunction;\r\n    };\r\n\r\n    return MaskManager;\r\n  }();\r\n\r\n  var ExpressionPropertyInterface = function () {\r\n    var defaultUnidimensionalValue = {\r\n      pv: 0,\r\n      v: 0,\r\n      mult: 1\r\n    };\r\n    var defaultMultidimensionalValue = {\r\n      pv: [0, 0, 0],\r\n      v: [0, 0, 0],\r\n      mult: 1\r\n    };\r\n\r\n    function completeProperty(expressionValue, property, type) {\r\n      Object.defineProperty(expressionValue, 'velocity', {\r\n        get: function get() {\r\n          return property.getVelocityAtTime(property.comp.currentFrame);\r\n        }\r\n      });\r\n      expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\r\n\r\n      expressionValue.key = function (pos) {\r\n        if (!expressionValue.numKeys) {\r\n          return 0;\r\n        }\r\n\r\n        var value = '';\r\n\r\n        if ('s' in property.keyframes[pos - 1]) {\r\n          value = property.keyframes[pos - 1].s;\r\n        } else if ('e' in property.keyframes[pos - 2]) {\r\n          value = property.keyframes[pos - 2].e;\r\n        } else {\r\n          value = property.keyframes[pos - 2].s;\r\n        }\r\n\r\n        var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value); // eslint-disable-line no-new-wrappers\r\n\r\n        valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\r\n        valueProp.value = type === 'unidimensional' ? value[0] : value;\r\n        return valueProp;\r\n      };\r\n\r\n      expressionValue.valueAtTime = property.getValueAtTime;\r\n      expressionValue.speedAtTime = property.getSpeedAtTime;\r\n      expressionValue.velocityAtTime = property.getVelocityAtTime;\r\n      expressionValue.propertyGroup = property.propertyGroup;\r\n    }\r\n\r\n    function UnidimensionalPropertyInterface(property) {\r\n      if (!property || !('pv' in property)) {\r\n        property = defaultUnidimensionalValue;\r\n      }\r\n\r\n      var mult = 1 / property.mult;\r\n      var val = property.pv * mult;\r\n      var expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n\r\n      expressionValue.value = val;\r\n      completeProperty(expressionValue, property, 'unidimensional');\r\n      return function () {\r\n        if (property.k) {\r\n          property.getValue();\r\n        }\r\n\r\n        val = property.v * mult;\r\n\r\n        if (expressionValue.value !== val) {\r\n          expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n\r\n          expressionValue.value = val;\r\n          completeProperty(expressionValue, property, 'unidimensional');\r\n        }\r\n\r\n        return expressionValue;\r\n      };\r\n    }\r\n\r\n    function MultidimensionalPropertyInterface(property) {\r\n      if (!property || !('pv' in property)) {\r\n        property = defaultMultidimensionalValue;\r\n      }\r\n\r\n      var mult = 1 / property.mult;\r\n      var len = property.data && property.data.l || property.pv.length;\r\n      var expressionValue = createTypedArray('float32', len);\r\n      var arrValue = createTypedArray('float32', len);\r\n      expressionValue.value = arrValue;\r\n      completeProperty(expressionValue, property, 'multidimensional');\r\n      return function () {\r\n        if (property.k) {\r\n          property.getValue();\r\n        }\r\n\r\n        for (var i = 0; i < len; i += 1) {\r\n          arrValue[i] = property.v[i] * mult;\r\n          expressionValue[i] = arrValue[i];\r\n        }\r\n\r\n        return expressionValue;\r\n      };\r\n    } // TODO: try to avoid using this getter\r\n\r\n\r\n    function defaultGetter() {\r\n      return defaultUnidimensionalValue;\r\n    }\r\n\r\n    return function (property) {\r\n      if (!property) {\r\n        return defaultGetter;\r\n      }\r\n\r\n      if (property.propType === 'unidimensional') {\r\n        return UnidimensionalPropertyInterface(property);\r\n      }\r\n\r\n      return MultidimensionalPropertyInterface(property);\r\n    };\r\n  }();\r\n\r\n  var TransformExpressionInterface = function () {\r\n    return function (transform) {\r\n      function _thisFunction(name) {\r\n        switch (name) {\r\n          case 'scale':\r\n          case 'Scale':\r\n          case 'ADBE Scale':\r\n          case 6:\r\n            return _thisFunction.scale;\r\n\r\n          case 'rotation':\r\n          case 'Rotation':\r\n          case 'ADBE Rotation':\r\n          case 'ADBE Rotate Z':\r\n          case 10:\r\n            return _thisFunction.rotation;\r\n\r\n          case 'ADBE Rotate X':\r\n            return _thisFunction.xRotation;\r\n\r\n          case 'ADBE Rotate Y':\r\n            return _thisFunction.yRotation;\r\n\r\n          case 'position':\r\n          case 'Position':\r\n          case 'ADBE Position':\r\n          case 2:\r\n            return _thisFunction.position;\r\n\r\n          case 'ADBE Position_0':\r\n            return _thisFunction.xPosition;\r\n\r\n          case 'ADBE Position_1':\r\n            return _thisFunction.yPosition;\r\n\r\n          case 'ADBE Position_2':\r\n            return _thisFunction.zPosition;\r\n\r\n          case 'anchorPoint':\r\n          case 'AnchorPoint':\r\n          case 'Anchor Point':\r\n          case 'ADBE AnchorPoint':\r\n          case 1:\r\n            return _thisFunction.anchorPoint;\r\n\r\n          case 'opacity':\r\n          case 'Opacity':\r\n          case 11:\r\n            return _thisFunction.opacity;\r\n\r\n          default:\r\n            return null;\r\n        }\r\n      }\r\n\r\n      Object.defineProperty(_thisFunction, 'rotation', {\r\n        get: ExpressionPropertyInterface(transform.r || transform.rz)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'zRotation', {\r\n        get: ExpressionPropertyInterface(transform.rz || transform.r)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'xRotation', {\r\n        get: ExpressionPropertyInterface(transform.rx)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'yRotation', {\r\n        get: ExpressionPropertyInterface(transform.ry)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'scale', {\r\n        get: ExpressionPropertyInterface(transform.s)\r\n      });\r\n\r\n      var _px;\r\n\r\n      var _py;\r\n\r\n      var _pz;\r\n\r\n      var _transformFactory;\r\n\r\n      if (transform.p) {\r\n        _transformFactory = ExpressionPropertyInterface(transform.p);\r\n      } else {\r\n        _px = ExpressionPropertyInterface(transform.px);\r\n        _py = ExpressionPropertyInterface(transform.py);\r\n\r\n        if (transform.pz) {\r\n          _pz = ExpressionPropertyInterface(transform.pz);\r\n        }\r\n      }\r\n\r\n      Object.defineProperty(_thisFunction, 'position', {\r\n        get: function get() {\r\n          if (transform.p) {\r\n            return _transformFactory();\r\n          }\r\n\r\n          return [_px(), _py(), _pz ? _pz() : 0];\r\n        }\r\n      });\r\n      Object.defineProperty(_thisFunction, 'xPosition', {\r\n        get: ExpressionPropertyInterface(transform.px)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'yPosition', {\r\n        get: ExpressionPropertyInterface(transform.py)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'zPosition', {\r\n        get: ExpressionPropertyInterface(transform.pz)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'anchorPoint', {\r\n        get: ExpressionPropertyInterface(transform.a)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'opacity', {\r\n        get: ExpressionPropertyInterface(transform.o)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'skew', {\r\n        get: ExpressionPropertyInterface(transform.sk)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'skewAxis', {\r\n        get: ExpressionPropertyInterface(transform.sa)\r\n      });\r\n      Object.defineProperty(_thisFunction, 'orientation', {\r\n        get: ExpressionPropertyInterface(transform.or)\r\n      });\r\n      return _thisFunction;\r\n    };\r\n  }();\r\n\r\n  var LayerExpressionInterface = function () {\r\n    function getMatrix(time) {\r\n      var toWorldMat = new Matrix();\r\n\r\n      if (time !== undefined) {\r\n        var propMatrix = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n\r\n        propMatrix.clone(toWorldMat);\r\n      } else {\r\n        var transformMat = this._elem.finalTransform.mProp;\r\n        transformMat.applyToMatrix(toWorldMat);\r\n      }\r\n\r\n      return toWorldMat;\r\n    }\r\n\r\n    function toWorldVec(arr, time) {\r\n      var toWorldMat = this.getMatrix(time);\r\n      toWorldMat.props[12] = 0;\r\n      toWorldMat.props[13] = 0;\r\n      toWorldMat.props[14] = 0;\r\n      return this.applyPoint(toWorldMat, arr);\r\n    }\r\n\r\n    function toWorld(arr, time) {\r\n      var toWorldMat = this.getMatrix(time);\r\n      return this.applyPoint(toWorldMat, arr);\r\n    }\r\n\r\n    function fromWorldVec(arr, time) {\r\n      var toWorldMat = this.getMatrix(time);\r\n      toWorldMat.props[12] = 0;\r\n      toWorldMat.props[13] = 0;\r\n      toWorldMat.props[14] = 0;\r\n      return this.invertPoint(toWorldMat, arr);\r\n    }\r\n\r\n    function fromWorld(arr, time) {\r\n      var toWorldMat = this.getMatrix(time);\r\n      return this.invertPoint(toWorldMat, arr);\r\n    }\r\n\r\n    function applyPoint(matrix, arr) {\r\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n        var i;\r\n        var len = this._elem.hierarchy.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n        }\r\n      }\r\n\r\n      return matrix.applyToPointArray(arr[0], arr[1], arr[2] || 0);\r\n    }\r\n\r\n    function invertPoint(matrix, arr) {\r\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n        var i;\r\n        var len = this._elem.hierarchy.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n        }\r\n      }\r\n\r\n      return matrix.inversePoint(arr);\r\n    }\r\n\r\n    function fromComp(arr) {\r\n      var toWorldMat = new Matrix();\r\n      toWorldMat.reset();\r\n\r\n      this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n\r\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n        var i;\r\n        var len = this._elem.hierarchy.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n        }\r\n\r\n        return toWorldMat.inversePoint(arr);\r\n      }\r\n\r\n      return toWorldMat.inversePoint(arr);\r\n    }\r\n\r\n    function sampleImage() {\r\n      return [1, 1, 1, 1];\r\n    }\r\n\r\n    return function (elem) {\r\n      var transformInterface;\r\n\r\n      function _registerMaskInterface(maskManager) {\r\n        _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n      }\r\n\r\n      function _registerEffectsInterface(effects) {\r\n        _thisLayerFunction.effect = effects;\r\n      }\r\n\r\n      function _thisLayerFunction(name) {\r\n        switch (name) {\r\n          case 'ADBE Root Vectors Group':\r\n          case 'Contents':\r\n          case 2:\r\n            return _thisLayerFunction.shapeInterface;\r\n\r\n          case 1:\r\n          case 6:\r\n          case 'Transform':\r\n          case 'transform':\r\n          case 'ADBE Transform Group':\r\n            return transformInterface;\r\n\r\n          case 4:\r\n          case 'ADBE Effect Parade':\r\n          case 'effects':\r\n          case 'Effects':\r\n            return _thisLayerFunction.effect;\r\n\r\n          case 'ADBE Text Properties':\r\n            return _thisLayerFunction.textInterface;\r\n\r\n          default:\r\n            return null;\r\n        }\r\n      }\r\n\r\n      _thisLayerFunction.getMatrix = getMatrix;\r\n      _thisLayerFunction.invertPoint = invertPoint;\r\n      _thisLayerFunction.applyPoint = applyPoint;\r\n      _thisLayerFunction.toWorld = toWorld;\r\n      _thisLayerFunction.toWorldVec = toWorldVec;\r\n      _thisLayerFunction.fromWorld = fromWorld;\r\n      _thisLayerFunction.fromWorldVec = fromWorldVec;\r\n      _thisLayerFunction.toComp = toWorld;\r\n      _thisLayerFunction.fromComp = fromComp;\r\n      _thisLayerFunction.sampleImage = sampleImage;\r\n      _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n      _thisLayerFunction._elem = elem;\r\n      transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\r\n      var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\r\n      Object.defineProperties(_thisLayerFunction, {\r\n        hasParent: {\r\n          get: function get() {\r\n            return elem.hierarchy.length;\r\n          }\r\n        },\r\n        parent: {\r\n          get: function get() {\r\n            return elem.hierarchy[0].layerInterface;\r\n          }\r\n        },\r\n        rotation: getDescriptor(transformInterface, 'rotation'),\r\n        scale: getDescriptor(transformInterface, 'scale'),\r\n        position: getDescriptor(transformInterface, 'position'),\r\n        opacity: getDescriptor(transformInterface, 'opacity'),\r\n        anchorPoint: anchorPointDescriptor,\r\n        anchor_point: anchorPointDescriptor,\r\n        transform: {\r\n          get: function get() {\r\n            return transformInterface;\r\n          }\r\n        },\r\n        active: {\r\n          get: function get() {\r\n            return elem.isInRange;\r\n          }\r\n        }\r\n      });\r\n      _thisLayerFunction.startTime = elem.data.st;\r\n      _thisLayerFunction.index = elem.data.ind;\r\n      _thisLayerFunction.source = elem.data.refId;\r\n      _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\r\n      _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\r\n      _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n      _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n      _thisLayerFunction._name = elem.data.nm;\r\n      _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n      _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n      return _thisLayerFunction;\r\n    };\r\n  }();\r\n\r\n  var propertyGroupFactory = function () {\r\n    return function (interfaceFunction, parentPropertyGroup) {\r\n      return function (val) {\r\n        val = val === undefined ? 1 : val;\r\n\r\n        if (val <= 0) {\r\n          return interfaceFunction;\r\n        }\r\n\r\n        return parentPropertyGroup(val - 1);\r\n      };\r\n    };\r\n  }();\r\n\r\n  var PropertyInterface = function () {\r\n    return function (propertyName, propertyGroup) {\r\n      var interfaceFunction = {\r\n        _name: propertyName\r\n      };\r\n\r\n      function _propertyGroup(val) {\r\n        val = val === undefined ? 1 : val;\r\n\r\n        if (val <= 0) {\r\n          return interfaceFunction;\r\n        }\r\n\r\n        return propertyGroup(val - 1);\r\n      }\r\n\r\n      return _propertyGroup;\r\n    };\r\n  }();\r\n\r\n  var EffectsExpressionInterface = function () {\r\n    var ob = {\r\n      createEffectsInterface: createEffectsInterface\r\n    };\r\n\r\n    function createEffectsInterface(elem, propertyGroup) {\r\n      if (elem.effectsManager) {\r\n        var effectElements = [];\r\n        var effectsData = elem.data.ef;\r\n        var i;\r\n        var len = elem.effectsManager.effectElements.length;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\r\n        }\r\n\r\n        var effects = elem.data.ef || [];\r\n\r\n        var groupInterface = function groupInterface(name) {\r\n          i = 0;\r\n          len = effects.length;\r\n\r\n          while (i < len) {\r\n            if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n              return effectElements[i];\r\n            }\r\n\r\n            i += 1;\r\n          }\r\n\r\n          return null;\r\n        };\r\n\r\n        Object.defineProperty(groupInterface, 'numProperties', {\r\n          get: function get() {\r\n            return effects.length;\r\n          }\r\n        });\r\n        return groupInterface;\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    function createGroupInterface(data, elements, propertyGroup, elem) {\r\n      function groupInterface(name) {\r\n        var effects = data.ef;\r\n        var i = 0;\r\n        var len = effects.length;\r\n\r\n        while (i < len) {\r\n          if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n            if (effects[i].ty === 5) {\r\n              return effectElements[i];\r\n            }\r\n\r\n            return effectElements[i]();\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        throw new Error();\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(groupInterface, propertyGroup);\r\n\r\n      var effectElements = [];\r\n      var i;\r\n      var len = data.ef.length;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (data.ef[i].ty === 5) {\r\n          effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\r\n        } else {\r\n          effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\r\n        }\r\n      }\r\n\r\n      if (data.mn === 'ADBE Color Control') {\r\n        Object.defineProperty(groupInterface, 'color', {\r\n          get: function get() {\r\n            return effectElements[0]();\r\n          }\r\n        });\r\n      }\r\n\r\n      Object.defineProperties(groupInterface, {\r\n        numProperties: {\r\n          get: function get() {\r\n            return data.np;\r\n          }\r\n        },\r\n        _name: {\r\n          value: data.nm\r\n        },\r\n        propertyGroup: {\r\n          value: _propertyGroup\r\n        }\r\n      });\r\n      groupInterface.enabled = data.en !== 0;\r\n      groupInterface.active = groupInterface.enabled;\r\n      return groupInterface;\r\n    }\r\n\r\n    function createValueInterface(element, type, elem, propertyGroup) {\r\n      var expressionProperty = ExpressionPropertyInterface(element.p);\r\n\r\n      function interfaceFunction() {\r\n        if (type === 10) {\r\n          return elem.comp.compInterface(element.p.v);\r\n        }\r\n\r\n        return expressionProperty();\r\n      }\r\n\r\n      if (element.p.setGroupProperty) {\r\n        element.p.setGroupProperty(PropertyInterface('', propertyGroup));\r\n      }\r\n\r\n      return interfaceFunction;\r\n    }\r\n\r\n    return ob;\r\n  }();\r\n\r\n  var ShapePathInterface = function () {\r\n    return function pathInterfaceFactory(shape, view, propertyGroup) {\r\n      var prop = view.sh;\r\n\r\n      function interfaceFunction(val) {\r\n        if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\r\n          return interfaceFunction.path;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      prop.setGroupProperty(PropertyInterface('Path', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        path: {\r\n          get: function get() {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n\r\n            return prop;\r\n          }\r\n        },\r\n        shape: {\r\n          get: function get() {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n\r\n            return prop;\r\n          }\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        },\r\n        ix: {\r\n          value: shape.ix\r\n        },\r\n        propertyIndex: {\r\n          value: shape.ix\r\n        },\r\n        mn: {\r\n          value: shape.mn\r\n        },\r\n        propertyGroup: {\r\n          value: propertyGroup\r\n        }\r\n      });\r\n      return interfaceFunction;\r\n    };\r\n  }();\r\n\r\n  var ShapeExpressionInterface = function () {\r\n    function iterateElements(shapes, view, propertyGroup) {\r\n      var arr = [];\r\n      var i;\r\n      var len = shapes ? shapes.length : 0;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        if (shapes[i].ty === 'gr') {\r\n          arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'fl') {\r\n          arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'st') {\r\n          arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'tm') {\r\n          arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'tr') {// arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n        } else if (shapes[i].ty === 'el') {\r\n          arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'sr') {\r\n          arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'sh') {\r\n          arr.push(ShapePathInterface(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'rc') {\r\n          arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'rd') {\r\n          arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'rp') {\r\n          arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else if (shapes[i].ty === 'gf') {\r\n          arr.push(gradientFillInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        } else {\r\n          arr.push(defaultInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n        }\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function contentsInterfaceFactory(shape, view, propertyGroup) {\r\n      var interfaces;\r\n\r\n      var interfaceFunction = function _interfaceFunction(value) {\r\n        var i = 0;\r\n        var len = interfaces.length;\r\n\r\n        while (i < len) {\r\n          if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\r\n            return interfaces[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        if (typeof value === 'number') {\r\n          return interfaces[value - 1];\r\n        }\r\n\r\n        return null;\r\n      };\r\n\r\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n      interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n      interfaceFunction.numProperties = interfaces.length;\r\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n      interfaceFunction.transform = transformInterface;\r\n      interfaceFunction.propertyIndex = shape.cix;\r\n      interfaceFunction._name = shape.nm;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function groupInterfaceFactory(shape, view, propertyGroup) {\r\n      var interfaceFunction = function _interfaceFunction(value) {\r\n        switch (value) {\r\n          case 'ADBE Vectors Group':\r\n          case 'Contents':\r\n          case 2:\r\n            return interfaceFunction.content;\r\n          // Not necessary for now. Keeping them here in case a new case appears\r\n          // case 'ADBE Vector Transform Group':\r\n          // case 3:\r\n\r\n          default:\r\n            return interfaceFunction.transform;\r\n        }\r\n      };\r\n\r\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n      var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\r\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n      interfaceFunction.content = content;\r\n      interfaceFunction.transform = transformInterface;\r\n      Object.defineProperty(interfaceFunction, '_name', {\r\n        get: function get() {\r\n          return shape.nm;\r\n        }\r\n      }); // interfaceFunction.content = interfaceFunction;\r\n\r\n      interfaceFunction.numProperties = shape.np;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      interfaceFunction.nm = shape.nm;\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function fillInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(val) {\r\n        if (val === 'Color' || val === 'color') {\r\n          return interfaceFunction.color;\r\n        }\r\n\r\n        if (val === 'Opacity' || val === 'opacity') {\r\n          return interfaceFunction.opacity;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      Object.defineProperties(interfaceFunction, {\r\n        color: {\r\n          get: ExpressionPropertyInterface(view.c)\r\n        },\r\n        opacity: {\r\n          get: ExpressionPropertyInterface(view.o)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        },\r\n        mn: {\r\n          value: shape.mn\r\n        }\r\n      });\r\n      view.c.setGroupProperty(PropertyInterface('Color', propertyGroup));\r\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function gradientFillInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(val) {\r\n        if (val === 'Start Point' || val === 'start point') {\r\n          return interfaceFunction.startPoint;\r\n        }\r\n\r\n        if (val === 'End Point' || val === 'end point') {\r\n          return interfaceFunction.endPoint;\r\n        }\r\n\r\n        if (val === 'Opacity' || val === 'opacity') {\r\n          return interfaceFunction.opacity;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      Object.defineProperties(interfaceFunction, {\r\n        startPoint: {\r\n          get: ExpressionPropertyInterface(view.s)\r\n        },\r\n        endPoint: {\r\n          get: ExpressionPropertyInterface(view.e)\r\n        },\r\n        opacity: {\r\n          get: ExpressionPropertyInterface(view.o)\r\n        },\r\n        type: {\r\n          get: function get() {\r\n            return 'a';\r\n          }\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        },\r\n        mn: {\r\n          value: shape.mn\r\n        }\r\n      });\r\n      view.s.setGroupProperty(PropertyInterface('Start Point', propertyGroup));\r\n      view.e.setGroupProperty(PropertyInterface('End Point', propertyGroup));\r\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function defaultInterfaceFactory() {\r\n      function interfaceFunction() {\r\n        return null;\r\n      }\r\n\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function strokeInterfaceFactory(shape, view, propertyGroup) {\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var _dashPropertyGroup = propertyGroupFactory(dashOb, _propertyGroup);\r\n\r\n      function addPropertyToDashOb(i) {\r\n        Object.defineProperty(dashOb, shape.d[i].nm, {\r\n          get: ExpressionPropertyInterface(view.d.dataProps[i].p)\r\n        });\r\n      }\r\n\r\n      var i;\r\n      var len = shape.d ? shape.d.length : 0;\r\n      var dashOb = {};\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        addPropertyToDashOb(i);\r\n        view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n      }\r\n\r\n      function interfaceFunction(val) {\r\n        if (val === 'Color' || val === 'color') {\r\n          return interfaceFunction.color;\r\n        }\r\n\r\n        if (val === 'Opacity' || val === 'opacity') {\r\n          return interfaceFunction.opacity;\r\n        }\r\n\r\n        if (val === 'Stroke Width' || val === 'stroke width') {\r\n          return interfaceFunction.strokeWidth;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      Object.defineProperties(interfaceFunction, {\r\n        color: {\r\n          get: ExpressionPropertyInterface(view.c)\r\n        },\r\n        opacity: {\r\n          get: ExpressionPropertyInterface(view.o)\r\n        },\r\n        strokeWidth: {\r\n          get: ExpressionPropertyInterface(view.w)\r\n        },\r\n        dash: {\r\n          get: function get() {\r\n            return dashOb;\r\n          }\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        },\r\n        mn: {\r\n          value: shape.mn\r\n        }\r\n      });\r\n      view.c.setGroupProperty(PropertyInterface('Color', _propertyGroup));\r\n      view.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n      view.w.setGroupProperty(PropertyInterface('Stroke Width', _propertyGroup));\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function trimInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(val) {\r\n        if (val === shape.e.ix || val === 'End' || val === 'end') {\r\n          return interfaceFunction.end;\r\n        }\r\n\r\n        if (val === shape.s.ix) {\r\n          return interfaceFunction.start;\r\n        }\r\n\r\n        if (val === shape.o.ix) {\r\n          return interfaceFunction.offset;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      view.s.setGroupProperty(PropertyInterface('Start', _propertyGroup));\r\n      view.e.setGroupProperty(PropertyInterface('End', _propertyGroup));\r\n      view.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      interfaceFunction.propertyGroup = propertyGroup;\r\n      Object.defineProperties(interfaceFunction, {\r\n        start: {\r\n          get: ExpressionPropertyInterface(view.s)\r\n        },\r\n        end: {\r\n          get: ExpressionPropertyInterface(view.e)\r\n        },\r\n        offset: {\r\n          get: ExpressionPropertyInterface(view.o)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function transformInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.a.ix === value || value === 'Anchor Point') {\r\n          return interfaceFunction.anchorPoint;\r\n        }\r\n\r\n        if (shape.o.ix === value || value === 'Opacity') {\r\n          return interfaceFunction.opacity;\r\n        }\r\n\r\n        if (shape.p.ix === value || value === 'Position') {\r\n          return interfaceFunction.position;\r\n        }\r\n\r\n        if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\r\n          return interfaceFunction.rotation;\r\n        }\r\n\r\n        if (shape.s.ix === value || value === 'Scale') {\r\n          return interfaceFunction.scale;\r\n        }\r\n\r\n        if (shape.sk && shape.sk.ix === value || value === 'Skew') {\r\n          return interfaceFunction.skew;\r\n        }\r\n\r\n        if (shape.sa && shape.sa.ix === value || value === 'Skew Axis') {\r\n          return interfaceFunction.skewAxis;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      view.transform.mProps.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n      view.transform.mProps.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n      view.transform.mProps.a.setGroupProperty(PropertyInterface('Anchor Point', _propertyGroup));\r\n      view.transform.mProps.s.setGroupProperty(PropertyInterface('Scale', _propertyGroup));\r\n      view.transform.mProps.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n\r\n      if (view.transform.mProps.sk) {\r\n        view.transform.mProps.sk.setGroupProperty(PropertyInterface('Skew', _propertyGroup));\r\n        view.transform.mProps.sa.setGroupProperty(PropertyInterface('Skew Angle', _propertyGroup));\r\n      }\r\n\r\n      view.transform.op.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        opacity: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.o)\r\n        },\r\n        position: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.p)\r\n        },\r\n        anchorPoint: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.a)\r\n        },\r\n        scale: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.s)\r\n        },\r\n        rotation: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.r)\r\n        },\r\n        skew: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.sk)\r\n        },\r\n        skewAxis: {\r\n          get: ExpressionPropertyInterface(view.transform.mProps.sa)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.ty = 'tr';\r\n      interfaceFunction.mn = shape.mn;\r\n      interfaceFunction.propertyGroup = propertyGroup;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function ellipseInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.p.ix === value) {\r\n          return interfaceFunction.position;\r\n        }\r\n\r\n        if (shape.s.ix === value) {\r\n          return interfaceFunction.size;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        size: {\r\n          get: ExpressionPropertyInterface(prop.s)\r\n        },\r\n        position: {\r\n          get: ExpressionPropertyInterface(prop.p)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function starInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.p.ix === value) {\r\n          return interfaceFunction.position;\r\n        }\r\n\r\n        if (shape.r.ix === value) {\r\n          return interfaceFunction.rotation;\r\n        }\r\n\r\n        if (shape.pt.ix === value) {\r\n          return interfaceFunction.points;\r\n        }\r\n\r\n        if (shape.or.ix === value || value === 'ADBE Vector Star Outer Radius') {\r\n          return interfaceFunction.outerRadius;\r\n        }\r\n\r\n        if (shape.os.ix === value) {\r\n          return interfaceFunction.outerRoundness;\r\n        }\r\n\r\n        if (shape.ir && (shape.ir.ix === value || value === 'ADBE Vector Star Inner Radius')) {\r\n          return interfaceFunction.innerRadius;\r\n        }\r\n\r\n        if (shape.is && shape.is.ix === value) {\r\n          return interfaceFunction.innerRoundness;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      prop.or.setGroupProperty(PropertyInterface('Outer Radius', _propertyGroup));\r\n      prop.os.setGroupProperty(PropertyInterface('Outer Roundness', _propertyGroup));\r\n      prop.pt.setGroupProperty(PropertyInterface('Points', _propertyGroup));\r\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n\r\n      if (shape.ir) {\r\n        prop.ir.setGroupProperty(PropertyInterface('Inner Radius', _propertyGroup));\r\n        prop.is.setGroupProperty(PropertyInterface('Inner Roundness', _propertyGroup));\r\n      }\r\n\r\n      Object.defineProperties(interfaceFunction, {\r\n        position: {\r\n          get: ExpressionPropertyInterface(prop.p)\r\n        },\r\n        rotation: {\r\n          get: ExpressionPropertyInterface(prop.r)\r\n        },\r\n        points: {\r\n          get: ExpressionPropertyInterface(prop.pt)\r\n        },\r\n        outerRadius: {\r\n          get: ExpressionPropertyInterface(prop.or)\r\n        },\r\n        outerRoundness: {\r\n          get: ExpressionPropertyInterface(prop.os)\r\n        },\r\n        innerRadius: {\r\n          get: ExpressionPropertyInterface(prop.ir)\r\n        },\r\n        innerRoundness: {\r\n          get: ExpressionPropertyInterface(prop.is)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function rectInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.p.ix === value) {\r\n          return interfaceFunction.position;\r\n        }\r\n\r\n        if (shape.r.ix === value) {\r\n          return interfaceFunction.roundness;\r\n        }\r\n\r\n        if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\r\n          return interfaceFunction.size;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        position: {\r\n          get: ExpressionPropertyInterface(prop.p)\r\n        },\r\n        roundness: {\r\n          get: ExpressionPropertyInterface(prop.r)\r\n        },\r\n        size: {\r\n          get: ExpressionPropertyInterface(prop.s)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function roundedInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.r.ix === value || value === 'Round Corners 1') {\r\n          return interfaceFunction.radius;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var prop = view;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      prop.rd.setGroupProperty(PropertyInterface('Radius', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        radius: {\r\n          get: ExpressionPropertyInterface(prop.rd)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    function repeaterInterfaceFactory(shape, view, propertyGroup) {\r\n      function interfaceFunction(value) {\r\n        if (shape.c.ix === value || value === 'Copies') {\r\n          return interfaceFunction.copies;\r\n        }\r\n\r\n        if (shape.o.ix === value || value === 'Offset') {\r\n          return interfaceFunction.offset;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n      var prop = view;\r\n      interfaceFunction.propertyIndex = shape.ix;\r\n      prop.c.setGroupProperty(PropertyInterface('Copies', _propertyGroup));\r\n      prop.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        copies: {\r\n          get: ExpressionPropertyInterface(prop.c)\r\n        },\r\n        offset: {\r\n          get: ExpressionPropertyInterface(prop.o)\r\n        },\r\n        _name: {\r\n          value: shape.nm\r\n        }\r\n      });\r\n      interfaceFunction.mn = shape.mn;\r\n      return interfaceFunction;\r\n    }\r\n\r\n    return function (shapes, view, propertyGroup) {\r\n      var interfaces;\r\n\r\n      function _interfaceFunction(value) {\r\n        if (typeof value === 'number') {\r\n          value = value === undefined ? 1 : value;\r\n\r\n          if (value === 0) {\r\n            return propertyGroup;\r\n          }\r\n\r\n          return interfaces[value - 1];\r\n        }\r\n\r\n        var i = 0;\r\n        var len = interfaces.length;\r\n\r\n        while (i < len) {\r\n          if (interfaces[i]._name === value) {\r\n            return interfaces[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      function parentGroupWrapper() {\r\n        return propertyGroup;\r\n      }\r\n\r\n      _interfaceFunction.propertyGroup = propertyGroupFactory(_interfaceFunction, parentGroupWrapper);\r\n      interfaces = iterateElements(shapes, view, _interfaceFunction.propertyGroup);\r\n      _interfaceFunction.numProperties = interfaces.length;\r\n      _interfaceFunction._name = 'Contents';\r\n      return _interfaceFunction;\r\n    };\r\n  }();\r\n\r\n  var TextExpressionInterface = function () {\r\n    return function (elem) {\r\n      var _prevValue;\r\n\r\n      var _sourceText;\r\n\r\n      function _thisLayerFunction(name) {\r\n        switch (name) {\r\n          case 'ADBE Text Document':\r\n            return _thisLayerFunction.sourceText;\r\n\r\n          default:\r\n            return null;\r\n        }\r\n      }\r\n\r\n      Object.defineProperty(_thisLayerFunction, 'sourceText', {\r\n        get: function get() {\r\n          elem.textProperty.getValue();\r\n          var stringValue = elem.textProperty.currentData.t;\r\n\r\n          if (stringValue !== _prevValue) {\r\n            _prevValue = elem.textProperty.currentData.t;\r\n            _sourceText = new String(stringValue); // eslint-disable-line no-new-wrappers\r\n            // If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n\r\n            _sourceText.value = stringValue || new String(stringValue); // eslint-disable-line no-new-wrappers\r\n\r\n            Object.defineProperty(_sourceText, 'style', {\r\n              get: function get() {\r\n                return {\r\n                  fillColor: elem.textProperty.currentData.fc\r\n                };\r\n              }\r\n            });\r\n          }\r\n\r\n          return _sourceText;\r\n        }\r\n      });\r\n      return _thisLayerFunction;\r\n    };\r\n  }();\r\n\r\n  function _typeof$2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$2 = function _typeof(obj) { return typeof obj; }; } else { _typeof$2 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$2(obj); }\r\n\r\n  var FootageInterface = function () {\r\n    var outlineInterfaceFactory = function outlineInterfaceFactory(elem) {\r\n      var currentPropertyName = '';\r\n      var currentProperty = elem.getFootageData();\r\n\r\n      function init() {\r\n        currentPropertyName = '';\r\n        currentProperty = elem.getFootageData();\r\n        return searchProperty;\r\n      }\r\n\r\n      function searchProperty(value) {\r\n        if (currentProperty[value]) {\r\n          currentPropertyName = value;\r\n          currentProperty = currentProperty[value];\r\n\r\n          if (_typeof$2(currentProperty) === 'object') {\r\n            return searchProperty;\r\n          }\r\n\r\n          return currentProperty;\r\n        }\r\n\r\n        var propertyNameIndex = value.indexOf(currentPropertyName);\r\n\r\n        if (propertyNameIndex !== -1) {\r\n          var index = parseInt(value.substr(propertyNameIndex + currentPropertyName.length), 10);\r\n          currentProperty = currentProperty[index];\r\n\r\n          if (_typeof$2(currentProperty) === 'object') {\r\n            return searchProperty;\r\n          }\r\n\r\n          return currentProperty;\r\n        }\r\n\r\n        return '';\r\n      }\r\n\r\n      return init;\r\n    };\r\n\r\n    var dataInterfaceFactory = function dataInterfaceFactory(elem) {\r\n      function interfaceFunction(value) {\r\n        if (value === 'Outline') {\r\n          return interfaceFunction.outlineInterface();\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      interfaceFunction._name = 'Outline';\r\n      interfaceFunction.outlineInterface = outlineInterfaceFactory(elem);\r\n      return interfaceFunction;\r\n    };\r\n\r\n    return function (elem) {\r\n      function _interfaceFunction(value) {\r\n        if (value === 'Data') {\r\n          return _interfaceFunction.dataInterface;\r\n        }\r\n\r\n        return null;\r\n      }\r\n\r\n      _interfaceFunction._name = 'Data';\r\n      _interfaceFunction.dataInterface = dataInterfaceFactory(elem);\r\n      return _interfaceFunction;\r\n    };\r\n  }();\r\n\r\n  var interfaces = {\r\n    layer: LayerExpressionInterface,\r\n    effects: EffectsExpressionInterface,\r\n    comp: CompExpressionInterface,\r\n    shape: ShapeExpressionInterface,\r\n    text: TextExpressionInterface,\r\n    footage: FootageInterface\r\n  };\r\n\r\n  function getInterface(type) {\r\n    return interfaces[type] || null;\r\n  }\r\n\r\n  function _typeof$1(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$1 = function _typeof(obj) { return typeof obj; }; } else { _typeof$1 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$1(obj); }\r\n\r\n  /* eslint-disable */\r\n\r\n  /*\r\n   Copyright 2014 David Bau.\r\n\r\n   Permission is hereby granted, free of charge, to any person obtaining\r\n   a copy of this software and associated documentation files (the\r\n   \"Software\"), to deal in the Software without restriction, including\r\n   without limitation the rights to use, copy, modify, merge, publish,\r\n   distribute, sublicense, and/or sell copies of the Software, and to\r\n   permit persons to whom the Software is furnished to do so, subject to\r\n   the following conditions:\r\n\r\n   The above copyright notice and this permission notice shall be\r\n   included in all copies or substantial portions of the Software.\r\n\r\n   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n   CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n   TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n   SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n   */\r\n  function seedRandom(pool, math) {\r\n    //\r\n    // The following constants are related to IEEE 754 limits.\r\n    //\r\n    var global = this,\r\n        width = 256,\r\n        // each RC4 output is 0 <= x < 256\r\n    chunks = 6,\r\n        // at least six RC4 outputs for each double\r\n    digits = 52,\r\n        // there are 52 significant digits in a double\r\n    rngname = 'random',\r\n        // rngname: name for Math.random and Math.seedrandom\r\n    startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto; // node.js crypto module, initialized at the bottom.\r\n    //\r\n    // seedrandom()\r\n    // This is the seedrandom function described above.\r\n    //\r\n\r\n    function seedrandom(seed, options, callback) {\r\n      var key = [];\r\n      options = options === true ? {\r\n        entropy: true\r\n      } : options || {}; // Flatten the seed string or build one from local entropy if needed.\r\n\r\n      var shortseed = mixkey(flatten(options.entropy ? [seed, tostring(pool)] : seed === null ? autoseed() : seed, 3), key); // Use the seed to initialize an ARC4 generator.\r\n\r\n      var arc4 = new ARC4(key); // This function returns a random double in [0, 1) that contains\r\n      // randomness in every bit of the mantissa of the IEEE 754 value.\r\n\r\n      var prng = function prng() {\r\n        var n = arc4.g(chunks),\r\n            // Start with a numerator n < 2 ^ 48\r\n        d = startdenom,\r\n            //   and denominator d = 2 ^ 48.\r\n        x = 0; //   and no 'extra last byte'.\r\n\r\n        while (n < significance) {\r\n          // Fill up all significant digits by\r\n          n = (n + x) * width; //   shifting numerator and\r\n\r\n          d *= width; //   denominator and generating a\r\n\r\n          x = arc4.g(1); //   new least-significant-byte.\r\n        }\r\n\r\n        while (n >= overflow) {\r\n          // To avoid rounding up, before adding\r\n          n /= 2; //   last byte, shift everything\r\n\r\n          d /= 2; //   right using integer math until\r\n\r\n          x >>>= 1; //   we have exactly the desired bits.\r\n        }\r\n\r\n        return (n + x) / d; // Form the number within [0, 1).\r\n      };\r\n\r\n      prng.int32 = function () {\r\n        return arc4.g(4) | 0;\r\n      };\r\n\r\n      prng.quick = function () {\r\n        return arc4.g(4) / 0x100000000;\r\n      };\r\n\r\n      prng[\"double\"] = prng; // Mix the randomness into accumulated entropy.\r\n\r\n      mixkey(tostring(arc4.S), pool); // Calling convention: what to return as a function of prng, seed, is_math.\r\n\r\n      return (options.pass || callback || function (prng, seed, is_math_call, state) {\r\n        if (state) {\r\n          // Load the arc4 state from the given state if it has an S array.\r\n          if (state.S) {\r\n            copy(state, arc4);\r\n          } // Only provide the .state method if requested via options.state.\r\n\r\n\r\n          prng.state = function () {\r\n            return copy(arc4, {});\r\n          };\r\n        } // If called as a method of Math (Math.seedrandom()), mutate\r\n        // Math.random because that is how seedrandom.js has worked since v1.0.\r\n\r\n\r\n        if (is_math_call) {\r\n          math[rngname] = prng;\r\n          return seed;\r\n        } // Otherwise, it is a newer calling convention, so return the\r\n        // prng directly.\r\n        else return prng;\r\n      })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\r\n    }\r\n\r\n    math['seed' + rngname] = seedrandom; //\r\n    // ARC4\r\n    //\r\n    // An ARC4 implementation.  The constructor takes a key in the form of\r\n    // an array of at most (width) integers that should be 0 <= x < (width).\r\n    //\r\n    // The g(count) method returns a pseudorandom integer that concatenates\r\n    // the next (count) outputs from ARC4.  Its return value is a number x\r\n    // that is in the range 0 <= x < (width ^ count).\r\n    //\r\n\r\n    function ARC4(key) {\r\n      var t,\r\n          keylen = key.length,\r\n          me = this,\r\n          i = 0,\r\n          j = me.i = me.j = 0,\r\n          s = me.S = []; // The empty key [] is treated as [0].\r\n\r\n      if (!keylen) {\r\n        key = [keylen++];\r\n      } // Set up S using the standard key scheduling algorithm.\r\n\r\n\r\n      while (i < width) {\r\n        s[i] = i++;\r\n      }\r\n\r\n      for (i = 0; i < width; i++) {\r\n        s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\r\n        s[j] = t;\r\n      } // The \"g\" method returns the next (count) outputs as one number.\r\n\r\n\r\n      me.g = function (count) {\r\n        // Using instance members instead of closure state nearly doubles speed.\r\n        var t,\r\n            r = 0,\r\n            i = me.i,\r\n            j = me.j,\r\n            s = me.S;\r\n\r\n        while (count--) {\r\n          t = s[i = mask & i + 1];\r\n          r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\r\n        }\r\n\r\n        me.i = i;\r\n        me.j = j;\r\n        return r; // For robust unpredictability, the function call below automatically\r\n        // discards an initial batch of values.  This is called RC4-drop[256].\r\n        // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n      };\r\n    } //\r\n    // copy()\r\n    // Copies internal state of ARC4 to or from a plain object.\r\n    //\r\n\r\n\r\n    function copy(f, t) {\r\n      t.i = f.i;\r\n      t.j = f.j;\r\n      t.S = f.S.slice();\r\n      return t;\r\n    } //\r\n    // flatten()\r\n    // Converts an object tree to nested arrays of strings.\r\n    //\r\n\r\n\r\n    function flatten(obj, depth) {\r\n      var result = [],\r\n          typ = _typeof$1(obj),\r\n          prop;\r\n\r\n      if (depth && typ == 'object') {\r\n        for (prop in obj) {\r\n          try {\r\n            result.push(flatten(obj[prop], depth - 1));\r\n          } catch (e) {}\r\n        }\r\n      }\r\n\r\n      return result.length ? result : typ == 'string' ? obj : obj + '\\0';\r\n    } //\r\n    // mixkey()\r\n    // Mixes a string seed into a key that is an array of integers, and\r\n    // returns a shortened string seed that is equivalent to the result key.\r\n    //\r\n\r\n\r\n    function mixkey(seed, key) {\r\n      var stringseed = seed + '',\r\n          smear,\r\n          j = 0;\r\n\r\n      while (j < stringseed.length) {\r\n        key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\r\n      }\r\n\r\n      return tostring(key);\r\n    } //\r\n    // autoseed()\r\n    // Returns an object for autoseeding, using window.crypto and Node crypto\r\n    // module if available.\r\n    //\r\n\r\n\r\n    function autoseed() {\r\n      try {\r\n        if (nodecrypto) {\r\n          return tostring(nodecrypto.randomBytes(width));\r\n        }\r\n\r\n        var out = new Uint8Array(width);\r\n        (global.crypto || global.msCrypto).getRandomValues(out);\r\n        return tostring(out);\r\n      } catch (e) {\r\n        var browser = global.navigator,\r\n            plugins = browser && browser.plugins;\r\n        return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n      }\r\n    } //\r\n    // tostring()\r\n    // Converts an array of charcodes to a string\r\n    //\r\n\r\n\r\n    function tostring(a) {\r\n      return String.fromCharCode.apply(0, a);\r\n    } //\r\n    // When seedrandom.js is loaded, we immediately mix a few bits\r\n    // from the built-in RNG into the entropy pool.  Because we do\r\n    // not want to interfere with deterministic PRNG state later,\r\n    // seedrandom will not call math.random on its own again after\r\n    // initialization.\r\n    //\r\n\r\n\r\n    mixkey(math.random(), pool); //\r\n    // Nodejs and AMD support: export the implementation as a module using\r\n    // either convention.\r\n    //\r\n    // End anonymous scope, and pass initial values.\r\n  }\r\n\r\n  ;\r\n\r\n  function initialize$2(BMMath) {\r\n    seedRandom([], BMMath);\r\n  }\r\n\r\n  var propTypes = {\r\n    SHAPE: 'shape'\r\n  };\r\n\r\n  function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\n  var ExpressionManager = function () {\r\n    'use strict';\r\n\r\n    var ob = {};\r\n    var Math = BMMath;\r\n    var window = null;\r\n    var document = null;\r\n    var XMLHttpRequest = null;\r\n    var fetch = null;\r\n    var frames = null;\r\n    initialize$2(BMMath);\r\n\r\n    function $bm_isInstanceOfArray(arr) {\r\n      return arr.constructor === Array || arr.constructor === Float32Array;\r\n    }\r\n\r\n    function isNumerable(tOfV, v) {\r\n      return tOfV === 'number' || tOfV === 'boolean' || tOfV === 'string' || v instanceof Number;\r\n    }\r\n\r\n    function $bm_neg(a) {\r\n      var tOfA = _typeof(a);\r\n\r\n      if (tOfA === 'number' || tOfA === 'boolean' || a instanceof Number) {\r\n        return -a;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a)) {\r\n        var i;\r\n        var lenA = a.length;\r\n        var retArr = [];\r\n\r\n        for (i = 0; i < lenA; i += 1) {\r\n          retArr[i] = -a[i];\r\n        }\r\n\r\n        return retArr;\r\n      }\r\n\r\n      if (a.propType) {\r\n        return a.v;\r\n      }\r\n\r\n      return -a;\r\n    }\r\n\r\n    var easeInBez = BezierFactory.getBezierEasing(0.333, 0, 0.833, 0.833, 'easeIn').get;\r\n    var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, 0.667, 1, 'easeOut').get;\r\n    var easeInOutBez = BezierFactory.getBezierEasing(0.33, 0, 0.667, 1, 'easeInOut').get;\r\n\r\n    function sum(a, b) {\r\n      var tOfA = _typeof(a);\r\n\r\n      var tOfB = _typeof(b);\r\n\r\n      if (tOfA === 'string' || tOfB === 'string') {\r\n        return a + b;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n        return a + b;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n        a = a.slice(0);\r\n        a[0] += b;\r\n        return a;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n        b = b.slice(0);\r\n        b[0] = a + b[0];\r\n        return b;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n        var i = 0;\r\n        var lenA = a.length;\r\n        var lenB = b.length;\r\n        var retArr = [];\r\n\r\n        while (i < lenA || i < lenB) {\r\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n            retArr[i] = a[i] + b[i];\r\n          } else {\r\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return retArr;\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    var add = sum;\r\n\r\n    function sub(a, b) {\r\n      var tOfA = _typeof(a);\r\n\r\n      var tOfB = _typeof(b);\r\n\r\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n        if (tOfA === 'string') {\r\n          a = parseInt(a, 10);\r\n        }\r\n\r\n        if (tOfB === 'string') {\r\n          b = parseInt(b, 10);\r\n        }\r\n\r\n        return a - b;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n        a = a.slice(0);\r\n        a[0] -= b;\r\n        return a;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n        b = b.slice(0);\r\n        b[0] = a - b[0];\r\n        return b;\r\n      }\r\n\r\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n        var i = 0;\r\n        var lenA = a.length;\r\n        var lenB = b.length;\r\n        var retArr = [];\r\n\r\n        while (i < lenA || i < lenB) {\r\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n            retArr[i] = a[i] - b[i];\r\n          } else {\r\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        return retArr;\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    function mul(a, b) {\r\n      var tOfA = _typeof(a);\r\n\r\n      var tOfB = _typeof(b);\r\n\r\n      var arr;\r\n\r\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n        return a * b;\r\n      }\r\n\r\n      var i;\r\n      var len;\r\n\r\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n        len = a.length;\r\n        arr = createTypedArray('float32', len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = a[i] * b;\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n        len = b.length;\r\n        arr = createTypedArray('float32', len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = a * b[i];\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    function div(a, b) {\r\n      var tOfA = _typeof(a);\r\n\r\n      var tOfB = _typeof(b);\r\n\r\n      var arr;\r\n\r\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n        return a / b;\r\n      }\r\n\r\n      var i;\r\n      var len;\r\n\r\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n        len = a.length;\r\n        arr = createTypedArray('float32', len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = a[i] / b;\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n        len = b.length;\r\n        arr = createTypedArray('float32', len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = a / b[i];\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    function mod(a, b) {\r\n      if (typeof a === 'string') {\r\n        a = parseInt(a, 10);\r\n      }\r\n\r\n      if (typeof b === 'string') {\r\n        b = parseInt(b, 10);\r\n      }\r\n\r\n      return a % b;\r\n    }\r\n\r\n    var $bm_sum = sum;\r\n    var $bm_sub = sub;\r\n    var $bm_mul = mul;\r\n    var $bm_div = div;\r\n    var $bm_mod = mod;\r\n\r\n    function clamp(num, min, max) {\r\n      if (min > max) {\r\n        var mm = max;\r\n        max = min;\r\n        min = mm;\r\n      }\r\n\r\n      return Math.min(Math.max(num, min), max);\r\n    }\r\n\r\n    function radiansToDegrees(val) {\r\n      return val / degToRads;\r\n    }\r\n\r\n    var radians_to_degrees = radiansToDegrees;\r\n\r\n    function degreesToRadians(val) {\r\n      return val * degToRads;\r\n    }\r\n\r\n    var degrees_to_radians = radiansToDegrees;\r\n    var helperLengthArray = [0, 0, 0, 0, 0, 0];\r\n\r\n    function length(arr1, arr2) {\r\n      if (typeof arr1 === 'number' || arr1 instanceof Number) {\r\n        arr2 = arr2 || 0;\r\n        return Math.abs(arr1 - arr2);\r\n      }\r\n\r\n      if (!arr2) {\r\n        arr2 = helperLengthArray;\r\n      }\r\n\r\n      var i;\r\n      var len = Math.min(arr1.length, arr2.length);\r\n      var addedLength = 0;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        addedLength += Math.pow(arr2[i] - arr1[i], 2);\r\n      }\r\n\r\n      return Math.sqrt(addedLength);\r\n    }\r\n\r\n    function normalize(vec) {\r\n      return div(vec, length(vec));\r\n    }\r\n\r\n    function rgbToHsl(val) {\r\n      var r = val[0];\r\n      var g = val[1];\r\n      var b = val[2];\r\n      var max = Math.max(r, g, b);\r\n      var min = Math.min(r, g, b);\r\n      var h;\r\n      var s;\r\n      var l = (max + min) / 2;\r\n\r\n      if (max === min) {\r\n        h = 0; // achromatic\r\n\r\n        s = 0; // achromatic\r\n      } else {\r\n        var d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n\r\n        switch (max) {\r\n          case r:\r\n            h = (g - b) / d + (g < b ? 6 : 0);\r\n            break;\r\n\r\n          case g:\r\n            h = (b - r) / d + 2;\r\n            break;\r\n\r\n          case b:\r\n            h = (r - g) / d + 4;\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n\r\n        h /= 6;\r\n      }\r\n\r\n      return [h, s, l, val[3]];\r\n    }\r\n\r\n    function hue2rgb(p, q, t) {\r\n      if (t < 0) t += 1;\r\n      if (t > 1) t -= 1;\r\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n      if (t < 1 / 2) return q;\r\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n      return p;\r\n    }\r\n\r\n    function hslToRgb(val) {\r\n      var h = val[0];\r\n      var s = val[1];\r\n      var l = val[2];\r\n      var r;\r\n      var g;\r\n      var b;\r\n\r\n      if (s === 0) {\r\n        r = l; // achromatic\r\n\r\n        b = l; // achromatic\r\n\r\n        g = l; // achromatic\r\n      } else {\r\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n        var p = 2 * l - q;\r\n        r = hue2rgb(p, q, h + 1 / 3);\r\n        g = hue2rgb(p, q, h);\r\n        b = hue2rgb(p, q, h - 1 / 3);\r\n      }\r\n\r\n      return [r, g, b, val[3]];\r\n    }\r\n\r\n    function linear(t, tMin, tMax, value1, value2) {\r\n      if (value1 === undefined || value2 === undefined) {\r\n        value1 = tMin;\r\n        value2 = tMax;\r\n        tMin = 0;\r\n        tMax = 1;\r\n      }\r\n\r\n      if (tMax < tMin) {\r\n        var _tMin = tMax;\r\n        tMax = tMin;\r\n        tMin = _tMin;\r\n      }\r\n\r\n      if (t <= tMin) {\r\n        return value1;\r\n      }\r\n\r\n      if (t >= tMax) {\r\n        return value2;\r\n      }\r\n\r\n      var perc = tMax === tMin ? 0 : (t - tMin) / (tMax - tMin);\r\n\r\n      if (!value1.length) {\r\n        return value1 + (value2 - value1) * perc;\r\n      }\r\n\r\n      var i;\r\n      var len = value1.length;\r\n      var arr = createTypedArray('float32', len);\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = value1[i] + (value2[i] - value1[i]) * perc;\r\n      }\r\n\r\n      return arr;\r\n    }\r\n\r\n    function random(min, max) {\r\n      if (max === undefined) {\r\n        if (min === undefined) {\r\n          min = 0;\r\n          max = 1;\r\n        } else {\r\n          max = min;\r\n          min = undefined;\r\n        }\r\n      }\r\n\r\n      if (max.length) {\r\n        var i;\r\n        var len = max.length;\r\n\r\n        if (!min) {\r\n          min = createTypedArray('float32', len);\r\n        }\r\n\r\n        var arr = createTypedArray('float32', len);\r\n        var rnd = BMMath.random();\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          arr[i] = min[i] + rnd * (max[i] - min[i]);\r\n        }\r\n\r\n        return arr;\r\n      }\r\n\r\n      if (min === undefined) {\r\n        min = 0;\r\n      }\r\n\r\n      var rndm = BMMath.random();\r\n      return min + rndm * (max - min);\r\n    }\r\n\r\n    function createPath(points, inTangents, outTangents, closed) {\r\n      var i;\r\n      var len = points.length;\r\n      var path = shapePool.newElement();\r\n      path.setPathData(!!closed, len);\r\n      var arrPlaceholder = [0, 0];\r\n      var inVertexPoint;\r\n      var outVertexPoint;\r\n\r\n      for (i = 0; i < len; i += 1) {\r\n        inVertexPoint = inTangents && inTangents[i] ? inTangents[i] : arrPlaceholder;\r\n        outVertexPoint = outTangents && outTangents[i] ? outTangents[i] : arrPlaceholder;\r\n        path.setTripleAt(points[i][0], points[i][1], outVertexPoint[0] + points[i][0], outVertexPoint[1] + points[i][1], inVertexPoint[0] + points[i][0], inVertexPoint[1] + points[i][1], i, true);\r\n      }\r\n\r\n      return path;\r\n    }\r\n\r\n    function initiateExpression(elem, data, property) {\r\n      // Bail out if we don't want expressions\r\n      function noOp(_value) {\r\n        return _value;\r\n      }\r\n\r\n      if (!elem.globalData.renderConfig.runExpressions) {\r\n        return noOp;\r\n      }\r\n\r\n      var val = data.x;\r\n      var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n\r\n      var _needsRandom = val.indexOf('random') !== -1;\r\n\r\n      var elemType = elem.data.ty;\r\n      var transform;\r\n      var $bm_transform;\r\n      var content;\r\n      var effect;\r\n      var thisProperty = property;\r\n      thisProperty.valueAtTime = thisProperty.getValueAtTime;\r\n      Object.defineProperty(thisProperty, 'value', {\r\n        get: function get() {\r\n          return thisProperty.v;\r\n        }\r\n      });\r\n      elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\r\n      elem.comp.displayStartTime = 0;\r\n      var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n      var outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n      var width = elem.data.sw ? elem.data.sw : 0;\r\n      var height = elem.data.sh ? elem.data.sh : 0;\r\n      var name = elem.data.nm;\r\n      var loopIn;\r\n      var loop_in;\r\n      var loopOut;\r\n      var loop_out;\r\n      var smooth;\r\n      var toWorld;\r\n      var fromWorld;\r\n      var fromComp;\r\n      var toComp;\r\n      var fromCompToSurface;\r\n      var position;\r\n      var rotation;\r\n      var anchorPoint;\r\n      var scale;\r\n      var thisLayer;\r\n      var thisComp;\r\n      var mask;\r\n      var valueAtTime;\r\n      var velocityAtTime;\r\n      var scoped_bm_rt; // val = val.replace(/(\\\\?\"|')((http)(s)?(:\\/))?\\/.*?(\\\\?\"|')/g, \"\\\"\\\"\"); // deter potential network calls\r\n\r\n      var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}]')[0]; // eslint-disable-line no-eval\r\n\r\n      var numKeys = property.kf ? data.k.length : 0;\r\n      var active = !this.data || this.data.hd !== true;\r\n\r\n      var wiggle = function wiggle(freq, amp) {\r\n        var iWiggle;\r\n        var j;\r\n        var lenWiggle = this.pv.length ? this.pv.length : 1;\r\n        var addedAmps = createTypedArray('float32', lenWiggle);\r\n        freq = 5;\r\n        var iterations = Math.floor(time * freq);\r\n        iWiggle = 0;\r\n        j = 0;\r\n\r\n        while (iWiggle < iterations) {\r\n          // var rnd = BMMath.random();\r\n          for (j = 0; j < lenWiggle; j += 1) {\r\n            addedAmps[j] += -amp + amp * 2 * BMMath.random(); // addedAmps[j] += -amp + amp*2*rnd;\r\n          }\r\n\r\n          iWiggle += 1;\r\n        } // var rnd2 = BMMath.random();\r\n\r\n\r\n        var periods = time * freq;\r\n        var perc = periods - Math.floor(periods);\r\n        var arr = createTypedArray('float32', lenWiggle);\r\n\r\n        if (lenWiggle > 1) {\r\n          for (j = 0; j < lenWiggle; j += 1) {\r\n            arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc; // arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n            // arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n          }\r\n\r\n          return arr;\r\n        }\r\n\r\n        return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\r\n      }.bind(this);\r\n\r\n      if (thisProperty.loopIn) {\r\n        loopIn = thisProperty.loopIn.bind(thisProperty);\r\n        loop_in = loopIn;\r\n      }\r\n\r\n      if (thisProperty.loopOut) {\r\n        loopOut = thisProperty.loopOut.bind(thisProperty);\r\n        loop_out = loopOut;\r\n      }\r\n\r\n      if (thisProperty.smooth) {\r\n        smooth = thisProperty.smooth.bind(thisProperty);\r\n      }\r\n\r\n      function loopInDuration(type, duration) {\r\n        return loopIn(type, duration, true);\r\n      }\r\n\r\n      function loopOutDuration(type, duration) {\r\n        return loopOut(type, duration, true);\r\n      }\r\n\r\n      if (this.getValueAtTime) {\r\n        valueAtTime = this.getValueAtTime.bind(this);\r\n      }\r\n\r\n      if (this.getVelocityAtTime) {\r\n        velocityAtTime = this.getVelocityAtTime.bind(this);\r\n      }\r\n\r\n      var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n      function lookAt(elem1, elem2) {\r\n        var fVec = [elem2[0] - elem1[0], elem2[1] - elem1[1], elem2[2] - elem1[2]];\r\n        var pitch = Math.atan2(fVec[0], Math.sqrt(fVec[1] * fVec[1] + fVec[2] * fVec[2])) / degToRads;\r\n        var yaw = -Math.atan2(fVec[1], fVec[2]) / degToRads;\r\n        return [yaw, pitch, 0];\r\n      }\r\n\r\n      function easeOut(t, tMin, tMax, val1, val2) {\r\n        return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\r\n      }\r\n\r\n      function easeIn(t, tMin, tMax, val1, val2) {\r\n        return applyEase(easeInBez, t, tMin, tMax, val1, val2);\r\n      }\r\n\r\n      function ease(t, tMin, tMax, val1, val2) {\r\n        return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\r\n      }\r\n\r\n      function applyEase(fn, t, tMin, tMax, val1, val2) {\r\n        if (val1 === undefined) {\r\n          val1 = tMin;\r\n          val2 = tMax;\r\n        } else {\r\n          t = (t - tMin) / (tMax - tMin);\r\n        }\r\n\r\n        if (t > 1) {\r\n          t = 1;\r\n        } else if (t < 0) {\r\n          t = 0;\r\n        }\r\n\r\n        var mult = fn(t);\r\n\r\n        if ($bm_isInstanceOfArray(val1)) {\r\n          var iKey;\r\n          var lenKey = val1.length;\r\n          var arr = createTypedArray('float32', lenKey);\r\n\r\n          for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n            arr[iKey] = (val2[iKey] - val1[iKey]) * mult + val1[iKey];\r\n          }\r\n\r\n          return arr;\r\n        }\r\n\r\n        return (val2 - val1) * mult + val1;\r\n      }\r\n\r\n      function nearestKey(time) {\r\n        var iKey;\r\n        var lenKey = data.k.length;\r\n        var index;\r\n        var keyTime;\r\n\r\n        if (!data.k.length || typeof data.k[0] === 'number') {\r\n          index = 0;\r\n          keyTime = 0;\r\n        } else {\r\n          index = -1;\r\n          time *= elem.comp.globalData.frameRate;\r\n\r\n          if (time < data.k[0].t) {\r\n            index = 1;\r\n            keyTime = data.k[0].t;\r\n          } else {\r\n            for (iKey = 0; iKey < lenKey - 1; iKey += 1) {\r\n              if (time === data.k[iKey].t) {\r\n                index = iKey + 1;\r\n                keyTime = data.k[iKey].t;\r\n                break;\r\n              } else if (time > data.k[iKey].t && time < data.k[iKey + 1].t) {\r\n                if (time - data.k[iKey].t > data.k[iKey + 1].t - time) {\r\n                  index = iKey + 2;\r\n                  keyTime = data.k[iKey + 1].t;\r\n                } else {\r\n                  index = iKey + 1;\r\n                  keyTime = data.k[iKey].t;\r\n                }\r\n\r\n                break;\r\n              }\r\n            }\r\n\r\n            if (index === -1) {\r\n              index = iKey + 1;\r\n              keyTime = data.k[iKey].t;\r\n            }\r\n          }\r\n        }\r\n\r\n        var obKey = {};\r\n        obKey.index = index;\r\n        obKey.time = keyTime / elem.comp.globalData.frameRate;\r\n        return obKey;\r\n      }\r\n\r\n      function key(ind) {\r\n        var obKey;\r\n        var iKey;\r\n        var lenKey;\r\n\r\n        if (!data.k.length || typeof data.k[0] === 'number') {\r\n          throw new Error('The property has no keyframe at index ' + ind);\r\n        }\r\n\r\n        ind -= 1;\r\n        obKey = {\r\n          time: data.k[ind].t / elem.comp.globalData.frameRate,\r\n          value: []\r\n        };\r\n        var arr = Object.prototype.hasOwnProperty.call(data.k[ind], 's') ? data.k[ind].s : data.k[ind - 1].e;\r\n        lenKey = arr.length;\r\n\r\n        for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n          obKey[iKey] = arr[iKey];\r\n          obKey.value[iKey] = arr[iKey];\r\n        }\r\n\r\n        return obKey;\r\n      }\r\n\r\n      function framesToTime(fr, fps) {\r\n        if (!fps) {\r\n          fps = elem.comp.globalData.frameRate;\r\n        }\r\n\r\n        return fr / fps;\r\n      }\r\n\r\n      function timeToFrames(t, fps) {\r\n        if (!t && t !== 0) {\r\n          t = time;\r\n        }\r\n\r\n        if (!fps) {\r\n          fps = elem.comp.globalData.frameRate;\r\n        }\r\n\r\n        return t * fps;\r\n      }\r\n\r\n      function seedRandom(seed) {\r\n        BMMath.seedrandom(randSeed + seed);\r\n      }\r\n\r\n      function sourceRectAtTime() {\r\n        return elem.sourceRectAtTime();\r\n      }\r\n\r\n      function substring(init, end) {\r\n        if (typeof value === 'string') {\r\n          if (end === undefined) {\r\n            return value.substring(init);\r\n          }\r\n\r\n          return value.substring(init, end);\r\n        }\r\n\r\n        return '';\r\n      }\r\n\r\n      function substr(init, end) {\r\n        if (typeof value === 'string') {\r\n          if (end === undefined) {\r\n            return value.substr(init);\r\n          }\r\n\r\n          return value.substr(init, end);\r\n        }\r\n\r\n        return '';\r\n      }\r\n\r\n      function posterizeTime(framesPerSecond) {\r\n        time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond;\r\n        value = valueAtTime(time);\r\n      }\r\n\r\n      var time;\r\n      var velocity;\r\n      var value;\r\n      var text;\r\n      var textIndex;\r\n      var textTotal;\r\n      var selectorValue;\r\n      var index = elem.data.ind;\r\n      var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n      var parent;\r\n      var randSeed = Math.floor(Math.random() * 1000000);\r\n      var globalData = elem.globalData;\r\n\r\n      function executeExpression(_value) {\r\n        // globalData.pushExpression();\r\n        value = _value;\r\n\r\n        if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\r\n          return value;\r\n        }\r\n\r\n        if (this.propType === 'textSelector') {\r\n          textIndex = this.textIndex;\r\n          textTotal = this.textTotal;\r\n          selectorValue = this.selectorValue;\r\n        }\r\n\r\n        if (!thisLayer) {\r\n          text = elem.layerInterface.text;\r\n          thisLayer = elem.layerInterface;\r\n          thisComp = elem.comp.compInterface;\r\n          toWorld = thisLayer.toWorld.bind(thisLayer);\r\n          fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n          fromComp = thisLayer.fromComp.bind(thisLayer);\r\n          toComp = thisLayer.toComp.bind(thisLayer);\r\n          mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\r\n          fromCompToSurface = fromComp;\r\n        }\r\n\r\n        if (!transform) {\r\n          transform = elem.layerInterface('ADBE Transform Group');\r\n          $bm_transform = transform;\r\n\r\n          if (transform) {\r\n            anchorPoint = transform.anchorPoint;\r\n            /* position = transform.position;\r\n                      rotation = transform.rotation;\r\n                      scale = transform.scale; */\r\n          }\r\n        }\r\n\r\n        if (elemType === 4 && !content) {\r\n          content = thisLayer('ADBE Root Vectors Group');\r\n        }\r\n\r\n        if (!effect) {\r\n          effect = thisLayer(4);\r\n        }\r\n\r\n        hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n\r\n        if (hasParent && !parent) {\r\n          parent = elem.hierarchy[0].layerInterface;\r\n        }\r\n\r\n        time = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n\r\n        if (_needsRandom) {\r\n          seedRandom(randSeed + time);\r\n        }\r\n\r\n        if (needsVelocity) {\r\n          velocity = velocityAtTime(time);\r\n        }\r\n\r\n        expression_function();\r\n        this.frameExpressionId = elem.globalData.frameId; // TODO: Check if it's possible to return on ShapeInterface the .v value\r\n        // Changed this to a ternary operation because Rollup failed compiling it correctly\r\n\r\n        scoped_bm_rt = scoped_bm_rt.propType === propTypes.SHAPE ? scoped_bm_rt.v : scoped_bm_rt;\r\n        return scoped_bm_rt;\r\n      } // Bundlers will see these as dead code and unless we reference them\r\n\r\n\r\n      executeExpression.__preventDeadCodeRemoval = [$bm_transform, anchorPoint, time, velocity, inPoint, outPoint, width, height, name, loop_in, loop_out, smooth, toComp, fromCompToSurface, toWorld, fromWorld, mask, position, rotation, scale, thisComp, numKeys, active, wiggle, loopInDuration, loopOutDuration, comp, lookAt, easeOut, easeIn, ease, nearestKey, key, text, textIndex, textTotal, selectorValue, framesToTime, timeToFrames, sourceRectAtTime, substring, substr, posterizeTime, index, globalData];\r\n      return executeExpression;\r\n    }\r\n\r\n    ob.initiateExpression = initiateExpression;\r\n    ob.__preventDeadCodeRemoval = [window, document, XMLHttpRequest, fetch, frames, $bm_neg, add, $bm_sum, $bm_sub, $bm_mul, $bm_div, $bm_mod, clamp, radians_to_degrees, degreesToRadians, degrees_to_radians, normalize, rgbToHsl, hslToRgb, linear, random, createPath];\r\n    return ob;\r\n  }();\r\n\r\n  var expressionHelpers = function () {\r\n    function searchExpressions(elem, data, prop) {\r\n      if (data.x) {\r\n        prop.k = true;\r\n        prop.x = true;\r\n        prop.initiateExpression = ExpressionManager.initiateExpression;\r\n        prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\r\n      }\r\n    }\r\n\r\n    function getValueAtTime(frameNum) {\r\n      frameNum *= this.elem.globalData.frameRate;\r\n      frameNum -= this.offsetTime;\r\n\r\n      if (frameNum !== this._cachingAtTime.lastFrame) {\r\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n        this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n        this._cachingAtTime.lastFrame = frameNum;\r\n      }\r\n\r\n      return this._cachingAtTime.value;\r\n    }\r\n\r\n    function getSpeedAtTime(frameNum) {\r\n      var delta = -0.01;\r\n      var v1 = this.getValueAtTime(frameNum);\r\n      var v2 = this.getValueAtTime(frameNum + delta);\r\n      var speed = 0;\r\n\r\n      if (v1.length) {\r\n        var i;\r\n\r\n        for (i = 0; i < v1.length; i += 1) {\r\n          speed += Math.pow(v2[i] - v1[i], 2);\r\n        }\r\n\r\n        speed = Math.sqrt(speed) * 100;\r\n      } else {\r\n        speed = 0;\r\n      }\r\n\r\n      return speed;\r\n    }\r\n\r\n    function getVelocityAtTime(frameNum) {\r\n      if (this.vel !== undefined) {\r\n        return this.vel;\r\n      }\r\n\r\n      var delta = -0.001; // frameNum += this.elem.data.st;\r\n\r\n      var v1 = this.getValueAtTime(frameNum);\r\n      var v2 = this.getValueAtTime(frameNum + delta);\r\n      var velocity;\r\n\r\n      if (v1.length) {\r\n        velocity = createTypedArray('float32', v1.length);\r\n        var i;\r\n\r\n        for (i = 0; i < v1.length; i += 1) {\r\n          // removing frameRate\r\n          // if needed, don't add it here\r\n          // velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n          velocity[i] = (v2[i] - v1[i]) / delta;\r\n        }\r\n      } else {\r\n        velocity = (v2 - v1) / delta;\r\n      }\r\n\r\n      return velocity;\r\n    }\r\n\r\n    function getStaticValueAtTime() {\r\n      return this.pv;\r\n    }\r\n\r\n    function setGroupProperty(propertyGroup) {\r\n      this.propertyGroup = propertyGroup;\r\n    }\r\n\r\n    return {\r\n      searchExpressions: searchExpressions,\r\n      getSpeedAtTime: getSpeedAtTime,\r\n      getVelocityAtTime: getVelocityAtTime,\r\n      getValueAtTime: getValueAtTime,\r\n      getStaticValueAtTime: getStaticValueAtTime,\r\n      setGroupProperty: setGroupProperty\r\n    };\r\n  }();\r\n\r\n  function addPropertyDecorator() {\r\n    function loopOut(type, duration, durationFlag) {\r\n      if (!this.k || !this.keyframes) {\r\n        return this.pv;\r\n      }\r\n\r\n      type = type ? type.toLowerCase() : '';\r\n      var currentFrame = this.comp.renderedFrame;\r\n      var keyframes = this.keyframes;\r\n      var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n\r\n      if (currentFrame <= lastKeyFrame) {\r\n        return this.pv;\r\n      }\r\n\r\n      var cycleDuration;\r\n      var firstKeyFrame;\r\n\r\n      if (!durationFlag) {\r\n        if (!duration || duration > keyframes.length - 1) {\r\n          duration = keyframes.length - 1;\r\n        }\r\n\r\n        firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n        cycleDuration = lastKeyFrame - firstKeyFrame;\r\n      } else {\r\n        if (!duration) {\r\n          cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\r\n        } else {\r\n          cycleDuration = Math.abs(lastKeyFrame - this.elem.comp.globalData.frameRate * duration);\r\n        }\r\n\r\n        firstKeyFrame = lastKeyFrame - cycleDuration;\r\n      }\r\n\r\n      var i;\r\n      var len;\r\n      var ret;\r\n\r\n      if (type === 'pingpong') {\r\n        var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n\r\n        if (iterations % 2 !== 0) {\r\n          return this.getValueAtTime((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n        }\r\n      } else if (type === 'offset') {\r\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n\r\n        var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n\r\n        if (this.pv.length) {\r\n          ret = new Array(initV.length);\r\n          len = ret.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ret[i] = (endV[i] - initV[i]) * repeats + current[i];\r\n          }\r\n\r\n          return ret;\r\n        }\r\n\r\n        return (endV - initV) * repeats + current;\r\n      } else if (type === 'continue') {\r\n        var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n\r\n        if (this.pv.length) {\r\n          ret = new Array(lastValue.length);\r\n          len = ret.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005; // eslint-disable-line\r\n          }\r\n\r\n          return ret;\r\n        }\r\n\r\n        return lastValue + (lastValue - nextLastValue) * ((currentFrame - lastKeyFrame) / 0.001);\r\n      }\r\n\r\n      return this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n    }\r\n\r\n    function loopIn(type, duration, durationFlag) {\r\n      if (!this.k) {\r\n        return this.pv;\r\n      }\r\n\r\n      type = type ? type.toLowerCase() : '';\r\n      var currentFrame = this.comp.renderedFrame;\r\n      var keyframes = this.keyframes;\r\n      var firstKeyFrame = keyframes[0].t;\r\n\r\n      if (currentFrame >= firstKeyFrame) {\r\n        return this.pv;\r\n      }\r\n\r\n      var cycleDuration;\r\n      var lastKeyFrame;\r\n\r\n      if (!durationFlag) {\r\n        if (!duration || duration > keyframes.length - 1) {\r\n          duration = keyframes.length - 1;\r\n        }\r\n\r\n        lastKeyFrame = keyframes[duration].t;\r\n        cycleDuration = lastKeyFrame - firstKeyFrame;\r\n      } else {\r\n        if (!duration) {\r\n          cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\r\n        } else {\r\n          cycleDuration = Math.abs(this.elem.comp.globalData.frameRate * duration);\r\n        }\r\n\r\n        lastKeyFrame = firstKeyFrame + cycleDuration;\r\n      }\r\n\r\n      var i;\r\n      var len;\r\n      var ret;\r\n\r\n      if (type === 'pingpong') {\r\n        var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\r\n\r\n        if (iterations % 2 === 0) {\r\n          return this.getValueAtTime(((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n        }\r\n      } else if (type === 'offset') {\r\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n        var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\r\n\r\n        if (this.pv.length) {\r\n          ret = new Array(initV.length);\r\n          len = ret.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\r\n          }\r\n\r\n          return ret;\r\n        }\r\n\r\n        return current - (endV - initV) * repeats;\r\n      } else if (type === 'continue') {\r\n        var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n\r\n        if (this.pv.length) {\r\n          ret = new Array(firstValue.length);\r\n          len = ret.length;\r\n\r\n          for (i = 0; i < len; i += 1) {\r\n            ret[i] = firstValue[i] + (firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame) / 0.001;\r\n          }\r\n\r\n          return ret;\r\n        }\r\n\r\n        return firstValue + (firstValue - nextFirstValue) * (firstKeyFrame - currentFrame) / 0.001;\r\n      }\r\n\r\n      return this.getValueAtTime((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n    }\r\n\r\n    function smooth(width, samples) {\r\n      if (!this.k) {\r\n        return this.pv;\r\n      }\r\n\r\n      width = (width || 0.4) * 0.5;\r\n      samples = Math.floor(samples || 5);\r\n\r\n      if (samples <= 1) {\r\n        return this.pv;\r\n      }\r\n\r\n      var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n      var initFrame = currentTime - width;\r\n      var endFrame = currentTime + width;\r\n      var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\r\n      var i = 0;\r\n      var j = 0;\r\n      var value;\r\n\r\n      if (this.pv.length) {\r\n        value = createTypedArray('float32', this.pv.length);\r\n      } else {\r\n        value = 0;\r\n      }\r\n\r\n      var sampleValue;\r\n\r\n      while (i < samples) {\r\n        sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\r\n\r\n        if (this.pv.length) {\r\n          for (j = 0; j < this.pv.length; j += 1) {\r\n            value[j] += sampleValue[j];\r\n          }\r\n        } else {\r\n          value += sampleValue;\r\n        }\r\n\r\n        i += 1;\r\n      }\r\n\r\n      if (this.pv.length) {\r\n        for (j = 0; j < this.pv.length; j += 1) {\r\n          value[j] /= samples;\r\n        }\r\n      } else {\r\n        value /= samples;\r\n      }\r\n\r\n      return value;\r\n    }\r\n\r\n    function getTransformValueAtTime(time) {\r\n      if (!this._transformCachingAtTime) {\r\n        this._transformCachingAtTime = {\r\n          v: new Matrix()\r\n        };\r\n      } /// /\r\n\r\n\r\n      var matrix = this._transformCachingAtTime.v;\r\n      matrix.cloneFromProps(this.pre.props);\r\n\r\n      if (this.appliedTransformations < 1) {\r\n        var anchor = this.a.getValueAtTime(time);\r\n        matrix.translate(-anchor[0] * this.a.mult, -anchor[1] * this.a.mult, anchor[2] * this.a.mult);\r\n      }\r\n\r\n      if (this.appliedTransformations < 2) {\r\n        var scale = this.s.getValueAtTime(time);\r\n        matrix.scale(scale[0] * this.s.mult, scale[1] * this.s.mult, scale[2] * this.s.mult);\r\n      }\r\n\r\n      if (this.sk && this.appliedTransformations < 3) {\r\n        var skew = this.sk.getValueAtTime(time);\r\n        var skewAxis = this.sa.getValueAtTime(time);\r\n        matrix.skewFromAxis(-skew * this.sk.mult, skewAxis * this.sa.mult);\r\n      }\r\n\r\n      if (this.r && this.appliedTransformations < 4) {\r\n        var rotation = this.r.getValueAtTime(time);\r\n        matrix.rotate(-rotation * this.r.mult);\r\n      } else if (!this.r && this.appliedTransformations < 4) {\r\n        var rotationZ = this.rz.getValueAtTime(time);\r\n        var rotationY = this.ry.getValueAtTime(time);\r\n        var rotationX = this.rx.getValueAtTime(time);\r\n        var orientation = this.or.getValueAtTime(time);\r\n        matrix.rotateZ(-rotationZ * this.rz.mult).rotateY(rotationY * this.ry.mult).rotateX(rotationX * this.rx.mult).rotateZ(-orientation[2] * this.or.mult).rotateY(orientation[1] * this.or.mult).rotateX(orientation[0] * this.or.mult);\r\n      }\r\n\r\n      if (this.data.p && this.data.p.s) {\r\n        var positionX = this.px.getValueAtTime(time);\r\n        var positionY = this.py.getValueAtTime(time);\r\n\r\n        if (this.data.p.z) {\r\n          var positionZ = this.pz.getValueAtTime(time);\r\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, -positionZ * this.pz.mult);\r\n        } else {\r\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, 0);\r\n        }\r\n      } else {\r\n        var position = this.p.getValueAtTime(time);\r\n        matrix.translate(position[0] * this.p.mult, position[1] * this.p.mult, -position[2] * this.p.mult);\r\n      }\r\n\r\n      return matrix; /// /\r\n    }\r\n\r\n    function getTransformStaticValueAtTime() {\r\n      return this.v.clone(new Matrix());\r\n    }\r\n\r\n    var getTransformProperty = TransformPropertyFactory.getTransformProperty;\r\n\r\n    TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\r\n      var prop = getTransformProperty(elem, data, container);\r\n\r\n      if (prop.dynamicProperties.length) {\r\n        prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n      } else {\r\n        prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n      }\r\n\r\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n      return prop;\r\n    };\r\n\r\n    var propertyGetProp = PropertyFactory.getProp;\r\n\r\n    PropertyFactory.getProp = function (elem, data, type, mult, container) {\r\n      var prop = propertyGetProp(elem, data, type, mult, container); // prop.getVelocityAtTime = getVelocityAtTime;\r\n      // prop.loopOut = loopOut;\r\n      // prop.loopIn = loopIn;\r\n\r\n      if (prop.kf) {\r\n        prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\r\n      } else {\r\n        prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\r\n      }\r\n\r\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n      prop.loopOut = loopOut;\r\n      prop.loopIn = loopIn;\r\n      prop.smooth = smooth;\r\n      prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\r\n      prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\r\n      prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n      prop.propertyIndex = data.ix;\r\n      var value = 0;\r\n\r\n      if (type !== 0) {\r\n        value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\r\n      }\r\n\r\n      prop._cachingAtTime = {\r\n        lastFrame: initialDefaultFrame,\r\n        lastIndex: 0,\r\n        value: value\r\n      };\r\n      expressionHelpers.searchExpressions(elem, data, prop);\r\n\r\n      if (prop.k) {\r\n        container.addDynamicProperty(prop);\r\n      }\r\n\r\n      return prop;\r\n    };\r\n\r\n    function getShapeValueAtTime(frameNum) {\r\n      // For now this caching object is created only when needed instead of creating it when the shape is initialized.\r\n      if (!this._cachingAtTime) {\r\n        this._cachingAtTime = {\r\n          shapeValue: shapePool.clone(this.pv),\r\n          lastIndex: 0,\r\n          lastTime: initialDefaultFrame\r\n        };\r\n      }\r\n\r\n      frameNum *= this.elem.globalData.frameRate;\r\n      frameNum -= this.offsetTime;\r\n\r\n      if (frameNum !== this._cachingAtTime.lastTime) {\r\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\r\n        this._cachingAtTime.lastTime = frameNum;\r\n        this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\r\n      }\r\n\r\n      return this._cachingAtTime.shapeValue;\r\n    }\r\n\r\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n    function ShapeExpressions() {}\r\n\r\n    ShapeExpressions.prototype = {\r\n      vertices: function vertices(prop, time) {\r\n        if (this.k) {\r\n          this.getValue();\r\n        }\r\n\r\n        var shapePath = this.v;\r\n\r\n        if (time !== undefined) {\r\n          shapePath = this.getValueAtTime(time, 0);\r\n        }\r\n\r\n        var i;\r\n        var len = shapePath._length;\r\n        var vertices = shapePath[prop];\r\n        var points = shapePath.v;\r\n        var arr = createSizedArray(len);\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n          if (prop === 'i' || prop === 'o') {\r\n            arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\r\n          } else {\r\n            arr[i] = [vertices[i][0], vertices[i][1]];\r\n          }\r\n        }\r\n\r\n        return arr;\r\n      },\r\n      points: function points(time) {\r\n        return this.vertices('v', time);\r\n      },\r\n      inTangents: function inTangents(time) {\r\n        return this.vertices('i', time);\r\n      },\r\n      outTangents: function outTangents(time) {\r\n        return this.vertices('o', time);\r\n      },\r\n      isClosed: function isClosed() {\r\n        return this.v.c;\r\n      },\r\n      pointOnPath: function pointOnPath(perc, time) {\r\n        var shapePath = this.v;\r\n\r\n        if (time !== undefined) {\r\n          shapePath = this.getValueAtTime(time, 0);\r\n        }\r\n\r\n        if (!this._segmentsLength) {\r\n          this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n        }\r\n\r\n        var segmentsLength = this._segmentsLength;\r\n        var lengths = segmentsLength.lengths;\r\n        var lengthPos = segmentsLength.totalLength * perc;\r\n        var i = 0;\r\n        var len = lengths.length;\r\n        var accumulatedLength = 0;\r\n        var pt;\r\n\r\n        while (i < len) {\r\n          if (accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n            var initIndex = i;\r\n            var endIndex = shapePath.c && i === len - 1 ? 0 : i + 1;\r\n            var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\r\n            pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\r\n            break;\r\n          } else {\r\n            accumulatedLength += lengths[i].addedLength;\r\n          }\r\n\r\n          i += 1;\r\n        }\r\n\r\n        if (!pt) {\r\n          pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\r\n        }\r\n\r\n        return pt;\r\n      },\r\n      vectorOnPath: function vectorOnPath(perc, time, vectorType) {\r\n        // perc doesn't use triple equality because it can be a Number object as well as a primitive.\r\n        if (perc == 1) {\r\n          // eslint-disable-line eqeqeq\r\n          perc = this.v.c;\r\n        } else if (perc == 0) {\r\n          // eslint-disable-line eqeqeq\r\n          perc = 0.999;\r\n        }\r\n\r\n        var pt1 = this.pointOnPath(perc, time);\r\n        var pt2 = this.pointOnPath(perc + 0.001, time);\r\n        var xLength = pt2[0] - pt1[0];\r\n        var yLength = pt2[1] - pt1[1];\r\n        var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\r\n\r\n        if (magnitude === 0) {\r\n          return [0, 0];\r\n        }\r\n\r\n        var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\r\n        return unitVector;\r\n      },\r\n      tangentOnPath: function tangentOnPath(perc, time) {\r\n        return this.vectorOnPath(perc, time, 'tangent');\r\n      },\r\n      normalOnPath: function normalOnPath(perc, time) {\r\n        return this.vectorOnPath(perc, time, 'normal');\r\n      },\r\n      setGroupProperty: expressionHelpers.setGroupProperty,\r\n      getValueAtTime: expressionHelpers.getStaticValueAtTime\r\n    };\r\n    extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\r\n    extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\r\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n    KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\r\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n\r\n    ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\r\n      var prop = propertyGetShapeProp(elem, data, type, arr, trims);\r\n      prop.propertyIndex = data.ix;\r\n      prop.lock = false;\r\n\r\n      if (type === 3) {\r\n        expressionHelpers.searchExpressions(elem, data.pt, prop);\r\n      } else if (type === 4) {\r\n        expressionHelpers.searchExpressions(elem, data.ks, prop);\r\n      }\r\n\r\n      if (prop.k) {\r\n        elem.addDynamicProperty(prop);\r\n      }\r\n\r\n      return prop;\r\n    };\r\n  }\r\n\r\n  function initialize$1() {\r\n    addPropertyDecorator();\r\n  }\r\n\r\n  function addDecorator() {\r\n    function searchExpressions() {\r\n      if (this.data.d.x) {\r\n        this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\r\n        this.addEffect(this.getExpressionValue.bind(this));\r\n        return true;\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    TextProperty.prototype.getExpressionValue = function (currentValue, text) {\r\n      var newValue = this.calculateExpression(text);\r\n\r\n      if (currentValue.t !== newValue) {\r\n        var newData = {};\r\n        this.copyData(newData, currentValue);\r\n        newData.t = newValue.toString();\r\n        newData.__complete = false;\r\n        return newData;\r\n      }\r\n\r\n      return currentValue;\r\n    };\r\n\r\n    TextProperty.prototype.searchProperty = function () {\r\n      var isKeyframed = this.searchKeyframes();\r\n      var hasExpressions = this.searchExpressions();\r\n      this.kf = isKeyframed || hasExpressions;\r\n      return this.kf;\r\n    };\r\n\r\n    TextProperty.prototype.searchExpressions = searchExpressions;\r\n  }\r\n\r\n  function initialize() {\r\n    addDecorator();\r\n  }\r\n\r\n  function SVGComposableEffect() {}\r\n\r\n  SVGComposableEffect.prototype = {\r\n    createMergeNode: function createMergeNode(resultId, ins) {\r\n      var feMerge = createNS('feMerge');\r\n      feMerge.setAttribute('result', resultId);\r\n      var feMergeNode;\r\n      var i;\r\n\r\n      for (i = 0; i < ins.length; i += 1) {\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in', ins[i]);\r\n        feMerge.appendChild(feMergeNode);\r\n        feMerge.appendChild(feMergeNode);\r\n      }\r\n\r\n      return feMerge;\r\n    }\r\n  };\r\n\r\n  var linearFilterValue = '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0';\r\n\r\n  function SVGTintFilter(filter, filterManager, elem, id, source) {\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n    feColorMatrix.setAttribute('values', linearFilterValue + ' 1 0');\r\n    this.linearFilter = feColorMatrix;\r\n    feColorMatrix.setAttribute('result', id + '_tint_1');\r\n    filter.appendChild(feColorMatrix);\r\n    feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result', id + '_tint_2');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n    var feMerge = this.createMergeNode(id, [source, id + '_tint_1', id + '_tint_2']);\r\n    filter.appendChild(feMerge);\r\n  }\r\n\r\n  extendPrototype([SVGComposableEffect], SVGTintFilter);\r\n\r\n  SVGTintFilter.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      var colorBlack = this.filterManager.effectElements[0].p.v;\r\n      var colorWhite = this.filterManager.effectElements[1].p.v;\r\n      var opacity = this.filterManager.effectElements[2].p.v / 100;\r\n      this.linearFilter.setAttribute('values', linearFilterValue + ' ' + opacity + ' 0');\r\n      this.matrixFilter.setAttribute('values', colorWhite[0] - colorBlack[0] + ' 0 0 0 ' + colorBlack[0] + ' ' + (colorWhite[1] - colorBlack[1]) + ' 0 0 0 ' + colorBlack[1] + ' ' + (colorWhite[2] - colorBlack[2]) + ' 0 0 0 ' + colorBlack[2] + ' 0 0 0 1 0');\r\n    }\r\n  };\r\n\r\n  function SVGFillFilter(filter, filterManager, elem, id) {\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result', id);\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n  }\r\n\r\n  SVGFillFilter.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      var color = this.filterManager.effectElements[2].p.v;\r\n      var opacity = this.filterManager.effectElements[6].p.v;\r\n      this.matrixFilter.setAttribute('values', '0 0 0 0 ' + color[0] + ' 0 0 0 0 ' + color[1] + ' 0 0 0 0 ' + color[2] + ' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n  };\r\n\r\n  function SVGStrokeEffect(fil, filterManager, elem) {\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.elem = elem;\r\n    this.paths = [];\r\n  }\r\n\r\n  SVGStrokeEffect.prototype.initialize = function () {\r\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n    var path;\r\n    var groupPath;\r\n    var i;\r\n    var len;\r\n\r\n    if (this.filterManager.effectElements[1].p.v === 1) {\r\n      len = this.elem.maskManager.masksProperties.length;\r\n      i = 0;\r\n    } else {\r\n      i = this.filterManager.effectElements[0].p.v - 1;\r\n      len = i + 1;\r\n    }\r\n\r\n    groupPath = createNS('g');\r\n    groupPath.setAttribute('fill', 'none');\r\n    groupPath.setAttribute('stroke-linecap', 'round');\r\n    groupPath.setAttribute('stroke-dashoffset', 1);\r\n\r\n    for (i; i < len; i += 1) {\r\n      path = createNS('path');\r\n      groupPath.appendChild(path);\r\n      this.paths.push({\r\n        p: path,\r\n        m: i\r\n      });\r\n    }\r\n\r\n    if (this.filterManager.effectElements[10].p.v === 3) {\r\n      var mask = createNS('mask');\r\n      var id = createElementID();\r\n      mask.setAttribute('id', id);\r\n      mask.setAttribute('mask-type', 'alpha');\r\n      mask.appendChild(groupPath);\r\n      this.elem.globalData.defs.appendChild(mask);\r\n      var g = createNS('g');\r\n      g.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\r\n\r\n      while (elemChildren[0]) {\r\n        g.appendChild(elemChildren[0]);\r\n      }\r\n\r\n      this.elem.layerElement.appendChild(g);\r\n      this.masker = mask;\r\n      groupPath.setAttribute('stroke', '#fff');\r\n    } else if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n      if (this.filterManager.effectElements[10].p.v === 2) {\r\n        elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n\r\n        while (elemChildren.length) {\r\n          this.elem.layerElement.removeChild(elemChildren[0]);\r\n        }\r\n      }\r\n\r\n      this.elem.layerElement.appendChild(groupPath);\r\n      this.elem.layerElement.removeAttribute('mask');\r\n      groupPath.setAttribute('stroke', '#fff');\r\n    }\r\n\r\n    this.initialized = true;\r\n    this.pathMasker = groupPath;\r\n  };\r\n\r\n  SVGStrokeEffect.prototype.renderFrame = function (forceRender) {\r\n    if (!this.initialized) {\r\n      this.initialize();\r\n    }\r\n\r\n    var i;\r\n    var len = this.paths.length;\r\n    var mask;\r\n    var path;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.paths[i].m !== -1) {\r\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n        path = this.paths[i].p;\r\n\r\n        if (forceRender || this.filterManager._mdf || mask.prop._mdf) {\r\n          path.setAttribute('d', mask.lastPath);\r\n        }\r\n\r\n        if (forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf) {\r\n          var dasharrayValue;\r\n\r\n          if (this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100) {\r\n            var s = Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n            var e = Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n            var l = path.getTotalLength();\r\n            dasharrayValue = '0 0 0 ' + l * s + ' ';\r\n            var lineLength = l * (e - s);\r\n            var segment = 1 + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n            var units = Math.floor(lineLength / segment);\r\n            var j;\r\n\r\n            for (j = 0; j < units; j += 1) {\r\n              dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01 + ' ';\r\n            }\r\n\r\n            dasharrayValue += '0 ' + l * 10 + ' 0 0';\r\n          } else {\r\n            dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n          }\r\n\r\n          path.setAttribute('stroke-dasharray', dasharrayValue);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n      this.pathMasker.setAttribute('stroke-width', this.filterManager.effectElements[4].p.v * 2);\r\n    }\r\n\r\n    if (forceRender || this.filterManager.effectElements[6].p._mdf) {\r\n      this.pathMasker.setAttribute('opacity', this.filterManager.effectElements[6].p.v);\r\n    }\r\n\r\n    if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n      if (forceRender || this.filterManager.effectElements[3].p._mdf) {\r\n        var color = this.filterManager.effectElements[3].p.v;\r\n        this.pathMasker.setAttribute('stroke', 'rgb(' + bmFloor(color[0] * 255) + ',' + bmFloor(color[1] * 255) + ',' + bmFloor(color[2] * 255) + ')');\r\n      }\r\n    }\r\n  };\r\n\r\n  function SVGTritoneFilter(filter, filterManager, elem, id) {\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n    feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    filter.appendChild(feColorMatrix);\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feComponentTransfer.setAttribute('result', id);\r\n    this.matrixFilter = feComponentTransfer;\r\n    var feFuncR = createNS('feFuncR');\r\n    feFuncR.setAttribute('type', 'table');\r\n    feComponentTransfer.appendChild(feFuncR);\r\n    this.feFuncR = feFuncR;\r\n    var feFuncG = createNS('feFuncG');\r\n    feFuncG.setAttribute('type', 'table');\r\n    feComponentTransfer.appendChild(feFuncG);\r\n    this.feFuncG = feFuncG;\r\n    var feFuncB = createNS('feFuncB');\r\n    feFuncB.setAttribute('type', 'table');\r\n    feComponentTransfer.appendChild(feFuncB);\r\n    this.feFuncB = feFuncB;\r\n    filter.appendChild(feComponentTransfer);\r\n  }\r\n\r\n  SVGTritoneFilter.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      var color1 = this.filterManager.effectElements[0].p.v;\r\n      var color2 = this.filterManager.effectElements[1].p.v;\r\n      var color3 = this.filterManager.effectElements[2].p.v;\r\n      var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n      var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n      var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n      this.feFuncR.setAttribute('tableValues', tableR);\r\n      this.feFuncG.setAttribute('tableValues', tableG);\r\n      this.feFuncB.setAttribute('tableValues', tableB);\r\n    }\r\n  };\r\n\r\n  function SVGProLevelsFilter(filter, filterManager, elem, id) {\r\n    this.filterManager = filterManager;\r\n    var effectElements = this.filterManager.effectElements;\r\n    var feComponentTransfer = createNS('feComponentTransfer'); // Red\r\n\r\n    if (effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1) {\r\n      this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    } // Green\r\n\r\n\r\n    if (effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1) {\r\n      this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    } // Blue\r\n\r\n\r\n    if (effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1) {\r\n      this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    } // Alpha\r\n\r\n\r\n    if (effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1) {\r\n      this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n    } // RGB\r\n\r\n\r\n    if (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) {\r\n      feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n      filter.appendChild(feComponentTransfer);\r\n    }\r\n\r\n    if (effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1) {\r\n      feComponentTransfer = createNS('feComponentTransfer');\r\n      feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n      feComponentTransfer.setAttribute('result', id);\r\n      filter.appendChild(feComponentTransfer);\r\n      this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n      this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n      this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n  }\r\n\r\n  SVGProLevelsFilter.prototype.createFeFunc = function (type, feComponentTransfer) {\r\n    var feFunc = createNS(type);\r\n    feFunc.setAttribute('type', 'table');\r\n    feComponentTransfer.appendChild(feFunc);\r\n    return feFunc;\r\n  };\r\n\r\n  SVGProLevelsFilter.prototype.getTableValue = function (inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n    var cnt = 0;\r\n    var segments = 256;\r\n    var perc;\r\n    var min = Math.min(inputBlack, inputWhite);\r\n    var max = Math.max(inputBlack, inputWhite);\r\n    var table = Array.call(null, {\r\n      length: segments\r\n    });\r\n    var colorValue;\r\n    var pos = 0;\r\n    var outputDelta = outputWhite - outputBlack;\r\n    var inputDelta = inputWhite - inputBlack;\r\n\r\n    while (cnt <= 256) {\r\n      perc = cnt / 256;\r\n\r\n      if (perc <= min) {\r\n        colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n      } else if (perc >= max) {\r\n        colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n      } else {\r\n        colorValue = outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma);\r\n      }\r\n\r\n      table[pos] = colorValue;\r\n      pos += 1;\r\n      cnt += 256 / (segments - 1);\r\n    }\r\n\r\n    return table.join(' ');\r\n  };\r\n\r\n  SVGProLevelsFilter.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      var val;\r\n      var effectElements = this.filterManager.effectElements;\r\n\r\n      if (this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)) {\r\n        val = this.getTableValue(effectElements[3].p.v, effectElements[4].p.v, effectElements[5].p.v, effectElements[6].p.v, effectElements[7].p.v);\r\n        this.feFuncRComposed.setAttribute('tableValues', val);\r\n        this.feFuncGComposed.setAttribute('tableValues', val);\r\n        this.feFuncBComposed.setAttribute('tableValues', val);\r\n      }\r\n\r\n      if (this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)) {\r\n        val = this.getTableValue(effectElements[10].p.v, effectElements[11].p.v, effectElements[12].p.v, effectElements[13].p.v, effectElements[14].p.v);\r\n        this.feFuncR.setAttribute('tableValues', val);\r\n      }\r\n\r\n      if (this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)) {\r\n        val = this.getTableValue(effectElements[17].p.v, effectElements[18].p.v, effectElements[19].p.v, effectElements[20].p.v, effectElements[21].p.v);\r\n        this.feFuncG.setAttribute('tableValues', val);\r\n      }\r\n\r\n      if (this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)) {\r\n        val = this.getTableValue(effectElements[24].p.v, effectElements[25].p.v, effectElements[26].p.v, effectElements[27].p.v, effectElements[28].p.v);\r\n        this.feFuncB.setAttribute('tableValues', val);\r\n      }\r\n\r\n      if (this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)) {\r\n        val = this.getTableValue(effectElements[31].p.v, effectElements[32].p.v, effectElements[33].p.v, effectElements[34].p.v, effectElements[35].p.v);\r\n        this.feFuncA.setAttribute('tableValues', val);\r\n      }\r\n    }\r\n  };\r\n\r\n  function SVGDropShadowEffect(filter, filterManager, elem, id, source) {\r\n    var globalFilterSize = filterManager.container.globalData.renderConfig.filterSize;\r\n    var filterSize = filterManager.data.fs || globalFilterSize;\r\n    filter.setAttribute('x', filterSize.x || globalFilterSize.x);\r\n    filter.setAttribute('y', filterSize.y || globalFilterSize.y);\r\n    filter.setAttribute('width', filterSize.width || globalFilterSize.width);\r\n    filter.setAttribute('height', filterSize.height || globalFilterSize.height);\r\n    this.filterManager = filterManager;\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    feGaussianBlur.setAttribute('in', 'SourceAlpha');\r\n    feGaussianBlur.setAttribute('result', id + '_drop_shadow_1');\r\n    feGaussianBlur.setAttribute('stdDeviation', '0');\r\n    this.feGaussianBlur = feGaussianBlur;\r\n    filter.appendChild(feGaussianBlur);\r\n    var feOffset = createNS('feOffset');\r\n    feOffset.setAttribute('dx', '25');\r\n    feOffset.setAttribute('dy', '0');\r\n    feOffset.setAttribute('in', id + '_drop_shadow_1');\r\n    feOffset.setAttribute('result', id + '_drop_shadow_2');\r\n    this.feOffset = feOffset;\r\n    filter.appendChild(feOffset);\r\n    var feFlood = createNS('feFlood');\r\n    feFlood.setAttribute('flood-color', '#00ff00');\r\n    feFlood.setAttribute('flood-opacity', '1');\r\n    feFlood.setAttribute('result', id + '_drop_shadow_3');\r\n    this.feFlood = feFlood;\r\n    filter.appendChild(feFlood);\r\n    var feComposite = createNS('feComposite');\r\n    feComposite.setAttribute('in', id + '_drop_shadow_3');\r\n    feComposite.setAttribute('in2', id + '_drop_shadow_2');\r\n    feComposite.setAttribute('operator', 'in');\r\n    feComposite.setAttribute('result', id + '_drop_shadow_4');\r\n    filter.appendChild(feComposite);\r\n    var feMerge = this.createMergeNode(id, [id + '_drop_shadow_4', source]);\r\n    filter.appendChild(feMerge); //\r\n  }\r\n\r\n  extendPrototype([SVGComposableEffect], SVGDropShadowEffect);\r\n\r\n  SVGDropShadowEffect.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n        this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n      }\r\n\r\n      if (forceRender || this.filterManager.effectElements[0].p._mdf) {\r\n        var col = this.filterManager.effectElements[0].p.v;\r\n        this.feFlood.setAttribute('flood-color', rgbToHex(Math.round(col[0] * 255), Math.round(col[1] * 255), Math.round(col[2] * 255)));\r\n      }\r\n\r\n      if (forceRender || this.filterManager.effectElements[1].p._mdf) {\r\n        this.feFlood.setAttribute('flood-opacity', this.filterManager.effectElements[1].p.v / 255);\r\n      }\r\n\r\n      if (forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf) {\r\n        var distance = this.filterManager.effectElements[3].p.v;\r\n        var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n        var x = distance * Math.cos(angle);\r\n        var y = distance * Math.sin(angle);\r\n        this.feOffset.setAttribute('dx', x);\r\n        this.feOffset.setAttribute('dy', y);\r\n      }\r\n    }\r\n  };\r\n\r\n  var _svgMatteSymbols = [];\r\n\r\n  function SVGMatte3Effect(filterElem, filterManager, elem) {\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.filterElem = filterElem;\r\n    this.elem = elem;\r\n    elem.matteElement = createNS('g');\r\n    elem.matteElement.appendChild(elem.layerElement);\r\n    elem.matteElement.appendChild(elem.transformedElement);\r\n    elem.baseElement = elem.matteElement;\r\n  }\r\n\r\n  SVGMatte3Effect.prototype.findSymbol = function (mask) {\r\n    var i = 0;\r\n    var len = _svgMatteSymbols.length;\r\n\r\n    while (i < len) {\r\n      if (_svgMatteSymbols[i] === mask) {\r\n        return _svgMatteSymbols[i];\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  SVGMatte3Effect.prototype.replaceInParent = function (mask, symbolId) {\r\n    var parentNode = mask.layerElement.parentNode;\r\n\r\n    if (!parentNode) {\r\n      return;\r\n    }\r\n\r\n    var children = parentNode.children;\r\n    var i = 0;\r\n    var len = children.length;\r\n\r\n    while (i < len) {\r\n      if (children[i] === mask.layerElement) {\r\n        break;\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    var nextChild;\r\n\r\n    if (i <= len - 2) {\r\n      nextChild = children[i + 1];\r\n    }\r\n\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n\r\n    if (nextChild) {\r\n      parentNode.insertBefore(useElem, nextChild);\r\n    } else {\r\n      parentNode.appendChild(useElem);\r\n    }\r\n  };\r\n\r\n  SVGMatte3Effect.prototype.setElementAsMask = function (elem, mask) {\r\n    if (!this.findSymbol(mask)) {\r\n      var symbolId = createElementID();\r\n      var masker = createNS('mask');\r\n      masker.setAttribute('id', mask.layerId);\r\n      masker.setAttribute('mask-type', 'alpha');\r\n\r\n      _svgMatteSymbols.push(mask);\r\n\r\n      var defs = elem.globalData.defs;\r\n      defs.appendChild(masker);\r\n      var symbol = createNS('symbol');\r\n      symbol.setAttribute('id', symbolId);\r\n      this.replaceInParent(mask, symbolId);\r\n      symbol.appendChild(mask.layerElement);\r\n      defs.appendChild(symbol);\r\n      var useElem = createNS('use');\r\n      useElem.setAttribute('href', '#' + symbolId);\r\n      masker.appendChild(useElem);\r\n      mask.data.hd = false;\r\n      mask.show();\r\n    }\r\n\r\n    elem.setMatte(mask.layerId);\r\n  };\r\n\r\n  SVGMatte3Effect.prototype.initialize = function () {\r\n    var ind = this.filterManager.effectElements[0].p.v;\r\n    var elements = this.elem.comp.elements;\r\n    var i = 0;\r\n    var len = elements.length;\r\n\r\n    while (i < len) {\r\n      if (elements[i] && elements[i].data.ind === ind) {\r\n        this.setElementAsMask(this.elem, elements[i]);\r\n      }\r\n\r\n      i += 1;\r\n    }\r\n\r\n    this.initialized = true;\r\n  };\r\n\r\n  SVGMatte3Effect.prototype.renderFrame = function () {\r\n    if (!this.initialized) {\r\n      this.initialize();\r\n    }\r\n  };\r\n\r\n  function SVGGaussianBlurEffect(filter, filterManager, elem, id) {\r\n    // Outset the filter region by 100% on all sides to accommodate blur expansion.\r\n    filter.setAttribute('x', '-100%');\r\n    filter.setAttribute('y', '-100%');\r\n    filter.setAttribute('width', '300%');\r\n    filter.setAttribute('height', '300%');\r\n    this.filterManager = filterManager;\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    feGaussianBlur.setAttribute('result', id);\r\n    filter.appendChild(feGaussianBlur);\r\n    this.feGaussianBlur = feGaussianBlur;\r\n  }\r\n\r\n  SVGGaussianBlurEffect.prototype.renderFrame = function (forceRender) {\r\n    if (forceRender || this.filterManager._mdf) {\r\n      // Empirical value, matching AE's blur appearance.\r\n      var kBlurrinessToSigma = 0.3;\r\n      var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma; // Dimensions mapping:\r\n      //\r\n      //   1 -> horizontal & vertical\r\n      //   2 -> horizontal only\r\n      //   3 -> vertical only\r\n      //\r\n\r\n      var dimensions = this.filterManager.effectElements[1].p.v;\r\n      var sigmaX = dimensions == 3 ? 0 : sigma; // eslint-disable-line eqeqeq\r\n\r\n      var sigmaY = dimensions == 2 ? 0 : sigma; // eslint-disable-line eqeqeq\r\n\r\n      this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + ' ' + sigmaY); // Repeat edges mapping:\r\n      //\r\n      //   0 -> off -> duplicate\r\n      //   1 -> on  -> wrap\r\n\r\n      var edgeMode = this.filterManager.effectElements[2].p.v == 1 ? 'wrap' : 'duplicate'; // eslint-disable-line eqeqeq\r\n\r\n      this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\r\n    }\r\n  };\r\n\r\n  registerRenderer('canvas', CanvasRenderer);\r\n  registerRenderer('html', HybridRenderer);\r\n  registerRenderer('svg', SVGRenderer); // Registering shape modifiers\r\n\r\n  ShapeModifiers.registerModifier('tm', TrimModifier);\r\n  ShapeModifiers.registerModifier('pb', PuckerAndBloatModifier);\r\n  ShapeModifiers.registerModifier('rp', RepeaterModifier);\r\n  ShapeModifiers.registerModifier('rd', RoundCornersModifier);\r\n  ShapeModifiers.registerModifier('zz', ZigZagModifier);\r\n  ShapeModifiers.registerModifier('op', OffsetPathModifier); // Registering expression plugin\r\n\r\n  setExpressionsPlugin(Expressions);\r\n  setExpressionInterfaces(getInterface);\r\n  initialize$1();\r\n  initialize(); // Registering svg effects\r\n\r\n  registerEffect(20, SVGTintFilter, true);\r\n  registerEffect(21, SVGFillFilter, true);\r\n  registerEffect(22, SVGStrokeEffect, false);\r\n  registerEffect(23, SVGTritoneFilter, true);\r\n  registerEffect(24, SVGProLevelsFilter, true);\r\n  registerEffect(25, SVGDropShadowEffect, true);\r\n  registerEffect(28, SVGMatte3Effect, false);\r\n  registerEffect(29, SVGGaussianBlurEffect, true);\r\n\r\n  return lottie;\r\n\r\n}));\r\n", null, null, "function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n", null, null, null, null],
  "mappings": "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",
  "names": []
}
